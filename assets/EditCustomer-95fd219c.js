import{A as x,d as J,G as M,q as E,s as H,y as ae,p as K,v as Q,r as y,o as b,c as W,a as e,t as B,u as c,g as C,w as v,b as s,z as I,x as G,_ as X,h as te,L as oe}from"./index-eb5b4f51.js";import{v as V}from"./utils-17deefef.js";import{a as Y}from"./helpers-a12fb3e4.js";const S={list:x+"/contacts",delete:x+"/contacts",detail:x+"/contacts",register:x+"/contacts"},O=localStorage.getItem("__token");async function aa(l){const r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+O}};let t=null;return await fetch(l?`${S.list}?start_date=${l.start||""}&end_date=${l.end||""}&status=${l.status||""}`:S.list,r).then(n=>{t=n.json()}),t}async function ta(l){const r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+O},body:JSON.stringify(l)};let t=null;return await fetch(S.register,r).then(n=>{t=n.json()}),t}async function oa(l){const r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+O}};let t=null;return await fetch(`${S.register}/${l}/archive`,r).then(n=>{t=n.json()}),t}async function la(l){const r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+O}};let t=null;return await fetch(`${S.delete}/${l}`,r).then(n=>{t=n.json()}),t}async function le(l){const r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+O}};let t=null;return await fetch(`${S.detail}/${l}`,r).then(n=>{t=n.json()}),t}async function ne(l,r){const t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+O},body:JSON.stringify(r)};let n=null;return await fetch(`${S.detail}/${l}`,t).then(u=>{n=u.json()}),n}const U={list:x+"/companies",delete:x+"/companies",detail:x+"/companies",register:x+"/companies"},N=localStorage.getItem("__token");async function se(l){const r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N}};let t=null;return await fetch(l?`${U.list}?start_date=${l.start||""}&end_date=${l.end||""}&status=${l.status||""}`:U.list,r).then(n=>{t=n.json()}),t}async function ce(l){const r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N},body:JSON.stringify(l)};let t=null;return await fetch(U.register,r).then(n=>{t=n.json()}),t}async function na(l){const r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N}};let t=null;return await fetch(`${U.delete}/${l}`,r).then(n=>{t=n.json()}),t}async function ie(l,r){const t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N},body:JSON.stringify(r)};let n=null;return await fetch(`${U.detail}/${l}`,t).then(u=>{n=u.json()}),n}const re={class:"bg-blue-50"},de={class:"mb-4"},ue={class:"flex justify-between align-center justify-center"},me={class:"h5 font-bold m-0"},pe={class:"new-customer gap-8"},ve={class:"w-full bg-white p-2 mt-3 mb-4 py-5"},_e={class:"gap-2"},he={class:"w-full columns-1"},fe={class:"w-full"},ye={class:"w-full mt-2"},be={class:"columns-2 mt-3"},ge={class:"w-full"},Ve={class:"w-full"},we={class:"columns-1 mt-3"},xe={class:"w-full"},Ce={class:"pb-3"},$e={class:"flex justify-end"},Ie={class:"flex gap-2"},Se={class:"text-xs px-1"},je=J({__name:"NewCompany",props:{data:{default:null,type:Object}},emits:["close"],setup(l,{emit:r}){const t=r,n=Y,u=l,{t:j}=M(),f=E(!1),{isValid:k,validate:z,reset:D}=H("formRef"),a=ae({}),{notify:T}=K();Q(()=>{var _,d,g,w,m;u.data&&(a.socialreason=(_=u.data)==null?void 0:_.socialreason,a.ruc=(d=u.data)==null?void 0:d.ruc,a.whatsapp=(g=u.data)==null?void 0:g.whatsapp,a.phone=(w=u.data)==null?void 0:w.phone,a.address=(m=u.data)==null?void 0:m.address)});const R=async()=>{var _;if(z()){f.value=!0;try{u.data?(await ie((_=u.data)==null?void 0:_.id,a),T({message:"Emnpresa actualizada correctamente",color:"success"})):(await ce(a),T({message:"Emnpresa registrada correctamente",color:"success"}),D()),t("close")}catch(d){console.log(d)}f.value=!1}},q=()=>{window.open("https://e-consultaruc.sunat.gob.pe/cl-ti-itmrconsruc/FrameCriterioBusquedaWeb.jsp","_blank","menubar=1,resizable=0,width=600,height=500")};return(_,d)=>{const g=y("VaInput"),w=y("VaIcon"),m=y("VaForm"),o=y("VaButton");return b(),W("div",re,[e("div",de,[e("div",ue,[e("h1",me,B(c(j)("contacts.newCompany")),1)])]),e("div",pe,[!_.$props.data||a.socialreason?(b(),C(m,{key:0,ref:"formRef",immediate:"",class:"gap-2"},{default:v(()=>[e("div",ve,[e("div",_e,[e("div",he,[e("div",fe,[s(g,{modelValue:a.socialreason,"onUpdate:modelValue":d[0]||(d[0]=p=>a.socialreason=p),maxlength:"40",stateful:"",clearable:"",name:"company_socialreason",label:"Razón social",rules:[c(V).required]},null,8,["modelValue","rules"])]),e("div",ye,[I((b(),C(g,{modelValue:a.ruc,"onUpdate:modelValue":d[2]||(d[2]=p=>a.ruc=p),maxlength:"20",name:"ruc",stateful:"",clearable:"",label:"RUC",rules:[c(V).required]},{appendInner:v(()=>[s(w,{name:"open_in_new",class:"cursor-pointer",onClick:d[1]||(d[1]=p=>q())})]),_:1},8,["modelValue","rules"])),[[c(n)]])])]),e("div",be,[e("div",ge,[I((b(),C(g,{modelValue:a.phone,"onUpdate:modelValue":d[3]||(d[3]=p=>a.phone=p),stateful:"",clearable:"",maxlength:"12",name:"company_phone",label:"Teléfono",rules:[c(V).required]},{prependInner:v(()=>[s(w,{name:"call",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue","rules"])),[[c(n)]])]),e("div",Ve,[I((b(),C(g,{modelValue:a.whatsapp,"onUpdate:modelValue":d[4]||(d[4]=p=>a.whatsapp=p),stateful:"",maxlength:"12",clearable:"",name:"company_whatsapp",label:"WhatsApp"},{prependInner:v(()=>[s(w,{name:"call",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue"])),[[c(n)]])])]),e("div",we,[e("div",xe,[s(g,{modelValue:a.address,"onUpdate:modelValue":d[5]||(d[5]=p=>a.address=p),stateful:"",clearable:"",maxlength:"50",name:"company_address",label:"Dirección de contacto"},null,8,["modelValue"])])])])])]),_:1},512)):G("",!0)]),e("div",Ce,[e("div",$e,[e("div",Ie,[s(o,{icon:"save",color:"primary",disabled:!c(k),loading:f.value,onClick:R},{default:v(()=>[e("span",Se,B(u.data?"Actualizar empresa":c(j)("contacts.createCompany")),1)]),_:1},8,["disabled","loading"])])])])])}}});const sa=X(je,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/customers/pages/NewCompany.vue"]]),Te={class:"bg-blue-50"},Be={class:"flex justify-between align-center justify-center"},Oe={class:"h5 font-bold m-0"},Ue={class:"flex gap-2"},ke={class:"text-xs px-1"},qe={class:"py-4 new-customer gap-8"},Ae={class:"w-full bg-white p-2"},Ee=e("p",{class:"text-sm font-medium mb-3"},"Datos personales",-1),Ne={class:"gap-2"},ze={class:"w-full columns-1 sm:columns-4 gap-4"},De={class:"w-full mt-3"},Re={class:"w-full"},Pe={class:"w-full columns-1 sm:columns-4 gap-4 mt-3 pb-3"},Fe={class:"w-full mt-5"},Le={key:0,class:"columns-1 sm:columns-3 mt-5"},We={key:1,class:"bg-blue-50 px-3 py-2 mt-5"},Ge={class:"font-bold text-sm mb-3"},Je={class:"columns-3 sm:columns-4"},Me={class:"pb-3"},He={class:"flex justify-end"},Ke={class:"flex gap-2"},Qe={class:"text-xs px-1"},Xe=J({__name:"EditCustomer",props:{id:{type:String,default:""}},emits:["close"],setup(l,{emit:r}){const t=Y,n=r,u=l,{t:j}=M(),f=E(!1),{isValid:k,validate:z,reset:D}=H("formRef"),a=E({havecompany:!1}),T=E([]),{notify:R}=K(),q=async()=>{if(z()){f.value=!0;const{fullname:m,document_type:o,document:p,ruc:h,email:A,email_corporative:$,cellphone:P,whatsapp:F,address:L,havecompany:i,company:Z}=a.value,ee=o==null?void 0:o.code;await ne(u.id,{fullname:m,document_type:ee,document:p,ruc:h,email:A,email_corporative:$,cellphone:P,whatsapp:F,address:L,havecompany:i,company:Z}),R({message:"Cliente actualizado correctamente",color:"success"}),D(),f.value=!1,n("close")}},_=te(()=>T.value.find(m=>m.id===a.value.company));Q(async()=>{oe(()=>a.value.havecompany,async o=>{o&&(f.value=!0,await w(),f.value=!1)});const m=await le(u.id);a.value=m,a.value.havecompany=!!m.havecompany,a.value.document_type={code:m.document_type,text:"DNI"}});const d=[{code:1,text:"DNI"},{code:2,text:"C.E"},{code:3,text:"PASAPORTE"}],g=()=>{window.open("https://e-consultaruc.sunat.gob.pe/cl-ti-itmrconsruc/FrameCriterioBusquedaWeb.jsp","_blank","menubar=1,resizable=0,width=600,height=500")},w=async()=>{const m=await se();T.value=m};return(m,o)=>{const p=y("VaButton"),h=y("VaInput"),A=y("VaSelect"),$=y("VaIcon"),P=y("VaSwitch"),F=y("VaForm"),L=y("VaInnerLoading");return b(),C(L,{loading:f.value,style:{"--va-inner-loading-min-width":"100%"}},{default:v(()=>[e("div",Te,[e("div",null,[e("div",Be,[e("h1",Oe,B(c(j)("contacts.contactDetail")),1),e("div",Ue,[s(p,{icon:"save",color:"primary",disabled:!c(k),loading:f.value,onClick:q},{default:v(()=>[e("span",ke,B(c(j)("contacts.updateContact")),1)]),_:1},8,["disabled","loading"])])])]),e("div",qe,[s(F,{ref:"formRef",immediate:"",class:"gap-2"},{default:v(()=>[e("div",Ae,[Ee,e("div",Ne,[e("div",ze,[e("div",null,[s(h,{modelValue:a.value.fullname,"onUpdate:modelValue":o[0]||(o[0]=i=>a.value.fullname=i),stateful:"",name:"fullname",placeholder:"Sin Información",clearable:"",maxlength:"50",label:"Nombres completos",loading:f.value,rules:[c(V).required]},null,8,["modelValue","loading","rules"])]),e("div",null,[s(A,{modelValue:a.value.document_type,"onUpdate:modelValue":o[1]||(o[1]=i=>a.value.document_type=i),name:"document_type",placeholder:"Sin Información",options:d,rules:[c(V).required],label:"Tipo de documento"},null,8,["modelValue","rules"])]),e("div",null,[I(s(h,{modelValue:a.value.document,"onUpdate:modelValue":o[2]||(o[2]=i=>a.value.document=i),name:"document",placeholder:"Sin Información",stateful:"",clearable:"",label:"N° Documento",maxlength:"22",rules:[c(V).required]},null,8,["modelValue","rules"]),[[c(t)]])]),e("div",null,[I((b(),C(h,{modelValue:a.value.ruc,"onUpdate:modelValue":o[4]||(o[4]=i=>a.value.ruc=i),name:"ruc",maxlength:"20",placeholder:"Sin Información",stateful:"",clearable:"",label:"RUC"},{appendInner:v(()=>[s($,{name:"open_in_new",class:"cursor-pointer",onClick:o[3]||(o[3]=i=>g())})]),_:1},8,["modelValue"])),[[c(t)]])])]),e("div",De,[e("div",Re,[s(h,{modelValue:a.value.address,"onUpdate:modelValue":o[5]||(o[5]=i=>a.value.address=i),name:"address",placeholder:"Sin Información",stateful:"",clearable:"",label:"Dirección de contacto"},null,8,["modelValue"])])]),e("div",Pe,[e("div",null,[s(h,{modelValue:a.value.email,"onUpdate:modelValue":o[6]||(o[6]=i=>a.value.email=i),name:"email",placeholder:"Sin Información",stateful:"",maxlength:"25",clearable:"",label:"Correo electrónico",rules:[c(V).email]},{prependInner:v(()=>[s($,{name:"alternate_email",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue","rules"])]),e("div",null,[s(h,{modelValue:a.value.email_corporative,"onUpdate:modelValue":o[7]||(o[7]=i=>a.value.email_corporative=i),name:"email_corporative",placeholder:"Sin Información",stateful:"",clearable:"",maxlength:"25",label:"Correo corporativo",rules:[c(V).email]},{prependInner:v(()=>[s($,{name:"alternate_email",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue","rules"])]),e("div",null,[I((b(),C(h,{modelValue:a.value.cellphone,"onUpdate:modelValue":o[8]||(o[8]=i=>a.value.cellphone=i),placeholder:"Sin Información",maxlength:"12",name:"cellphone",stateful:"",clearable:"",label:"Teléfono",rules:[c(V).required]},{prependInner:v(()=>[s($,{name:"call",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue","rules"])),[[c(t)]])]),e("div",null,[I((b(),C(h,{modelValue:a.value.whatsapp,"onUpdate:modelValue":o[9]||(o[9]=i=>a.value.whatsapp=i),name:"whatsapp",maxlength:"12",placeholder:"Sin Información",stateful:"",clearable:"",label:"WhatsApp"},{prependInner:v(()=>[s($,{name:"call",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue"])),[[c(t)]])])]),e("div",Fe,[s(P,{modelValue:a.value.havecompany,"onUpdate:modelValue":o[10]||(o[10]=i=>a.value.havecompany=i),class:"text-xs",name:"havecompany",label:"Representa una empresa",size:"small"},null,8,["modelValue"])]),a.value.havecompany?(b(),W("div",Le,[e("div",null,[s(A,{modelValue:a.value.company,"onUpdate:modelValue":o[11]||(o[11]=i=>a.value.company=i),name:"company_id",class:"text-xs",options:T.value,"track-by":"id","value-by":"id","text-by":"socialreason",searchable:"",clearable:"","search-placeholder-text":"Escribe el RUC",rules:[c(V).required],label:"Selecciona la empresa"},null,8,["modelValue","options","rules"])])])):G("",!0),a.value.havecompany&&_.value?(b(),W("div",We,[e("p",Ge,B(_.value.socialreason),1),e("div",Je,[e("div",null,[s(h,{"model-value":_.value.ruc,background:"#eee",name:"whatsapp",readonly:"",class:"opacity-85 cursor-not-allowed",placeholder:"Sin Información",label:"RUC"},null,8,["model-value"])]),e("div",null,[s(h,{"model-value":_.value.phone,background:"#eee",name:"whatsapp",placeholder:"Sin Información",readonly:"",class:"opacity-85 cursor-not-allowed",label:"Teléfono"},null,8,["model-value"])]),e("div",null,[s(h,{"model-value":_.value.whatsapp,background:"#eee",name:"whatsapp",readonly:"",placeholder:"Sin Información",class:"opacity-85 cursor-not-allowed",label:"WhatsApp"},null,8,["model-value"])])])])):G("",!0)])])]),_:1},512)]),e("div",Me,[e("div",He,[e("div",Ke,[s(p,{icon:"save",color:"primary",disabled:!c(k),loading:f.value,onClick:q},{default:v(()=>[e("span",Qe,B(c(j)("contacts.updateContact")),1)]),_:1},8,["disabled","loading"])])])])])]),_:1},8,["loading"])}}});const ca=X(Xe,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/customers/pages/EditCustomer.vue"]]);export{ca as E,sa as N,oa as a,se as b,na as c,la as d,aa as g,ta as n};
//# sourceMappingURL=EditCustomer-95fd219c.js.map
