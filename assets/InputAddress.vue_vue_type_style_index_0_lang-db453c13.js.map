{"version":3,"file":"InputAddress.vue_vue_type_style_index_0_lang-db453c13.js","sources":["../../src/core/requests/Routes.ts","../../src/core/requests/Address.ts","../../src/pages/oportunities/components/InputAddress.vue"],"sourcesContent":["import { API } from '../constants'\r\n\r\nconst services = {\r\n  list: API + '/routes',\r\n  delete: API + '/routes',\r\n  register: API + '/routes',\r\n}\r\n\r\nconst _token = localStorage.getItem('__token')\r\n\r\nexport async function getAllRoutes() {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + _token,\r\n    },\r\n    // body: JSON.stringify({ name: 'Vue 3 POST Request Example' }),\r\n  }\r\n  let res = null\r\n\r\n  await fetch(services.list, requestOptions).then((response) => {\r\n    res = response.json()\r\n  })\r\n\r\n  return res\r\n}\r\n\r\nexport async function newRoute(body: any) {\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + _token,\r\n    },\r\n    body: JSON.stringify(body),\r\n  }\r\n  let res = null\r\n\r\n  await fetch(services.register, requestOptions).then((response) => {\r\n    res = response.json()\r\n  })\r\n\r\n  return res\r\n}\r\n\r\nexport async function updateRoute(body: any, id: any) {\r\n  const requestOptions = {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + _token,\r\n    },\r\n    body: JSON.stringify(body),\r\n  }\r\n  let res = null\r\n\r\n  await fetch(`${services.register}/${id}`, requestOptions).then((response) => {\r\n    res = response.json()\r\n  })\r\n\r\n  return res\r\n}\r\nexport async function deleteRoute(id: any) {\r\n  const requestOptions = {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: 'Bearer ' + _token,\r\n    },\r\n  }\r\n  let res = null\r\n\r\n  await fetch(`${services.delete}/${id}`, requestOptions).then((response) => {\r\n    res = response.json()\r\n  })\r\n\r\n  return res\r\n}\r\n","import { SerperInput } from './types/_Address'\r\n\r\nconst serperKeys = {\r\n  host: 'https://google.serper.dev/search',\r\n  key: '4597d700634fd111c84687b9570691068b2698ee',\r\n  type: 'application/json',\r\n}\r\n\r\nexport async function getPlaces(body: SerperInput): Promise<any> {\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: {\r\n      'X-API-KEY': serperKeys.key,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  }\r\n  let res = null\r\n\r\n  await fetch(serperKeys.host, requestOptions).then((response) => {\r\n    res = response.json()\r\n  })\r\n\r\n  return res\r\n}\r\n","<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { debounce } from 'lodash'\r\nimport { getPlaces } from '../../../core/requests/Address'\r\n\r\nconst props = defineProps({\r\n  label: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  onlyaddress: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  nomaps: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n})\r\n\r\nconst emit = defineEmits(['selected'])\r\n\r\nconst input = ref('')\r\nconst showPlaces = ref(false)\r\nconst places: any = ref([])\r\n\r\nconst onchange = debounce(async () => {\r\n  if (!props.nomaps) {\r\n    showPlaces.value = false\r\n    places.value = []\r\n    const _places: any = await getPlaces({\r\n      q: input.value,\r\n      gl: 'pe',\r\n      hl: 'en',\r\n      num: 20,\r\n      autocorrect: true,\r\n      page: 1,\r\n      type: 'maps',\r\n    })\r\n\r\n    places.value = _places.places\r\n    showPlaces.value = true\r\n  } else {\r\n    emit('selected', {\r\n      // position: item,\r\n      label: input.value,\r\n    })\r\n  }\r\n}, 500)\r\n\r\nconst checkPlaces = () => {\r\n  showPlaces.value = places.value.length\r\n}\r\n\r\nconst selectPlace = (item: any) => {\r\n  showPlaces.value = false\r\n  if (props.onlyaddress && !item.address) {\r\n    input.value = `${item.title}`\r\n  } else {\r\n    input.value = `${item.title} ${item.address ? '- ' + item.address : ''}`\r\n  }\r\n  emit('selected', {\r\n    position: item,\r\n    label: input.value,\r\n  })\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"\">\r\n    <div class=\"relative\">\r\n      <VaInput\r\n        v-model=\"input\"\r\n        :label=\"$props.label\"\r\n        placeholder=\"Escribe la direcciÃ³n\"\r\n        @input=\"onchange()\"\r\n        @click=\"checkPlaces\"\r\n      />\r\n\r\n      <div\r\n        v-if=\"showPlaces\"\r\n        class=\"i-filter-results bg-white w-full shadow bg-blue-100\"\r\n        @mouseleave=\"showPlaces = false\"\r\n      >\r\n        <p\r\n          v-for=\"(item, index) in places\"\r\n          :key=\"index\"\r\n          class=\"text-xs hover:bg-primary hover:text-white cursor-pointer\"\r\n          @click=\"selectPlace(item)\"\r\n        >\r\n          {{ item.title }} {{ item.address && '- ' + item.address }}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.i-filter-results {\r\n  position: absolute;\r\n  top: 46px;\r\n  left: 0;\r\n  max-height: 70px;\r\n  overflow-y: scroll;\r\n  padding: 5px 6px;\r\n  z-index: 9;\r\n}\r\n</style>\r\n"],"names":["services","API","_token","getAllRoutes","requestOptions","res","response","newRoute","body","updateRoute","id","deleteRoute","serperKeys","getPlaces","props","__props","emit","__emit","input","ref","showPlaces","places","onchange","debounce","_places","checkPlaces","selectPlace","item"],"mappings":"qKAEA,MAAMA,EAAW,CACf,KAAMC,EAAM,UACZ,OAAQA,EAAM,UACd,SAAUA,EAAM,SAClB,EAEMC,EAAS,aAAa,QAAQ,SAAS,EAE7C,eAAsBC,GAAe,CACnC,MAAMC,EAAiB,CACrB,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,cAAe,UAAYF,CAC7B,CAAA,EAGF,IAAIG,EAAM,KAEV,aAAM,MAAML,EAAS,KAAMI,CAAc,EAAE,KAAME,GAAa,CAC5DD,EAAMC,EAAS,MAAK,CACrB,EAEMD,CACT,CAEA,eAAsBE,EAASC,EAAW,CACxC,MAAMJ,EAAiB,CACrB,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAe,UAAYF,CAC7B,EACA,KAAM,KAAK,UAAUM,CAAI,CAAA,EAE3B,IAAIH,EAAM,KAEV,aAAM,MAAML,EAAS,SAAUI,CAAc,EAAE,KAAME,GAAa,CAChED,EAAMC,EAAS,MAAK,CACrB,EAEMD,CACT,CAEsB,eAAAI,EAAYD,EAAWE,EAAS,CACpD,MAAMN,EAAiB,CACrB,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,cAAe,UAAYF,CAC7B,EACA,KAAM,KAAK,UAAUM,CAAI,CAAA,EAE3B,IAAIH,EAAM,KAEJ,aAAA,MAAM,GAAGL,EAAS,QAAQ,IAAIU,CAAE,GAAIN,CAAc,EAAE,KAAME,GAAa,CAC3ED,EAAMC,EAAS,MAAK,CACrB,EAEMD,CACT,CACA,eAAsBM,EAAYD,EAAS,CACzC,MAAMN,EAAiB,CACrB,OAAQ,SACR,QAAS,CACP,eAAgB,mBAChB,cAAe,UAAYF,CAC7B,CAAA,EAEF,IAAIG,EAAM,KAEJ,aAAA,MAAM,GAAGL,EAAS,MAAM,IAAIU,CAAE,GAAIN,CAAc,EAAE,KAAME,GAAa,CACzED,EAAMC,EAAS,MAAK,CACrB,EAEMD,CACT,CC5EA,MAAMO,EAAa,CACjB,KAAM,mCACN,IAAK,2CACL,KAAM,kBACR,EAEA,eAAsBC,EAAUL,EAAiC,CAC/D,MAAMJ,EAAiB,CACrB,OAAQ,OACR,QAAS,CACP,YAAaQ,EAAW,IACxB,eAAgB,kBAClB,EACA,KAAM,KAAK,UAAUJ,CAAI,CAAA,EAE3B,IAAIH,EAAM,KAEV,aAAM,MAAMO,EAAW,KAAMR,CAAc,EAAE,KAAME,GAAa,CAC9DD,EAAMC,EAAS,MAAK,CACrB,EAEMD,CACT,qOCnBA,MAAMS,EAAQC,EAeRC,EAAOC,EAEPC,EAAQC,EAAI,EAAE,EACdC,EAAaD,EAAI,EAAK,EACtBE,EAAcF,EAAI,CAAA,CAAE,EAEpBG,EAAWC,EAAAA,SAAS,SAAY,CAChC,GAACT,EAAM,OAgBTE,EAAK,WAAY,CAEf,MAAOE,EAAM,KAAA,CACd,MAnBgB,CACjBE,EAAW,MAAQ,GACnBC,EAAO,MAAQ,GACT,MAAAG,EAAe,MAAMX,EAAU,CACnC,EAAGK,EAAM,MACT,GAAI,KACJ,GAAI,KACJ,IAAK,GACL,YAAa,GACb,KAAM,EACN,KAAM,MAAA,CACP,EAEDG,EAAO,MAAQG,EAAQ,OACvBJ,EAAW,MAAQ,EAAA,GAOpB,GAAG,EAEAK,EAAc,IAAM,CACbL,EAAA,MAAQC,EAAO,MAAM,MAAA,EAG5BK,EAAeC,GAAc,CACjCP,EAAW,MAAQ,GACfN,EAAM,aAAe,CAACa,EAAK,QACvBT,EAAA,MAAQ,GAAGS,EAAK,KAAK,GAErBT,EAAA,MAAQ,GAAGS,EAAK,KAAK,IAAIA,EAAK,QAAU,KAAOA,EAAK,QAAU,EAAE,GAExEX,EAAK,WAAY,CACf,SAAUW,EACV,MAAOT,EAAM,KAAA,CACd,CAAA"}