import{_ as ie}from"./NewCustomer.vue_vue_type_style_index_0_lang-3514b682.js";import{g as ue,_ as de,d as re,a as me}from"./NewCompany.vue_vue_type_style_index_0_lang-cf015035.js";import{d as pe,u as _e,r as c,x as ve,o as fe,b as v,c as i,e as u,h as e,t as o,k as j,f as t,w as a,i as m,H as he,g as d,F as J,l as K}from"./index-5c8bf84e.js";import{_ as be}from"./EditCustomer.vue_vue_type_style_index_0_lang-a3140902.js";import{_ as ye}from"./NewOportunity.vue_vue_type_style_index_0_lang-0184ace5.js";import{f as Q}from"./format-8e15a9c0.js";import"./utils-17deefef.js";import"./helpers-a12fb3e4.js";import"./Services-5fdaf7dd.js";import"./InputAddress.vue_vue_type_style_index_0_lang-f9f1dae0.js";import"./lodash-2dc3c718.js";import"./oportunities-store-ae6562c0.js";import"./Orders-7f36c568.js";const ge={class:"py-4"},Ce={class:"flex justify-between align-center justify-center"},Ve={class:"h5 m-0"},xe={class:"flex gap-2"},ke=e("span",{class:"px-1"},"Descargar",-1),Te={class:"mt-5"},ze={class:"columns-5 mb-7"},Ne={class:"w-full bg-white p-2"},Ae={class:"flex gap-1"},Fe={class:"font-bold text-primary"},Ue={class:"flex px-2 py-3 gap-2 bg-blue-50 mx-10 rounded my-2"},Ee={class:"w-full pl-2"},$e={class:"gap-1"},we={class:"text-base font-medium"},Me={class:"uppercase font-black"},Ie={class:"w-full columns-6 mt-2 mb-1"},Se={key:0,class:"w-full items-center text-xs"},je=e("b",null,"DNI:",-1),Pe=e("br",null,null,-1),Re={key:1,class:"w-full items-center text-xs"},Be=e("b",null,"RUC:",-1),qe=e("br",null,null,-1),Le={key:2,class:"w-full items-center text-xs"},Oe=e("b",null,"Teléfono:",-1),He=e("br",null,null,-1),We={key:3,class:"w-full items-center text-xs"},Ge=e("b",null,"WhatsApp:",-1),Je=e("br",null,null,-1),Ke={key:4,class:"w-full items-center text-xs"},Qe=e("b",null,"Correo Electrónico:",-1),Xe=e("br",null,null,-1),Ye={class:"flex flex-col bg-white mt-6 py-2 pb-5 px-4"},Ze={key:0,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},De={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},el={key:1,class:"va-table-responsive w-full"},ll={class:"va-table w-full"},tl=e("thead",null,[e("tr",null,[e("th",null,"n° Cotización"),e("th",null,"Comercial"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Creación"),e("th",null,"Estado")])],-1),sl={key:1,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},ol=e("p",{class:"bg-red-300 font-bold p-2"},"El cliente no tiene ordenes de trabajo",-1),nl=e("div",{class:"va-table-responsive w-full"},[e("table",{class:"va-table w-full"},[e("thead",null,[e("tr",null,[e("th",null,"n° Orden"),e("th",null,"Responsable"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Inicio"),e("th",null,"Fecha Fin")])]),e("tbody")])],-1),al=[ol,nl],cl={key:2,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},il={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},ul={key:1,class:"va-table-responsive w-full"},dl={class:"va-table w-full"},rl=e("thead",null,[e("tr",null,[e("th",null,"Razón Social"),e("th",null,"RUC"),e("th",null,"Teléfono"),e("th",null,"WhatsApp"),e("th",null,"Fecha Creación")])],-1),ml={colspan:"8"},pl={class:"flex justify-end mt-4"},_l={class:"mt-4"},vl=e("p",{class:"text-sm"},"¿Deseas activar este cliente?",-1),fl={class:"mt-4"},hl={class:"mt-4"},bl=e("p",{class:"text-sm"},"¿Deseas eliminar este cliente?",-1),wl=pe({__name:"ListArchives",setup(yl){const{notify:P}=_e(),b=c([]),z=c(!1),N=c(!1),V=c(!1),A=c(!1),h=c(null),F=c(!1),U=c(!1),R=c(!1),X=c(0),x=c(12),E=c(1),$=c(""),{t:B}=ve(),Y=[{key:"id",sortable:!1},{key:"Nombres Completos",sortable:!1},{key:"Empresa",sortable:!1},{key:"Documento",sortable:!1},{key:"Teléfono",sortable:!1},{key:"Fecha Archivación",sortable:!1},{key:"Fecha Creación",sortable:!1},{key:"Acciones",width:80,sortable:!1}],w=c({status:99});fe(()=>{M(w.value)});const M=async r=>{U.value=!0;const s=await ue(r);b.value=s.map(n=>{var T;return{...n,"Nombres Completos":n.fullname,Empresa:(T=n.company)==null?void 0:T.ruc,Documento:n.document,Teléfono:n.cellphone,"Fecha Archivación":n.archived_at&&Q(n.archived_at,"dd/MM/yyyy hh:mm aa"),"Fecha Creación":n.created_at&&Q(n.created_at,"dd/MM/yyyy hh:mm aa"),Acciones:!0,activeTab:0}}),U.value=!1},Z=r=>{V.value=!!r,h.value=r},I=r=>{A.value=!!r,h.value=r},q=()=>{z.value=!1,V.value=!1,M(w.value)},D=async()=>{F.value=!0,await re(h.value),P({message:"Cliente eliminado correctamente",color:"success",duration:1e3}),setTimeout(()=>{F.value=!1,I(null),M(w.value)})},ee=()=>x.value&&x.value!==0?Math.ceil(b.value.length/x.value):b.value.length,S=c(!1),le=()=>{S.value=!0,setTimeout(()=>{S.value=!1},2e3),console.log("download")},te=c(!1),k=c(!1),L=r=>{k.value=!!r,h.value=r},se=async()=>{await me(h.value),b.value=b.value.filter(r=>r.id!==h.value),h.value=null,k.value=!1,P({message:"Cliente actualizado correctamente",color:"success",duration:1e3})};return(r,s)=>{const n=v("VaButton"),T=v("VaInput"),C=v("VaIcon"),oe=v("VaTab"),ne=v("VaTabs"),ae=v("VaPagination"),ce=v("VaDataTable");v("VaChip"),v("VaAlert");const g=v("VaModal");return i(),u("div",ge,[e("div",Ce,[e("h1",Ve,o(j(B)("contacts.allArchivedContacts"))+" ("+o(b.value.length)+")",1),e("div",xe,[t(n,{icon:"exit_to_app",color:"info",loading:S.value,href:j(he)+"/contacts/archived/xls",onClick:le},{default:a(()=>[ke]),_:1},8,["loading","href"])])]),e("div",Te,[e("div",ze,[e("div",null,[t(T,{modelValue:$.value,"onUpdate:modelValue":s[0]||(s[0]=l=>$.value=l),label:j(B)("contacts.search"),placeholder:"Escribe lo que buscas",clearable:"",background:"#fff"},null,8,["modelValue","label"])])]),e("div",Ne,[t(ce,{items:b.value,columns:Y,class:"text-xs",hoverable:"","selected-color":"#eee",filter:$.value,"per-page":x.value,"current-page":E.value,loading:U.value,"no-data-html":"...",onFiltered:s[2]||(s[2]=l=>X.value=l.items.length)},{"cell(Acciones)":a(({row:l,isExpanded:y})=>[e("div",Ae,[t(n,{icon:"delete",color:"danger",round:"",onClick:f=>{var _;return I((_=l==null?void 0:l.rowData)==null?void 0:_.id)}},null,8,["onClick"]),t(n,{icon:"unarchive",color:"success",round:"",onClick:f=>{var _;return L((_=l==null?void 0:l.rowData)==null?void 0:_.id)}},null,8,["onClick"]),t(n,{icon:"description",color:"#158de3",round:"",onClick:f=>{var _;return Z((_=l==null?void 0:l.rowData)==null?void 0:_.id)}},null,8,["onClick"]),t(n,{icon:y?"va-arrow-up":"va-arrow-down",preset:"primary",onClick:f=>l.toggleRowDetails()},null,8,["icon","onClick"])])]),"cell(Empresa)":a(({row:l})=>{var y,f;return[e("span",Fe,o((f=(y=l.rowData)==null?void 0:y.company)==null?void 0:f.ruc),1)]}),expandableRow:a(({rowData:l})=>{var y,f,_,O,H,W,G;return[e("div",Ue,[e("div",Ee,[e("div",$e,[e("span",we,[e("span",Me,o(l["Nombres Completos"]),1)])]),e("div",Ie,[l.Documento?(i(),u("div",Se,[je,d(),Pe,e("span",null,[d(o(l.Documento)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.ruc?(i(),u("div",Re,[Be,d(),qe,e("span",null,[d(o(l.ruc)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.cellphone?(i(),u("div",Le,[Oe,d(),He,e("span",null,[d(o(l.cellphone)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.whatsapp?(i(),u("div",We,[Ge,d(),Je,e("span",null,[d(o(l.whatsapp)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.email?(i(),u("div",Ke,[Qe,d(),Xe,e("span",null,[d(o(l.email)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0)]),e("div",Ye,[t(ne,{modelValue:l.activeTab,"onUpdate:modelValue":p=>l.activeTab=p},{tabs:a(()=>[(i(),u(J,null,K(["Empresa"],p=>t(oe,{key:p},{default:a(()=>[d(o(p),1)]),_:2},1024)),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.activeTab===1?(i(),u("div",Ze,[(y=l.quotations)!=null&&y.length?m("",!0):(i(),u("p",De," El cliente no tiene cotizaciones ")),(f=l.quotations)!=null&&f.length?(i(),u("div",el,[e("table",ll,[tl,e("tbody",null,[(i(!0),u(J,null,K(l.quotations,p=>(i(),u("tr",{key:p.id},[e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1)]))),128))])])])):m("",!0)])):m("",!0),l.activeTab===2?(i(),u("div",sl,al)):m("",!0),l.activeTab===0?(i(),u("div",cl,[l.company?m("",!0):(i(),u("p",il," El cliente no está asociado a empresa ")),l.company?(i(),u("div",ul,[e("table",dl,[rl,e("tbody",null,[e("tr",null,[e("td",null,o((_=l.company)==null?void 0:_.socialreason),1),e("td",null,o((O=l.company)==null?void 0:O.ruc),1),e("td",null,o((H=l.company)==null?void 0:H.phone),1),e("td",null,o((W=l.company)==null?void 0:W.whatsapp),1),e("td",null,o((G=l.company)==null?void 0:G.created_at),1)])])])])):m("",!0)])):m("",!0)])])])]}),bodyAppend:a(()=>[e("tr",null,[e("td",ml,[e("div",pl,[t(ae,{modelValue:E.value,"onUpdate:modelValue":s[1]||(s[1]=l=>E.value=l),size:"small",class:"text-xs mb-3 justify-center sm:justify-start","buttons-preset":"primary","active-page-color":"textPrimary",pages:ee()},null,8,["modelValue","pages"])])])])]),_:1},8,["items","filter","per-page","current-page","loading","no-data-html"]),m("",!0)])]),t(g,{modelValue:N.value,"onUpdate:modelValue":s[4]||(s[4]=l=>N.value=l),"hide-default-actions":"",size:"340px","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",null,[t(de,{onClose:s[3]||(s[3]=l=>N.value=!1)})])]),_:1},8,["modelValue"]),t(g,{modelValue:z.value,"onUpdate:modelValue":s[5]||(s[5]=l=>z.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",_l,[t(ie,{onClose:q})])]),_:1},8,["modelValue"]),t(g,{modelValue:k.value,"onUpdate:modelValue":s[7]||(s[7]=l=>k.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:a(()=>[t(n,{size:"small",preset:"secondary",class:"mr-1",onClick:s[6]||(s[6]=l=>L(null))},{default:a(()=>[d(" Cancelar")]),_:1}),t(n,{size:"small",loading:te.value,onClick:se},{default:a(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:a(()=>[vl]),_:1},8,["modelValue"]),t(g,{modelValue:V.value,"onUpdate:modelValue":s[8]||(s[8]=l=>V.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",fl,[t(be,{id:h.value,onClose:q},null,8,["id"])])]),_:1},8,["modelValue"]),t(g,{modelValue:R.value,"onUpdate:modelValue":s[9]||(s[9]=l=>R.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",hl,[t(ye)])]),_:1},8,["modelValue"]),t(g,{modelValue:A.value,"onUpdate:modelValue":s[11]||(s[11]=l=>A.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:a(()=>[t(n,{size:"small",preset:"secondary",class:"mr-1",onClick:s[10]||(s[10]=l=>I(null))},{default:a(()=>[d(" Cancelar")]),_:1}),t(n,{size:"small",loading:F.value,onClick:D},{default:a(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:a(()=>[bl]),_:1},8,["modelValue"])])}}});export{wl as default};
//# sourceMappingURL=ListArchives-1dc166a9.js.map
