import{d as ce,u as ue,i,y as de,k as re,r as f,o as c,c as u,a as e,t as o,m as $,b as t,w as n,h as r,H as me,f as d,F as J,n as K,_ as pe}from"./index-b45d4e71.js";import{N as ve,a as fe}from"./NewOportunity-2125a7b7.js";import{g as _e,N as he,E as be,d as ye,a as ge}from"./EditCustomer-5d66d746.js";import{f as Q}from"./format-8e15a9c0.js";import"./utils-17deefef.js";import"./helpers-a12fb3e4.js";import"./Services-414ecf00.js";import"./InputAddress-fae9484f.js";import"./lodash-29f837a1.js";import"./oportunities-store-5a7168b3.js";import"./Orders-7a56ac88.js";const Ce={class:"py-4"},Ve={class:"flex justify-between align-center justify-center"},xe={class:"h5 m-0"},ke={class:"flex gap-2"},Ne=e("span",{class:"px-1"},"Descargar",-1),Te={class:"mt-5"},ze={class:"columns-5 mb-7"},Ae={class:"w-full bg-white p-2"},Ee={class:"flex gap-1"},Ue={class:"font-bold text-primary"},we={class:"flex px-2 py-3 gap-2 bg-blue-50 mx-10 rounded my-2"},Fe={class:"w-full pl-2"},Me={class:"gap-1"},Ie={class:"text-base font-medium"},je={class:"uppercase font-black"},Se={class:"w-full columns-6 mt-2 mb-1"},$e={key:0,class:"w-full items-center text-xs"},Pe=e("b",null,"DNI:",-1),Re=e("br",null,null,-1),Be={key:1,class:"w-full items-center text-xs"},Le=e("b",null,"RUC:",-1),Oe=e("br",null,null,-1),qe={key:2,class:"w-full items-center text-xs"},He=e("b",null,"Teléfono:",-1),We=e("br",null,null,-1),Ge={key:3,class:"w-full items-center text-xs"},Je=e("b",null,"WhatsApp:",-1),Ke=e("br",null,null,-1),Qe={key:4,class:"w-full items-center text-xs"},Xe=e("b",null,"Correo Electrónico:",-1),Ye=e("br",null,null,-1),Ze={class:"flex flex-col bg-white mt-6 py-2 pb-5 px-4"},De={key:0,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},el={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},ll={key:1,class:"va-table-responsive w-full"},tl={class:"va-table w-full"},sl=e("thead",null,[e("tr",null,[e("th",null,"n° Cotización"),e("th",null,"Comercial"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Creación"),e("th",null,"Estado")])],-1),ol={key:1,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},al=e("p",{class:"bg-red-300 font-bold p-2"},"El cliente no tiene ordenes de trabajo",-1),nl=e("div",{class:"va-table-responsive w-full"},[e("table",{class:"va-table w-full"},[e("thead",null,[e("tr",null,[e("th",null,"n° Orden"),e("th",null,"Responsable"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Inicio"),e("th",null,"Fecha Fin")])]),e("tbody",null,[r(` <tr v-for="user in []" :key="user.id">
                            <td>{{ user.fullName }}</td>
                            <td>{{ user.fullName }}</td>
                            <td>{{ user.fullName }}</td>
                            <td>{{ user.fullName }}</td>
                            <td>{{ user.fullName }}</td>
                          </tr> `)])])],-1),il=[al,nl],cl={key:2,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},ul={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},dl={key:1,class:"va-table-responsive w-full"},rl={class:"va-table w-full"},ml=e("thead",null,[e("tr",null,[e("th",null,"Razón Social"),e("th",null,"RUC"),e("th",null,"Teléfono"),e("th",null,"WhatsApp"),e("th",null,"Fecha Creación")])],-1),pl={colspan:"8"},vl={class:"flex justify-end mt-4"},fl={class:"mt-4"},_l=e("p",{class:"text-sm"},"¿Deseas activar este cliente?",-1),hl={class:"mt-4"},bl={class:"mt-4"},yl=e("p",{class:"text-sm"},"¿Deseas eliminar este cliente?",-1),gl=ce({__name:"ListArchives",setup(Cl){const{notify:P}=ue(),b=i([]),T=i(!1),z=i(!1),V=i(!1),A=i(!1),h=i(null),E=i(!1),U=i(!1),R=i(!1),X=i(0),x=i(12),w=i(1),F=i(""),{t:B}=de(),Y=[{key:"id",sortable:!1},{key:"Nombres Completos",sortable:!1},{key:"Empresa",sortable:!1},{key:"Documento",sortable:!1},{key:"Teléfono",sortable:!1},{key:"Fecha Archivación",sortable:!1},{key:"Fecha Creación",sortable:!1},{key:"Acciones",width:80,sortable:!1}],M=i({status:99});re(()=>{I(M.value)});const I=async m=>{U.value=!0;const s=await _e(m);b.value=s.map(a=>{var N;return{...a,"Nombres Completos":a.fullname,Empresa:(N=a.company)==null?void 0:N.ruc,Documento:a.document,Teléfono:a.cellphone,"Fecha Archivación":a.archived_at&&Q(a.archived_at,"dd/MM/yyyy hh:mm aa"),"Fecha Creación":a.created_at&&Q(a.created_at,"dd/MM/yyyy hh:mm aa"),Acciones:!0,activeTab:0}}),U.value=!1},Z=m=>{V.value=!!m,h.value=m},j=m=>{A.value=!!m,h.value=m},L=()=>{T.value=!1,V.value=!1,I(M.value)},D=async()=>{E.value=!0,await ye(h.value),P({message:"Cliente eliminado correctamente",color:"success",duration:1e3}),setTimeout(()=>{E.value=!1,j(null),I(M.value)})},ee=()=>x.value&&x.value!==0?Math.ceil(b.value.length/x.value):b.value.length,S=i(!1),le=()=>{S.value=!0,setTimeout(()=>{S.value=!1},2e3),console.log("download")},te=i(!1),k=i(!1),O=m=>{k.value=!!m,h.value=m},se=async()=>{await ge(h.value),b.value=b.value.filter(m=>m.id!==h.value),h.value=null,k.value=!1,P({message:"Cliente actualizado correctamente",color:"success",duration:1e3})};return(m,s)=>{const a=f("VaButton"),N=f("VaInput"),C=f("VaIcon"),oe=f("VaTab"),ae=f("VaTabs"),ne=f("VaPagination"),ie=f("VaDataTable");f("VaChip"),f("VaAlert");const g=f("VaModal");return c(),u("div",Ce,[e("div",Ve,[e("h1",xe,o($(B)("contacts.allArchivedContacts"))+" ("+o(b.value.length)+")",1),e("div",ke,[t(a,{icon:"exit_to_app",color:"info",loading:S.value,href:$(me)+"/contacts/archived/xls",onClick:le},{default:n(()=>[Ne]),_:1},8,["loading","href"])])]),e("div",Te,[e("div",ze,[e("div",null,[t(N,{modelValue:F.value,"onUpdate:modelValue":s[0]||(s[0]=l=>F.value=l),label:$(B)("contacts.search"),placeholder:"Escribe lo que buscas",clearable:"",background:"#fff"},null,8,["modelValue","label"])])]),e("div",Ae,[t(ie,{items:b.value,columns:Y,class:"text-xs",hoverable:"","selected-color":"#eee",filter:F.value,"per-page":x.value,"current-page":w.value,loading:U.value,"no-data-html":"...",onFiltered:s[2]||(s[2]=l=>X.value=l.items.length)},{"cell(Acciones)":n(({row:l,isExpanded:y})=>[e("div",Ee,[t(a,{icon:"delete",color:"danger",round:"",onClick:_=>{var v;return j((v=l==null?void 0:l.rowData)==null?void 0:v.id)}},null,8,["onClick"]),t(a,{icon:"unarchive",color:"success",round:"",onClick:_=>{var v;return O((v=l==null?void 0:l.rowData)==null?void 0:v.id)}},null,8,["onClick"]),t(a,{icon:"description",color:"#158de3",round:"",onClick:_=>{var v;return Z((v=l==null?void 0:l.rowData)==null?void 0:v.id)}},null,8,["onClick"]),t(a,{icon:y?"va-arrow-up":"va-arrow-down",preset:"primary",onClick:_=>l.toggleRowDetails()},null,8,["icon","onClick"])])]),"cell(Empresa)":n(({row:l})=>{var y,_;return[e("span",Ue,o((_=(y=l.rowData)==null?void 0:y.company)==null?void 0:_.ruc),1)]}),expandableRow:n(({rowData:l})=>{var y,_,v,q,H,W,G;return[e("div",we,[e("div",Fe,[e("div",Me,[e("span",Ie,[e("span",je,o(l["Nombres Completos"]),1)])]),e("div",Se,[l.Documento?(c(),u("div",$e,[Pe,d(),Re,e("span",null,[d(o(l.Documento)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):r("v-if",!0),l.ruc?(c(),u("div",Be,[Le,d(),Oe,e("span",null,[d(o(l.ruc)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):r("v-if",!0),l.cellphone?(c(),u("div",qe,[He,d(),We,e("span",null,[d(o(l.cellphone)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):r("v-if",!0),l.whatsapp?(c(),u("div",Ge,[Je,d(),Ke,e("span",null,[d(o(l.whatsapp)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):r("v-if",!0),l.email?(c(),u("div",Qe,[Xe,d(),Ye,e("span",null,[d(o(l.email)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):r("v-if",!0)]),e("div",Ze,[t(ae,{modelValue:l.activeTab,"onUpdate:modelValue":p=>l.activeTab=p},{tabs:n(()=>[r(` <VaTab v-for="tab in ['Empresa', 'Cotizaciones', 'Ordenes de Trabajo']" :key="tab">
                        {{ tab }}
                      </VaTab> `),(c(),u(J,null,K(["Empresa"],p=>t(oe,{key:p},{default:n(()=>[d(o(p),1)]),_:2},1024)),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.activeTab===1?(c(),u("div",De,[(y=l.quotations)!=null&&y.length?r("v-if",!0):(c(),u("p",el," El cliente no tiene cotizaciones ")),(_=l.quotations)!=null&&_.length?(c(),u("div",ll,[e("table",tl,[sl,e("tbody",null,[(c(!0),u(J,null,K(l.quotations,p=>(c(),u("tr",{key:p.id},[e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1)]))),128))])])])):r("v-if",!0)])):r("v-if",!0),l.activeTab===2?(c(),u("div",ol,[...il])):r("v-if",!0),l.activeTab===0?(c(),u("div",cl,[l.company?r("v-if",!0):(c(),u("p",ul," El cliente no está asociado a empresa ")),l.company?(c(),u("div",dl,[e("table",rl,[ml,e("tbody",null,[e("tr",null,[e("td",null,o((v=l.company)==null?void 0:v.socialreason),1),e("td",null,o((q=l.company)==null?void 0:q.ruc),1),e("td",null,o((H=l.company)==null?void 0:H.phone),1),e("td",null,o((W=l.company)==null?void 0:W.whatsapp),1),e("td",null,o((G=l.company)==null?void 0:G.created_at),1)])])])])):r("v-if",!0)])):r("v-if",!0)])])])]}),bodyAppend:n(()=>[e("tr",null,[e("td",pl,[e("div",vl,[t(ne,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=l=>w.value=l),size:"small",class:"text-xs mb-3 justify-center sm:justify-start","buttons-preset":"primary","active-page-color":"textPrimary",pages:ee()},null,8,["modelValue","pages"])])])])]),_:1},8,["items","filter","per-page","current-page","loading","no-data-html"]),r("v-if",!0)])]),t(g,{modelValue:z.value,"onUpdate:modelValue":s[4]||(s[4]=l=>z.value=l),"hide-default-actions":"",size:"340px","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",null,[t(he,{onClose:s[3]||(s[3]=l=>z.value=!1)})])]),_:1},8,["modelValue"]),t(g,{modelValue:T.value,"onUpdate:modelValue":s[5]||(s[5]=l=>T.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",fl,[t(ve,{onClose:L})])]),_:1},8,["modelValue"]),t(g,{modelValue:k.value,"onUpdate:modelValue":s[7]||(s[7]=l=>k.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:n(()=>[t(a,{size:"small",preset:"secondary",class:"mr-1",onClick:s[6]||(s[6]=l=>O(null))},{default:n(()=>[d(" Cancelar")]),_:1}),t(a,{size:"small",loading:te.value,onClick:se},{default:n(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:n(()=>[_l]),_:1},8,["modelValue"]),t(g,{modelValue:V.value,"onUpdate:modelValue":s[8]||(s[8]=l=>V.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",hl,[t(be,{id:h.value,onClose:L},null,8,["id"])])]),_:1},8,["modelValue"]),t(g,{modelValue:R.value,"onUpdate:modelValue":s[9]||(s[9]=l=>R.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",bl,[t(fe)])]),_:1},8,["modelValue"]),t(g,{modelValue:A.value,"onUpdate:modelValue":s[11]||(s[11]=l=>A.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:n(()=>[t(a,{size:"small",preset:"secondary",class:"mr-1",onClick:s[10]||(s[10]=l=>j(null))},{default:n(()=>[d(" Cancelar")]),_:1}),t(a,{size:"small",loading:E.value,onClick:D},{default:n(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:n(()=>[yl]),_:1},8,["modelValue"])])}}}),Ml=pe(gl,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/customers/pages/ListArchives.vue"]]);export{Ml as default};
//# sourceMappingURL=ListArchives-5703d753.js.map
