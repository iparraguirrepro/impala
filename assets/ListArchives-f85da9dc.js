import{d as ie,p as ue,q as c,G as de,v as re,r as v,o as i,c as u,a as e,t as o,u as j,b as t,w as a,x as m,H as me,f as d,F as J,k as K,_ as pe}from"./index-eb5b4f51.js";import{N as _e,a as ve}from"./NewOportunity-b9003bc7.js";import{g as he,N as fe,E as be,d as ye,a as ge}from"./EditCustomer-95fd219c.js";import{f as Q}from"./format-8e15a9c0.js";import"./utils-17deefef.js";import"./helpers-a12fb3e4.js";import"./Services-781d534c.js";import"./Vehicles-f3e604e9.js";import"./InputAddress-c9acd681.js";import"./lodash-14e13292.js";import"./oportunities-store-e0c593ed.js";import"./Orders-2187cd97.js";import"./orders-store-c769c10e.js";const Ce={class:"py-4"},Ve={class:"flex justify-between align-center justify-center"},xe={class:"h5 m-0"},ke={class:"flex gap-2"},Ne=e("span",{class:"px-1"},"Descargar",-1),Te={class:"mt-5"},ze={class:"columns-1 sm:columns-5 mb-7"},Ae={class:"w-full bg-white p-2"},Ee={class:"flex gap-1"},Ue={class:"font-bold text-primary"},we={class:"flex px-2 py-3 gap-2 bg-blue-50 mx-10 rounded my-2"},Fe={class:"w-full pl-2"},Me={class:"gap-1"},Ie={class:"text-base font-medium"},Se={class:"uppercase font-black"},$e={class:"w-full columns-6 mt-2 mb-1"},je={key:0,class:"w-full items-center text-xs"},Pe=e("b",null,"DNI:",-1),Re=e("br",null,null,-1),qe={key:1,class:"w-full items-center text-xs"},Be=e("b",null,"RUC:",-1),Le=e("br",null,null,-1),Oe={key:2,class:"w-full items-center text-xs"},He=e("b",null,"Teléfono:",-1),We=e("br",null,null,-1),Ge={key:3,class:"w-full items-center text-xs"},Je=e("b",null,"WhatsApp:",-1),Ke=e("br",null,null,-1),Qe={key:4,class:"w-full items-center text-xs"},Xe=e("b",null,"Correo Electrónico:",-1),Ye=e("br",null,null,-1),Ze={class:"flex flex-col bg-white mt-6 py-2 pb-5 px-4"},De={key:0,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},el={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},ll={key:1,class:"va-table-responsive w-full"},tl={class:"va-table w-full"},sl=e("thead",null,[e("tr",null,[e("th",null,"n° Cotización"),e("th",null,"Comercial"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Creación"),e("th",null,"Estado")])],-1),ol={key:1,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},nl=e("p",{class:"bg-red-300 font-bold p-2"},"El cliente no tiene ordenes de trabajo",-1),al=e("div",{class:"va-table-responsive w-full"},[e("table",{class:"va-table w-full"},[e("thead",null,[e("tr",null,[e("th",null,"n° Orden"),e("th",null,"Responsable"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Inicio"),e("th",null,"Fecha Fin")])]),e("tbody")])],-1),cl=[nl,al],il={key:2,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},ul={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},dl={key:1,class:"va-table-responsive w-full"},rl={class:"va-table w-full"},ml=e("thead",null,[e("tr",null,[e("th",null,"Razón Social"),e("th",null,"RUC"),e("th",null,"Teléfono"),e("th",null,"WhatsApp"),e("th",null,"Fecha Creación")])],-1),pl={colspan:"8"},_l={class:"flex justify-end mt-4"},vl={class:"mt-4"},hl=e("p",{class:"text-sm"},"¿Deseas activar este cliente?",-1),fl={class:"mt-4"},bl={class:"mt-4"},yl=e("p",{class:"text-sm"},"¿Deseas eliminar este cliente?",-1),gl=ie({__name:"ListArchives",setup(Cl){const{notify:P}=ue(),b=c([]),T=c(!1),z=c(!1),V=c(!1),A=c(!1),f=c(null),E=c(!1),U=c(!1),R=c(!1),X=c(0),x=c(12),w=c(1),F=c(""),{t:q}=de(),Y=[{key:"id",sortable:!1},{key:"Nombres Completos",sortable:!1},{key:"Empresa",sortable:!1},{key:"Documento",sortable:!1},{key:"Teléfono",sortable:!1},{key:"Fecha Archivación",sortable:!1},{key:"Fecha Creación",sortable:!1},{key:"Acciones",width:80,sortable:!1}],M=c({status:99});re(()=>{I(M.value)});const I=async r=>{U.value=!0;const s=await he(r);b.value=s.map(n=>{var N;return{...n,"Nombres Completos":n.fullname,Empresa:(N=n.company)==null?void 0:N.ruc,Documento:n.document,Teléfono:n.cellphone,"Fecha Archivación":n.archived_at&&Q(n.archived_at,"dd/MM/yyyy hh:mm aa"),"Fecha Creación":n.created_at&&Q(n.created_at,"dd/MM/yyyy hh:mm aa"),Acciones:!0,activeTab:0}}),U.value=!1},Z=r=>{V.value=!!r,f.value=r},S=r=>{A.value=!!r,f.value=r},B=()=>{T.value=!1,V.value=!1,I(M.value)},D=async()=>{E.value=!0,await ye(f.value),P({message:"Cliente eliminado correctamente",color:"success",duration:1e3}),setTimeout(()=>{E.value=!1,S(null),I(M.value)})},ee=()=>x.value&&x.value!==0?Math.ceil(b.value.length/x.value):b.value.length,$=c(!1),le=()=>{$.value=!0,setTimeout(()=>{$.value=!1},2e3),console.log("download")},te=c(!1),k=c(!1),L=r=>{k.value=!!r,f.value=r},se=async()=>{await ge(f.value),b.value=b.value.filter(r=>r.id!==f.value),f.value=null,k.value=!1,P({message:"Cliente actualizado correctamente",color:"success",duration:1e3})};return(r,s)=>{const n=v("VaButton"),N=v("VaInput"),C=v("VaIcon"),oe=v("VaTab"),ne=v("VaTabs"),ae=v("VaPagination"),ce=v("VaDataTable");v("VaChip"),v("VaAlert");const g=v("VaModal");return i(),u("div",Ce,[e("div",Ve,[e("h1",xe,o(j(q)("contacts.allArchivedContacts"))+" ("+o(b.value.length)+")",1),e("div",ke,[t(n,{icon:"exit_to_app",color:"info",loading:$.value,href:j(me)+"/contacts/archived/xls",onClick:le},{default:a(()=>[Ne]),_:1},8,["loading","href"])])]),e("div",Te,[e("div",ze,[e("div",null,[t(N,{modelValue:F.value,"onUpdate:modelValue":s[0]||(s[0]=l=>F.value=l),label:j(q)("contacts.search"),placeholder:"Escribe lo que buscas",clearable:"",background:"#fff"},null,8,["modelValue","label"])])]),e("div",Ae,[t(ce,{items:b.value,columns:Y,class:"text-xs",hoverable:"","selected-color":"#eee",filter:F.value,"per-page":x.value,"current-page":w.value,loading:U.value,"no-data-html":"...",onFiltered:s[2]||(s[2]=l=>X.value=l.items.length)},{"cell(Acciones)":a(({row:l,isExpanded:y})=>[e("div",Ee,[t(n,{icon:"delete",color:"danger",round:"",onClick:h=>{var _;return S((_=l==null?void 0:l.rowData)==null?void 0:_.id)}},null,8,["onClick"]),t(n,{icon:"unarchive",color:"success",round:"",onClick:h=>{var _;return L((_=l==null?void 0:l.rowData)==null?void 0:_.id)}},null,8,["onClick"]),t(n,{icon:"description",color:"#158de3",round:"",onClick:h=>{var _;return Z((_=l==null?void 0:l.rowData)==null?void 0:_.id)}},null,8,["onClick"]),t(n,{icon:y?"va-arrow-up":"va-arrow-down",preset:"primary",onClick:h=>l.toggleRowDetails()},null,8,["icon","onClick"])])]),"cell(Empresa)":a(({row:l})=>{var y,h;return[e("span",Ue,o((h=(y=l.rowData)==null?void 0:y.company)==null?void 0:h.ruc),1)]}),expandableRow:a(({rowData:l})=>{var y,h,_,O,H,W,G;return[e("div",we,[e("div",Fe,[e("div",Me,[e("span",Ie,[e("span",Se,o(l["Nombres Completos"]),1)])]),e("div",$e,[l.Documento?(i(),u("div",je,[Pe,d(),Re,e("span",null,[d(o(l.Documento)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.ruc?(i(),u("div",qe,[Be,d(),Le,e("span",null,[d(o(l.ruc)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.cellphone?(i(),u("div",Oe,[He,d(),We,e("span",null,[d(o(l.cellphone)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.whatsapp?(i(),u("div",Ge,[Je,d(),Ke,e("span",null,[d(o(l.whatsapp)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.email?(i(),u("div",Qe,[Xe,d(),Ye,e("span",null,[d(o(l.email)+" ",1),t(C,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0)]),e("div",Ze,[t(ne,{modelValue:l.activeTab,"onUpdate:modelValue":p=>l.activeTab=p},{tabs:a(()=>[(i(),u(J,null,K(["Empresa"],p=>t(oe,{key:p},{default:a(()=>[d(o(p),1)]),_:2},1024)),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.activeTab===1?(i(),u("div",De,[(y=l.quotations)!=null&&y.length?m("",!0):(i(),u("p",el," El cliente no tiene cotizaciones ")),(h=l.quotations)!=null&&h.length?(i(),u("div",ll,[e("table",tl,[sl,e("tbody",null,[(i(!0),u(J,null,K(l.quotations,p=>(i(),u("tr",{key:p.id},[e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1)]))),128))])])])):m("",!0)])):m("",!0),l.activeTab===2?(i(),u("div",ol,[...cl])):m("",!0),l.activeTab===0?(i(),u("div",il,[l.company?m("",!0):(i(),u("p",ul," El cliente no está asociado a empresa ")),l.company?(i(),u("div",dl,[e("table",rl,[ml,e("tbody",null,[e("tr",null,[e("td",null,o((_=l.company)==null?void 0:_.socialreason),1),e("td",null,o((O=l.company)==null?void 0:O.ruc),1),e("td",null,o((H=l.company)==null?void 0:H.phone),1),e("td",null,o((W=l.company)==null?void 0:W.whatsapp),1),e("td",null,o((G=l.company)==null?void 0:G.created_at),1)])])])])):m("",!0)])):m("",!0)])])])]}),bodyAppend:a(()=>[e("tr",null,[e("td",pl,[e("div",_l,[t(ae,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=l=>w.value=l),size:"small",class:"text-xs mb-3 justify-center sm:justify-start","buttons-preset":"primary","active-page-color":"textPrimary",pages:ee()},null,8,["modelValue","pages"])])])])]),_:1},8,["items","filter","per-page","current-page","loading","no-data-html"]),m("",!0)])]),t(g,{modelValue:z.value,"onUpdate:modelValue":s[4]||(s[4]=l=>z.value=l),"hide-default-actions":"",size:"340px","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",null,[t(fe,{onClose:s[3]||(s[3]=l=>z.value=!1)})])]),_:1},8,["modelValue"]),t(g,{modelValue:T.value,"onUpdate:modelValue":s[5]||(s[5]=l=>T.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",vl,[t(_e,{onClose:B})])]),_:1},8,["modelValue"]),t(g,{modelValue:k.value,"onUpdate:modelValue":s[7]||(s[7]=l=>k.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:a(()=>[t(n,{size:"small",preset:"secondary",class:"mr-1",onClick:s[6]||(s[6]=l=>L(null))},{default:a(()=>[d(" Cancelar")]),_:1}),t(n,{size:"small",loading:te.value,onClick:se},{default:a(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:a(()=>[hl]),_:1},8,["modelValue"]),t(g,{modelValue:V.value,"onUpdate:modelValue":s[8]||(s[8]=l=>V.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",fl,[t(be,{id:f.value,onClose:B},null,8,["id"])])]),_:1},8,["modelValue"]),t(g,{modelValue:R.value,"onUpdate:modelValue":s[9]||(s[9]=l=>R.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:a(()=>[e("div",bl,[t(ve)])]),_:1},8,["modelValue"]),t(g,{modelValue:A.value,"onUpdate:modelValue":s[11]||(s[11]=l=>A.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:a(()=>[t(n,{size:"small",preset:"secondary",class:"mr-1",onClick:s[10]||(s[10]=l=>S(null))},{default:a(()=>[d(" Cancelar")]),_:1}),t(n,{size:"small",loading:E.value,onClick:D},{default:a(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:a(()=>[yl]),_:1},8,["modelValue"])])}}}),Sl=pe(gl,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/customers/pages/ListArchives.vue"]]);export{Sl as default};
//# sourceMappingURL=ListArchives-f85da9dc.js.map
