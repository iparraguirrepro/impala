import{d as le,p as se,q as u,G as te,v as oe,r as _,o as a,c as i,a as e,t as n,b as t,w as d,u as P,x as p,H as ne,f as m,F as R,k as S,_ as ae}from"./index-eb5b4f51.js";import{b as ie,N as $,E as ce,c as ue}from"./EditCustomer-95fd219c.js";import{f as de}from"./format-8e15a9c0.js";import"./utils-17deefef.js";import"./helpers-a12fb3e4.js";const re={class:"py-4"},pe={class:"flex flex-wrap sm:flex-nowrap justify-between align-center justify-center"},me={class:"h5 m-0 mb-3 sm:mb-0"},_e={class:"flex flex-wrap sm:flex-nowrap gap-2"},fe=e("span",{class:"px-1"},"Descargar",-1),ve={class:"px-1"},he={class:"mt-5"},be={class:"columns-1 sm:columns-5 mb-7"},ge={class:"w-full bg-white p-2"},ye={class:"flex gap-1"},Ce={class:"flex px-2 py-3 gap-2 bg-blue-50 mx-10 rounded my-2"},xe={class:"w-full pl-2"},Ve={class:"gap-1"},ke={class:"text-base font-medium"},Te={class:"uppercase font-black"},we={class:"w-full columns-6 mt-2 mb-1"},ze={key:0,class:"w-full items-center text-xs"},Ne=e("b",null,"RUC:",-1),Ue=e("br",null,null,-1),Ee={key:1,class:"w-full items-center text-xs"},Ae=e("b",null,"Teléfono:",-1),Ie=e("br",null,null,-1),Le={key:2,class:"w-full items-center text-xs"},Me=e("b",null,"WhatsApp:",-1),Re=e("br",null,null,-1),Se={key:3,class:"w-full items-center text-xs"},Be=e("b",null,"Dirección:",-1),Fe=e("br",null,null,-1),je={class:"flex flex-col bg-white mt-6 py-2 pb-5 px-4"},qe={key:0,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},Pe={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},$e={key:1,class:"va-table-responsive w-full"},We={class:"va-table w-full"},He=e("thead",null,[e("tr",null,[e("th",null,"n° Cotización"),e("th",null,"Comercial"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Creación"),e("th",null,"Estado")])],-1),Ge={key:1,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},Ke={key:0,class:"bg-red-300 font-bold p-2"},Oe={key:1,class:"va-table-responsive w-full"},Je={class:"va-table w-full"},Qe=e("thead",null,[e("tr",null,[e("th",null,"Nombres Completos"),e("th",null,"Documento"),e("th",null,"Teléfono"),e("th",null,"Correo")])],-1),Xe=["onClick"],Ye={colspan:"7"},Ze={class:"flex justify-end mt-4"},De={class:"mt-4"},el=e("p",{class:"text-sm"},"¿Deseas eliminar esta empresa?",-1),ll=le({__name:"ListCompanies",setup(sl){const{notify:B}=se(),f=u([]),b=u(!1),v=u(null),g=u(!1),T=u(null),w=u(null),z=u(!1),N=u(!1),y=u(!1),W=u(0),C=u(12),U=u(1),E=u(""),{t:H}=te(),G=[{key:"id",sortable:!1},{key:"Razón Social",sortable:!1},{key:"RUC",sortable:!1},{key:"Teléfono",sortable:!1},{key:"Whatsapp",sortable:!1},{key:"Fecha Creación",sortable:!1},{key:"Acciones",width:80,sortable:!1}],A=u({status:1});oe(()=>{I(A.value)});const I=async r=>{N.value=!0;const s=await ie(r);f.value=s.map(c=>({...c,"Razón Social":c.socialreason,RUC:c.ruc,Teléfono:c.phone,Whatsapp:c.whatsapp,"Fecha Creación":c.created_at&&de(c.created_at,"dd/MM/yyyy hh:mm aa"),Acciones:!0,activeTab:0})),N.value=!1},K=r=>{v.value=r},L=r=>{var s;r?(s=r.contacts)!=null&&s.length?B({message:"No puedes eliminar una empresa con contactos activos.",color:"error",duration:3e3}):(g.value=!!(r!=null&&r.id),T.value=r==null?void 0:r.id):(g.value=!1,T.value=null)},F=()=>{b.value=!1,v.value=!1,I(A.value)},O=async()=>{z.value=!0,await ue(T.value),B({message:"Empresa eliminada correctamente",color:"success",duration:1e3}),setTimeout(()=>{z.value=!1,L(null),I(A.value)})},J=()=>C.value&&C.value!==0?Math.ceil(f.value.length/C.value):f.value.length,M=u(!1),Q=()=>{M.value=!0,setTimeout(()=>{M.value=!1},2e3),console.log("download")};return(r,s)=>{const c=_("VaButton"),X=_("VaInput"),x=_("VaIcon"),Y=_("VaTab"),Z=_("VaTabs"),D=_("VaPagination"),ee=_("VaDataTable");_("VaChip"),_("VaAlert");const V=_("VaModal");return a(),i("div",re,[e("div",pe,[e("h1",me,"Listado de Empresas ("+n(f.value.length)+")",1),e("div",_e,[t(c,{icon:"exit_to_app",color:"info",loading:M.value,href:P(ne)+"/companies/xls",onClick:Q},{default:d(()=>[fe]),_:1},8,["loading","href"]),t(c,{icon:"domain_add",color:"primary",onClick:s[0]||(s[0]=l=>b.value=!0)},{default:d(()=>[e("span",ve,n(P(H)("contacts.newCompany")),1)]),_:1})])]),e("div",he,[e("div",be,[e("div",null,[t(X,{modelValue:E.value,"onUpdate:modelValue":s[1]||(s[1]=l=>E.value=l),label:"Buscar empresa",placeholder:"Escribe lo que buscas",clearable:"",background:"#fff"},null,8,["modelValue"])])]),e("div",ge,[t(ee,{items:f.value,columns:G,class:"text-xs",hoverable:"","selected-color":"#eee",filter:E.value,"per-page":C.value,"current-page":U.value,loading:N.value,"no-data-html":"...",onFiltered:s[3]||(s[3]=l=>W.value=l.items.length)},{"cell(Acciones)":d(({row:l,isExpanded:k})=>[e("div",ye,[t(c,{icon:"delete",color:"danger",disabled:l.itemKey.contacts.length,round:"",onClick:h=>L(l==null?void 0:l.rowData)},null,8,["disabled","onClick"]),t(c,{icon:"edit",color:"#158de3",round:"",onClick:h=>K(l==null?void 0:l.rowData)},null,8,["onClick"]),t(c,{icon:k?"va-arrow-up":"va-arrow-down",preset:"primary",onClick:h=>l.toggleRowDetails()},null,8,["icon","onClick"])])]),expandableRow:d(({rowData:l})=>{var k,h,j,q;return[e("div",Ce,[e("div",xe,[e("div",Ve,[e("span",ke,[e("span",Te,n(l.socialreason),1)])]),e("div",we,[l.ruc?(a(),i("div",ze,[Ne,m(),Ue,e("span",null,[m(n(l.ruc)+" ",1),t(x,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):p("",!0),l.phone?(a(),i("div",Ee,[Ae,m(),Ie,e("span",null,[m(n(l.phone)+" ",1),t(x,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):p("",!0),l.whatsapp?(a(),i("div",Le,[Me,m(),Re,e("span",null,[m(n(l.whatsapp)+" ",1),t(x,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):p("",!0),l.address?(a(),i("div",Se,[Be,m(),Fe,e("span",null,[m(n(l.address)+" ",1),t(x,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):p("",!0)]),e("div",je,[t(Z,{modelValue:l.activeTab,"onUpdate:modelValue":o=>l.activeTab=o},{tabs:d(()=>[(a(),i(R,null,S(["Contactos","Cotizaciones"],o=>t(Y,{key:o},{default:d(()=>[m(n(o),1)]),_:2},1024)),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.activeTab===1?(a(),i("div",qe,[(k=l.quotations)!=null&&k.length?p("",!0):(a(),i("p",Pe," El cliente no tiene cotizaciones ")),(h=l.quotations)!=null&&h.length?(a(),i("div",$e,[e("table",We,[He,e("tbody",null,[(a(!0),i(R,null,S(l.quotations,o=>(a(),i("tr",{key:o.id},[e("td",null,n(o.fullName),1),e("td",null,n(o.fullName),1),e("td",null,n(o.fullName),1),e("td",null,n(o.fullName),1),e("td",null,n(o.fullName),1),e("td",null,n(o.fullName),1)]))),128))])])])):p("",!0)])):p("",!0),l.activeTab===0?(a(),i("div",Ge,[(j=l.contacts)!=null&&j.length?p("",!0):(a(),i("p",Ke," La empresa no tiene contactos registrados ")),(q=l.contacts)!=null&&q.length?(a(),i("div",Oe,[e("table",Je,[Qe,e("tbody",null,[(a(!0),i(R,null,S(l.contacts,o=>(a(),i("tr",{key:o.id},[e("td",null,[e("span",{class:"text-primary font-bold uppercase cursor-pointer hover:underline",onClick:()=>{w.value=o.id,y.value=!0}},n(o.fullname),9,Xe)]),e("td",null,n(o.document),1),e("td",null,n(o.cellphone),1),e("td",null,n(o.email),1)]))),128))])])])):p("",!0)])):p("",!0)])])])]}),bodyAppend:d(()=>[e("tr",null,[e("td",Ye,[e("div",Ze,[t(D,{modelValue:U.value,"onUpdate:modelValue":s[2]||(s[2]=l=>U.value=l),size:"small",class:"text-xs mb-3 justify-center sm:justify-start","buttons-preset":"primary","active-page-color":"textPrimary",pages:J()},null,8,["modelValue","pages"])])])])]),_:1},8,["items","filter","per-page","current-page","loading","no-data-html"]),p("",!0)])]),t(V,{modelValue:b.value,"onUpdate:modelValue":s[4]||(s[4]=l=>b.value=l),"hide-default-actions":"",size:"340px","close-button":"",blur:"","no-dismiss":""},{default:d(()=>[e("div",null,[t($,{onClose:F})])]),_:1},8,["modelValue"]),t(V,{modelValue:v.value,"onUpdate:modelValue":s[5]||(s[5]=l=>v.value=l),"hide-default-actions":"",size:"340px","close-button":"",blur:"","no-dismiss":""},{default:d(()=>[e("div",null,[t($,{data:v.value,onClose:F},null,8,["data"])])]),_:1},8,["modelValue"]),t(V,{modelValue:y.value,"onUpdate:modelValue":s[7]||(s[7]=l=>y.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:d(()=>[e("div",De,[t(ce,{id:w.value,onClose:s[6]||(s[6]=()=>{w.value=null,y.value=!1})},null,8,["id"])])]),_:1},8,["modelValue"]),t(V,{modelValue:g.value,"onUpdate:modelValue":s[9]||(s[9]=l=>g.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:d(()=>[t(c,{size:"small",preset:"secondary",class:"mr-1",onClick:s[8]||(s[8]=l=>L(null))},{default:d(()=>[m(" Cancelar")]),_:1}),t(c,{size:"small",loading:z.value,onClick:O},{default:d(()=>[m(" Continuar")]),_:1},8,["loading"])]),default:d(()=>[el]),_:1},8,["modelValue"])])}}}),cl=ae(ll,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/customers/pages/ListCompanies.vue"]]);export{cl as default};
//# sourceMappingURL=ListCompanies-54501894.js.map
