import{d as ae,p as ie,q as i,G as ce,v as ue,r as _,o as c,c as u,a as e,t as o,u as x,b as t,w as n,x as m,H as de,f as d,F as G,k as J,_ as re}from"./index-eb5b4f51.js";import{N as me,a as pe}from"./NewOportunity-b9003bc7.js";import{g as _e,N as ve,E as fe,d as he,a as be}from"./EditCustomer-95fd219c.js";import{f as ye}from"./format-8e15a9c0.js";import"./utils-17deefef.js";import"./helpers-a12fb3e4.js";import"./Services-781d534c.js";import"./Vehicles-f3e604e9.js";import"./InputAddress-c9acd681.js";import"./lodash-14e13292.js";import"./oportunities-store-e0c593ed.js";import"./Orders-2187cd97.js";import"./orders-store-c769c10e.js";const Ce={class:"py-4"},ge={class:"flex flex-wrap sm:flex-nowrap justify-between align-center justify-center"},xe={class:"h5 m-0 mb-3 sm:mb-0"},Ve={class:"flex flex-wrap sm:flex-nowrap gap-2"},ke=e("span",{class:"px-1"},"Descargar",-1),we={class:"px-1"},Ne={class:"px-1"},Te={class:"mt-5"},ze={class:"columns-1 sm:columns-5 mb-7"},Ee={class:"w-full bg-white p-2"},Ue={class:"flex gap-1"},Ae={class:"font-bold text-primary"},Fe={colspan:"8"},Ie={class:"flex justify-end mt-4"},$e={class:"flex px-2 py-3 gap-2 bg-blue-50 mx-10 rounded my-2"},je={class:"w-full pl-2"},Me={class:"gap-1"},Se={class:"text-base font-medium"},Pe={class:"uppercase font-black"},Re={class:"w-full columns-6 mt-2 mb-1"},qe={key:0,class:"w-full items-center text-xs"},Be=e("b",null,"DNI:",-1),Le=e("br",null,null,-1),Oe={key:1,class:"w-full items-center text-xs"},He=e("b",null,"RUC:",-1),We=e("br",null,null,-1),Ge={key:2,class:"w-full items-center text-xs"},Je=e("b",null,"Teléfono:",-1),Ke=e("br",null,null,-1),Qe={key:3,class:"w-full items-center text-xs"},Xe=e("b",null,"WhatsApp:",-1),Ye=e("br",null,null,-1),Ze={key:4,class:"w-full items-center text-xs"},De=e("b",null,"Correo Electrónico:",-1),el=e("br",null,null,-1),ll={class:"flex flex-col bg-white mt-6 py-2 pb-5 px-4"},sl={key:0,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},tl={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},ol={key:1,class:"va-table-responsive w-full"},nl={class:"va-table w-full"},al=e("thead",null,[e("tr",null,[e("th",null,"n° Cotización"),e("th",null,"Comercial"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Creación"),e("th",null,"Estado")])],-1),il={key:1,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},cl=e("p",{class:"bg-red-300 font-bold p-2"},"El cliente no tiene ordenes de trabajo",-1),ul=e("div",{class:"va-table-responsive w-full"},[e("table",{class:"va-table w-full"},[e("thead",null,[e("tr",null,[e("th",null,"n° Orden"),e("th",null,"Responsable"),e("th",null,"Servicios"),e("th",null,"Vehiculos"),e("th",null,"Fecha Inicio"),e("th",null,"Fecha Fin")])]),e("tbody")])],-1),dl=[cl,ul],rl={key:2,class:"bg-gray-100 p-3 rounded mt-4 pb-5"},ml={key:0,class:"bg-red-300 font-bold p-2 -mb-1"},pl={key:1,class:"va-table-responsive w-full"},_l={class:"va-table w-full"},vl=e("thead",null,[e("tr",null,[e("th",null,"Razón Social"),e("th",null,"RUC"),e("th",null,"Teléfono"),e("th",null,"WhatsApp"),e("th",null,"Fecha Creación")])],-1),fl={class:"mt-4"},hl=e("p",{class:"text-sm"},"¿Deseas archivar este cliente?",-1),bl={class:"mt-4"},yl={class:"mt-4"},Cl=e("p",{class:"text-sm"},"¿Deseas eliminar este cliente?",-1),gl=ae({__name:"ListCustomers",setup(xl){const{notify:S}=ie(),b=i([]),V=i(!1),k=i(!1),w=i(!1),U=i(!1),v=i(null),A=i(!1),F=i(!1),P=i(!1),K=i(0),N=i(12),I=i(1),$=i(""),{t:T}=ce(),Q=[{key:"id",sortable:!1},{key:"Nombres Completos",sortable:!1},{key:"Empresa",sortable:!1},{key:"Documento",sortable:!1},{key:"Teléfono",sortable:!1},{key:"Correo",sortable:!1},{key:"Fecha Creación",sortable:!1},{key:"Acciones",width:80,sortable:!1}];ue(()=>{j()});const j=async r=>{F.value=!0;const s=await _e(r);b.value=s.map(a=>{var E;return{...a,"Nombres Completos":a.fullname,Empresa:(E=a.company)==null?void 0:E.ruc,Documento:a.document,Teléfono:a.cellphone,Correo:a.email,"Fecha Creación":ye(a.created_at,"dd/MM/yyyy hh:mm aa"),Acciones:!0,activeTab:0}}),F.value=!1},X=r=>{w.value=!!r,v.value=r},R=r=>{U.value=!!r,v.value=r},q=()=>{V.value=!1,w.value=!1,j()},Y=async()=>{A.value=!0,await he(v.value),S({message:"Cliente eliminado correctamente",color:"success",duration:1e3}),setTimeout(()=>{A.value=!1,R(null),j()})},Z=()=>N.value&&N.value!==0?Math.ceil(b.value.length/N.value):b.value.length,M=i(!1),D=()=>{M.value=!0,setTimeout(()=>{M.value=!1},2e3),console.log("download")},ee=i(!1),z=i(!1),B=r=>{z.value=!!r,v.value=r},le=async()=>{await be(v.value),b.value=b.value.filter(r=>r.id!==v.value),v.value=null,z.value=!1,S({message:"Cliente archivado correctamente",color:"success",duration:1e3})};return(r,s)=>{const a=_("VaButton"),E=_("VaInput"),se=_("VaPagination"),g=_("VaIcon"),te=_("VaTab"),oe=_("VaTabs"),ne=_("VaDataTable");_("VaChip"),_("VaAlert");const C=_("VaModal");return c(),u("div",Ce,[e("div",ge,[e("h1",xe,o(x(T)("contacts.allContacts"))+" ("+o(b.value.length)+")",1),e("div",Ve,[t(a,{icon:"exit_to_app",color:"info",loading:M.value,href:x(de)+"/contacts/xls",onClick:D},{default:n(()=>[ke]),_:1},8,["loading","href"]),t(a,{icon:"domain_add",color:"primary",onClick:s[0]||(s[0]=l=>k.value=!0)},{default:n(()=>[e("span",we,o(x(T)("contacts.newCompany")),1)]),_:1}),t(a,{icon:"person_add",color:"primary",onClick:s[1]||(s[1]=l=>V.value=!0)},{default:n(()=>[e("span",Ne,o(x(T)("contacts.newContact")),1)]),_:1})])]),e("div",Te,[e("div",ze,[e("div",null,[t(E,{modelValue:$.value,"onUpdate:modelValue":s[2]||(s[2]=l=>$.value=l),label:x(T)("contacts.search"),placeholder:"Escribe lo que buscas",class:"text-xxs",clearable:"",background:"#fff"},null,8,["modelValue","label"])])]),e("div",Ee,[t(ne,{items:b.value,columns:Q,class:"text-xs",hoverable:"","selected-color":"#eee",filter:$.value,"per-page":N.value,"current-page":I.value,loading:F.value,"no-data-html":"...",onFiltered:s[4]||(s[4]=l=>K.value=l.items.length)},{"cell(Acciones)":n(({row:l,isExpanded:y})=>[e("div",Ue,[t(a,{icon:"archive",color:"gray",round:"",onClick:f=>{var h;return B((h=l==null?void 0:l.rowData)==null?void 0:h.id)}},null,8,["onClick"]),t(a,{icon:"edit",color:"#158de3",round:"",onClick:f=>{var h;return X((h=l==null?void 0:l.rowData)==null?void 0:h.id)}},null,8,["onClick"]),t(a,{icon:y?"va-arrow-up":"va-arrow-down",preset:"primary",onClick:f=>l.toggleRowDetails()},null,8,["icon","onClick"])])]),"cell(Empresa)":n(({row:l})=>{var y,f;return[e("span",Ae,o((f=(y=l.rowData)==null?void 0:y.company)==null?void 0:f.ruc),1)]}),bodyAppend:n(()=>[e("tr",null,[e("td",Fe,[e("div",Ie,[t(se,{modelValue:I.value,"onUpdate:modelValue":s[3]||(s[3]=l=>I.value=l),size:"small",class:"text-xs mb-3 justify-center sm:justify-start","buttons-preset":"primary","active-page-color":"textPrimary",pages:Z()},null,8,["modelValue","pages"])])])])]),expandableRow:n(({rowData:l})=>{var y,f,h,L,O,H,W;return[e("div",$e,[e("div",je,[e("div",Me,[e("span",Se,[e("span",Pe,o(l["Nombres Completos"]),1)])]),e("div",Re,[l.Documento?(c(),u("div",qe,[Be,d(),Le,e("span",null,[d(o(l.Documento)+" ",1),t(g,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.ruc?(c(),u("div",Oe,[He,d(),We,e("span",null,[d(o(l.ruc)+" ",1),t(g,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.cellphone?(c(),u("div",Ge,[Je,d(),Ke,e("span",null,[d(o(l.cellphone)+" ",1),t(g,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.whatsapp?(c(),u("div",Qe,[Xe,d(),Ye,e("span",null,[d(o(l.whatsapp)+" ",1),t(g,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0),l.email?(c(),u("div",Ze,[De,d(),el,e("span",null,[d(o(l.email)+" ",1),t(g,{size:"10px",class:"cursor-pointer",name:"content_copy"})])])):m("",!0)]),e("div",ll,[t(oe,{modelValue:l.activeTab,"onUpdate:modelValue":p=>l.activeTab=p},{tabs:n(()=>[(c(),u(G,null,J(["Empresa","Cotizaciones","Ordenes de Trabajo"],p=>t(te,{key:p},{default:n(()=>[d(o(p),1)]),_:2},1024)),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),l.activeTab===1?(c(),u("div",sl,[(y=l.quotations)!=null&&y.length?m("",!0):(c(),u("p",tl," El cliente no tiene cotizaciones ")),(f=l.quotations)!=null&&f.length?(c(),u("div",ol,[e("table",nl,[al,e("tbody",null,[(c(!0),u(G,null,J(l.quotations,p=>(c(),u("tr",{key:p.id},[e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1),e("td",null,o(p.fullName),1)]))),128))])])])):m("",!0)])):m("",!0),l.activeTab===2?(c(),u("div",il,[...dl])):m("",!0),l.activeTab===0?(c(),u("div",rl,[l.company?m("",!0):(c(),u("p",ml," El cliente no está asociado a empresa ")),l.company?(c(),u("div",pl,[e("table",_l,[vl,e("tbody",null,[e("tr",null,[e("td",null,o((h=l.company)==null?void 0:h.socialreason),1),e("td",null,o((L=l.company)==null?void 0:L.ruc),1),e("td",null,o((O=l.company)==null?void 0:O.phone),1),e("td",null,o((H=l.company)==null?void 0:H.whatsapp),1),e("td",null,o((W=l.company)==null?void 0:W.created_at),1)])])])])):m("",!0)])):m("",!0)])])])]}),_:1},8,["items","filter","per-page","current-page","loading","no-data-html"]),m("",!0)])]),t(C,{modelValue:k.value,"onUpdate:modelValue":s[6]||(s[6]=l=>k.value=l),"hide-default-actions":"",size:"340px","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",null,[t(ve,{onClose:s[5]||(s[5]=l=>k.value=!1)})])]),_:1},8,["modelValue"]),t(C,{modelValue:V.value,"onUpdate:modelValue":s[7]||(s[7]=l=>V.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",fl,[t(me,{onClose:q})])]),_:1},8,["modelValue"]),t(C,{modelValue:z.value,"onUpdate:modelValue":s[9]||(s[9]=l=>z.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:n(()=>[t(a,{size:"small",preset:"secondary",class:"mr-1",onClick:s[8]||(s[8]=l=>B(null))},{default:n(()=>[d(" Cancelar")]),_:1}),t(a,{size:"small",loading:ee.value,onClick:le},{default:n(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:n(()=>[hl]),_:1},8,["modelValue"]),t(C,{modelValue:w.value,"onUpdate:modelValue":s[10]||(s[10]=l=>w.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",bl,[t(fe,{id:v.value,onClose:q},null,8,["id"])])]),_:1},8,["modelValue"]),t(C,{modelValue:P.value,"onUpdate:modelValue":s[11]||(s[11]=l=>P.value=l),"hide-default-actions":"",size:"medium","close-button":"",blur:"","no-dismiss":""},{default:n(()=>[e("div",yl,[t(pe)])]),_:1},8,["modelValue"]),t(C,{modelValue:U.value,"onUpdate:modelValue":s[13]||(s[13]=l=>U.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:n(()=>[t(a,{size:"small",preset:"secondary",class:"mr-1",onClick:s[12]||(s[12]=l=>R(null))},{default:n(()=>[d(" Cancelar")]),_:1}),t(a,{size:"small",loading:A.value,onClick:Y},{default:n(()=>[d(" Continuar")]),_:1},8,["loading"])]),default:n(()=>[Cl]),_:1},8,["modelValue"])])}}}),Ml=re(gl,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/customers/pages/ListCustomers.vue"]]);export{Ml as default};
//# sourceMappingURL=ListCustomers-89451544.js.map
