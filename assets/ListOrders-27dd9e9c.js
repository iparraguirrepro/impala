import{d as J,u as K,i as r,y as Q,k as W,r as i,o as m,c as w,a as t,t as d,m as X,h as Y,b as o,w as l,F as S,n as I,g as E,f as _,G as Z,_ as ee}from"./index-b45d4e71.js";import{g as te,d as ae}from"./Orders-7a56ac88.js";import{f as se}from"./format-8e15a9c0.js";const le={class:"py-4"},oe={class:"flex justify-between align-center justify-center"},ne={class:"h5 m-0"},re={class:"columns-5 mb-7 mt-5"},ce={class:"mt-5"},ie={class:"w-full bg-white p-2"},de={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},ue={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},pe={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},me={class:"text-primary font-bold hover:underline cursor-pointer"},fe={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},ve={class:"text-primary font-bold hover:underline cursor-pointer"},ge={class:"flex gap-1"},_e={colspan:"8"},xe={class:"flex justify-end mt-4"},be=t("p",{class:"text-sm"},"¿Deseas eliminar esta orden?",-1),he=J({__name:"ListOrders",setup(ye){const{notify:F}=K(),u=r([]),M=r(!1),f=r(null),z=r(null),x=r(!1),b=r(!1),{t:P}=Q(),T=[{key:"Nro Orden",sortable:!1},{key:"Cotización",sortable:!1},{key:"Cliente",sortable:!1},{key:"Contacto",sortable:!1},{key:"Servicio",sortable:!1},{key:"Creación",sortable:!1},{key:"Estado",width:"80"},{key:"actions",width:80}],h=r(""),y=r({start:null,end:null}),N=r(0),v=r(15),V=r(1),j=()=>v.value&&v.value!==0?Math.ceil(u.value.length/v.value):u.value.length,L=()=>{const{start:n,end:a}=y.value;if(n&&a){const s=new Date(n).setHours(0),k=new Date(a).setHours(24);C({start:new Date(s).getTime(),end:new Date(k).getTime()})}};W(()=>{C()});const C=async n=>{b.value=!0;const a=await te(n);u.value=a.map(s=>(console.log(s),{...s,"Nro Orden":`000${s.id}-24`,Cotización:`00${s.service.quotation}`,Contacto:s.customer.cellphone,Cliente:s.company?s.company.socialreason:s.customer.fullname,Servicio:[{label:s.service.services.service}],Creación:se(new Date(s.created_at),"dd/MM/yyyy hh:mm"),Estado:s.status===1?"En Progreso":"Finalizado",actions:null})),b.value=!1},U=n=>{M.value=!!n,z.value=n},D=n=>{f.value=n,z.value=n},$=async()=>{x.value=!0,F({message:"Orden eliminada correctamente",color:"success",duration:1e3}),await ae(f.value),x.value=!1,D(null),C()};return(n,a)=>{const s=i("VaInput"),k=i("VaDateInput"),B=i("VaChip"),O=i("VaBadge"),H=i("VaSelect"),g=i("VaButton"),q=i("VaPagination"),A=i("VaDataTable"),G=i("VaModal");return m(),w("div",le,[t("div",oe,[t("h1",ne,d(X(P)("orders.allOrders"))+" ("+d(u.value.length)+")",1),Y(` <div>
        <VaButton
          icon="exit_to_app"
          color="info"
          :loading="isDownloading"
          :href="HOST + '/orders/xls'"
          @click="download"
        >
          <span class="px-1">Descargar</span>
        </VaButton>
      </div> `)]),t("div",re,[t("div",null,[o(s,{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),label:"Buscar en resultados",placeholder:"Escribe lo que buscas",clearable:"",background:"#fff"},null,8,["modelValue"])]),t("div",null,[o(k,{modelValue:y.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>y.value=e),L],label:"Filtrar por fecha",placeholder:"Ingresa una fecha",mode:"range",background:"#fff"},null,8,["modelValue"])])]),t("div",ce,[t("div",ie,[o(A,{hoverable:"",items:u.value,columns:T,class:"text-xs","selected-color":"#eee",filter:h.value,"per-page":v.value,"current-page":V.value,loading:b.value,"no-data-html":"...",onFiltered:a[3]||(a[3]=e=>N.value=e.items.length)},{"cell(Vehiculos)":l(({...e})=>[t("div",de,[(m(!0),w(S,null,I(e==null?void 0:e.source,c=>(m(),E(O,{key:c,overlap:"",color:"primary",text:c.value,placement:"top-end"},{default:l(()=>[o(B,{size:"small",color:"#eff6ff",class:"text-xxs font-bold px-1",style:{"--va-chip-sm-height":"1.25rem"}},{default:l(()=>[_(d(c.label),1)]),_:2},1024)]),_:2},1032,["text"]))),128))])]),"cell(Servicio)":l(({...e})=>[t("div",ue,[(m(!0),w(S,null,I(e==null?void 0:e.source,c=>(m(),E(O,{key:c,overlap:"",color:"primary"},{default:l(()=>[o(B,{size:"small",color:"#eff6ff",class:"text-xxs font-bold px-1",style:{"--va-chip-sm-height":"1.25rem"}},{default:l(()=>[_(d(c.label),1)]),_:2},1024)]),_:2},1024))),128))])]),"cell(Id)":l(({value:e})=>[t("div",pe,[t("span",me,d(e),1)])]),"cell(Cotizacion)":l(({value:e})=>[t("div",fe,[t("span",ve,d(e),1)])]),"cell(Estado)":l(({value:e})=>[t("div",null,[o(H,{class:Z(["text-xs",e==="Cancelado"?"bg-red-100":e==="Finalizado"?"bg-green-100":e==="En Progreso"?"bg-blue-100":""]),style:{width:"120px","--va-input-wrapper-border-color":"transparent"},readonly:"","model-value":e},null,8,["class","model-value"])])]),"cell(actions)":l(({row:e})=>{var c;return[t("div",ge,[o(g,{icon:"description",to:"/orders/view/"+((c=e==null?void 0:e.rowData)==null?void 0:c.id),color:"#158de3",round:"",onClick:R=>{var p;return U((p=e==null?void 0:e.rowData)==null?void 0:p.id)}},null,8,["to","onClick"]),o(g,{icon:"delete",color:"danger",round:"",onClick:R=>{var p;return D((p=e==null?void 0:e.rowData)==null?void 0:p.id)}},null,8,["onClick"])])]}),bodyAppend:l(()=>[t("tr",null,[t("td",_e,[t("div",xe,[o(q,{modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value=e),size:"small","buttons-preset":"primary","active-page-color":"textPrimary",class:"text-xs mb-3 justify-center sm:justify-start",pages:j()},null,8,["modelValue","pages"])])])])]),_:1},8,["items","filter","per-page","current-page","loading","no-data-html"])])]),o(G,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=e=>f.value=e),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:l(()=>[o(g,{size:"small",preset:"secondary",class:"mr-1",onClick:a[4]||(a[4]=e=>D(null))},{default:l(()=>[_(" Cancelar")]),_:1}),o(g,{size:"small",loading:x.value,onClick:$},{default:l(()=>[_(" Continuar")]),_:1},8,["loading"])]),default:l(()=>[be]),_:1},8,["modelValue"])])}}}),ke=ee(he,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/orders/pages/ListOrders.vue"]]);export{ke as default};
//# sourceMappingURL=ListOrders-27dd9e9c.js.map
