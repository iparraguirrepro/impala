import{d as W,p as X,I as Y,q as r,G as Z,v as ee,r as i,o as f,c as w,a as t,t as d,u as I,b as o,w as s,f as v,F,k as E,g as M,i as te,_ as ae}from"./index-eb5b4f51.js";import{g as se,d as le}from"./Orders-2187cd97.js";import{u as oe}from"./orders-store-c769c10e.js";import{f as ne}from"./format-8e15a9c0.js";const re={class:"py-4"},ce={class:"flex justify-between align-center justify-center"},ie={class:"h5 m-0"},de={class:"columns-5 mb-7 mt-5"},ue={class:"relative"},pe={class:"mt-5"},me={class:"w-full bg-white p-2"},fe={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},ve={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},_e={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},ge={class:"text-primary font-bold hover:underline cursor-pointer"},be={class:"flex flex-col gap-1",style:{"--va-badge-text-wrapper-border-radius":"50%"}},xe={class:"text-primary font-bold hover:underline cursor-pointer"},ye={class:"flex gap-1"},he={colspan:"8"},Ve={class:"flex justify-end mt-4"},Ce=t("p",{class:"text-sm"},"¿Deseas eliminar esta orden?",-1),ke=W({__name:"ListOrders",setup(De){const{notify:P}=X(),T=oe(),{statusOptions:j}=Y(T),u=r([]),L=r(!1),_=r(null),z=r(null),b=r(!1),x=r(!1),{t:N}=Z(),U=[{key:"Nro Orden",sortable:!1},{key:"Cotización",sortable:!1},{key:"Cliente",sortable:!1},{key:"Contacto",sortable:!1},{key:"Servicio",sortable:!1},{key:"Creación",sortable:!1},{key:"Estado",width:"80"},{key:"actions",width:80}],y=r(""),h=r({start:null,end:null}),$=r(0),g=r(15),V=r(1),q=()=>g.value&&g.value!==0?Math.ceil(u.value.length/g.value):u.value.length,A=()=>{const{start:n,end:a}=h.value;if(n&&a){const l=new Date(n).setHours(0),D=new Date(a).setHours(24);C({start:new Date(l).getTime(),end:new Date(D).getTime()})}};ee(()=>{C()});const C=async n=>{x.value=!0;const a=await se(n);u.value=a.map(l=>(console.log(l),{...l,"Nro Orden":`000${l.id}-24`,Cotización:`00${l.service.quotation}`,Contacto:l.customer.cellphone,Cliente:l.company?l.company.socialreason:l.customer.fullname,Servicio:[{label:l.service.services.service}],Creación:ne(new Date(l.created_at),"dd/MM/yyyy hh:mm"),Estado:l.status===1?"En Progreso":"Finalizado",actions:null})),x.value=!1},H=n=>{L.value=!!n,z.value=n},k=n=>{_.value=n,z.value=n},R=async()=>{b.value=!0,P({message:"Orden eliminada correctamente",color:"success",duration:1e3}),await le(_.value),b.value=!1,k(null),C()};return(n,a)=>{const l=i("VaInput"),D=i("VaDateInput"),O=i("VaSelect"),p=i("VaButton"),B=i("VaChip"),S=i("VaBadge"),G=i("VaPagination"),J=i("VaDataTable"),K=i("VaModal");return f(),w("div",re,[t("div",ce,[t("h1",ie,d(I(N)("orders.allOrders"))+" ("+d(u.value.length)+")",1)]),t("div",de,[t("div",null,[o(l,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),label:"Buscar en resultados",placeholder:"Escribe lo que buscas",clearable:"",background:"#fff"},null,8,["modelValue"])]),t("div",null,[o(D,{modelValue:h.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>h.value=e),A],label:"Filtrar por fecha",placeholder:"Ingresa una fecha",mode:"range",background:"#fff"},null,8,["modelValue"])]),t("div",ue,[o(O,{options:I(j),"value-by":"id","text-by":"label",background:"#fff",placeholder:"---",label:"Filtrar por estado",class:"text-xs",style:{"--va-input--border-color":"transparent",width:"120px"}},null,8,["options"]),o(p,{class:"absolute bottom-0.5 mx-4 text-xs",color:"#158de3"},{default:s(()=>[v("Buscar")]),_:1})])]),t("div",pe,[t("div",me,[o(J,{hoverable:"",items:u.value,columns:U,class:"text-xs","selected-color":"#eee",filter:y.value,"per-page":g.value,"current-page":V.value,loading:x.value,"no-data-html":"...",onFiltered:a[3]||(a[3]=e=>$.value=e.items.length)},{"cell(Vehiculos)":s(({...e})=>[t("div",fe,[(f(!0),w(F,null,E(e==null?void 0:e.source,c=>(f(),M(S,{key:c,overlap:"",color:"primary",text:c.value,placement:"top-end"},{default:s(()=>[o(B,{size:"small",color:"#eff6ff",class:"text-xxs font-bold px-1",style:{"--va-chip-sm-height":"1.25rem"}},{default:s(()=>[v(d(c.label),1)]),_:2},1024)]),_:2},1032,["text"]))),128))])]),"cell(Servicio)":s(({...e})=>[t("div",ve,[(f(!0),w(F,null,E(e==null?void 0:e.source,c=>(f(),M(S,{key:c,overlap:"",color:"primary"},{default:s(()=>[o(B,{size:"small",color:"#eff6ff",class:"text-xxs font-bold px-1",style:{"--va-chip-sm-height":"1.25rem"}},{default:s(()=>[v(d(c.label),1)]),_:2},1024)]),_:2},1024))),128))])]),"cell(Id)":s(({value:e})=>[t("div",_e,[t("span",ge,d(e),1)])]),"cell(Cotizacion)":s(({value:e})=>[t("div",be,[t("span",xe,d(e),1)])]),"cell(Estado)":s(({value:e})=>[t("div",null,[o(O,{class:te(["text-xs",e==="Cancelado"?"bg-red-100":e==="Finalizado"?"bg-green-100":e==="En Progreso"?"bg-blue-100":""]),style:{width:"120px","--va-input-wrapper-border-color":"transparent"},readonly:"","model-value":e},null,8,["class","model-value"])])]),"cell(actions)":s(({row:e})=>{var c;return[t("div",ye,[o(p,{icon:"description",to:"/orders/view/"+((c=e==null?void 0:e.rowData)==null?void 0:c.id),color:"#158de3",round:"",onClick:Q=>{var m;return H((m=e==null?void 0:e.rowData)==null?void 0:m.id)}},null,8,["to","onClick"]),o(p,{icon:"delete",color:"danger",round:"",onClick:Q=>{var m;return k((m=e==null?void 0:e.rowData)==null?void 0:m.id)}},null,8,["onClick"])])]}),bodyAppend:s(()=>[t("tr",null,[t("td",he,[t("div",Ve,[o(G,{modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value=e),size:"small","buttons-preset":"primary","active-page-color":"textPrimary",class:"text-xs mb-3 justify-center sm:justify-start",pages:q()},null,8,["modelValue","pages"])])])])]),_:1},8,["items","filter","per-page","current-page","loading","no-data-html"])])]),o(K,{modelValue:_.value,"onUpdate:modelValue":a[5]||(a[5]=e=>_.value=e),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:s(()=>[o(p,{size:"small",preset:"secondary",class:"mr-1",onClick:a[4]||(a[4]=e=>k(null))},{default:s(()=>[v(" Cancelar")]),_:1}),o(p,{size:"small",loading:b.value,onClick:R},{default:s(()=>[v(" Continuar")]),_:1},8,["loading"])]),default:s(()=>[Ce]),_:1},8,["modelValue"])])}}}),Se=ae(ke,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/orders/pages/ListOrders.vue"]]);export{Se as default};
//# sourceMappingURL=ListOrders-3c2ab301.js.map
