{"version":3,"file":"Login-4d91fa3a.js","sources":["../../src/pages/auth/Login.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"form\" class=\"m-auto\" style=\"width: 300px\" @submit.prevent=\"submit\">\n    <!--    <h1 class=\"font-black uppercase text-3xl mb-2\">IMPALA</h1>-->\n    <img src=\"/public/transrafael_logo.png\" class=\"max-w-[120px] mb-5\" alt=\"Logo\" />\n    <h2 class=\"font-bold mb-4 uppercase sm:normal-case hidden sm:b lock flex gap-2\">\n      <VaIcon name=\"mso-lock\" size=\"19px\" class=\"cursor-pointer\" color=\"secondary\" />\n      <span class=\"pl-1 relative top-0.5\">Acceso al sistema</span>\n    </h2>\n    <p class=\"text-xs font-medium mb-6 mt-2 sm:-mt-3\">Recuerda mantener tus credenciales en privado</p>\n    <VaInput\n      v-model=\"formData.email\"\n      :rules=\"[validators.required, validators.email]\"\n      class=\"mb-4\"\n      label=\"Usuario\"\n      type=\"email\"\n      clearable\n      immediate-validation\n      placeholder=\"Escribe tu usuario o correo electrónico\"\n    />\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n      <VaInput\n        v-model=\"formData.password\"\n        :rules=\"[validators.required]\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"Contraseña\"\n        placeholder=\"Escribe tu contraseña\"\n        clearable\n        immediate-validation\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n    </VaValue>\n\n    <div class=\"auth-layout__options flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4\">\n      <VaCheckbox v-model=\"formData.keepLoggedIn\" class=\"mb-2 sm:mb-0\" label=\"Recordar credenciales\" />\n      <!--      <RouterLink :to=\"{ name: 'recover' }\" class=\"mt-2 sm:mt-0 sm:ml-1 text-xs font-semibold text-primary\">-->\n      <!--        Olvidé mi contraseña-->\n      <!--      </RouterLink>-->\n    </div>\n\n    <div class=\"flex justify-center\">\n      <VaButton class=\"w-full py-1\" type=\"submit\" :loading=\"isLoading\" :disabled=\"!isValid\" @click=\"submit\">\n        Iniciar Sesión\n      </VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useForm, useToast, VaCheckbox } from 'vuestic-ui'\nimport { validators } from '../../services/utils'\nimport { apiAuth } from '../../core/requests/Auth'\n\nconst { isValid, validate } = useForm('form')\nconst { push } = useRouter()\nconst { init, notify } = useToast()\nconst isLoading = ref(false)\nconst formData = reactive({\n  email: 'admin@admin.com',\n  password: '123456',\n  keepLoggedIn: false,\n})\n\nconst submit = async () => {\n  if (validate()) {\n    isLoading.value = true\n    const authData: any = await apiAuth({\n      password: formData.password,\n      username: formData.email,\n    })\n\n    if (authData.status) {\n      localStorage.setItem('__token', authData.token)\n      localStorage.setItem('__user', JSON.stringify(authData.user))\n      //\n      init({ message: 'Iniciaste sesión correctamente', color: 'success' })\n      push({ name: 'Cotizaciones' })\n    } else {\n      notify({ message: 'Error al iniciar sesión', color: 'danger' })\n    }\n    isLoading.value = false\n  }\n}\n</script>\n"],"names":["isValid","validate","useForm","push","useRouter","init","notify","useToast","isLoading","ref","formData","reactive","submit","authData","apiAuth"],"mappings":"0tBA+DA,KAAM,CAAE,QAAAA,EAAS,SAAAC,CAAS,EAAIC,EAAQ,MAAM,EACtC,CAAE,KAAAC,GAASC,IACX,CAAE,KAAAC,EAAM,OAAAC,CAAO,EAAIC,EAAS,EAC5BC,EAAYC,EAAI,EAAK,EACrBC,EAAWC,EAAS,CACxB,MAAO,kBACP,SAAU,SACV,aAAc,EAAA,CACf,EAEKC,EAAS,SAAY,CACzB,GAAIX,IAAY,CACdO,EAAU,MAAQ,GACZ,MAAAK,EAAgB,MAAMC,EAAQ,CAClC,SAAUJ,EAAS,SACnB,SAAUA,EAAS,KAAA,CACpB,EAEGG,EAAS,QACE,aAAA,QAAQ,UAAWA,EAAS,KAAK,EAC9C,aAAa,QAAQ,SAAU,KAAK,UAAUA,EAAS,IAAI,CAAC,EAE5DR,EAAK,CAAE,QAAS,iCAAkC,MAAO,SAAW,CAAA,EAC/DF,EAAA,CAAE,KAAM,cAAA,CAAgB,GAE7BG,EAAO,CAAE,QAAS,0BAA2B,MAAO,QAAU,CAAA,EAEhEE,EAAU,MAAQ,EACpB,CAAA"}