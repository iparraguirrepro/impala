import{d as w,a as x,B as g,u as C,j as B,b as o,c as S,m as A,w as l,Y as d,f as s,k as r,h as p,g as N}from"./index-b6bf2d81.js";import{v as i}from"./utils-17deefef.js";import{b as F}from"./Auth-670ebc32.js";const U=p("h1",{class:"font-semibold text-2xl mb-4 hidden sm:block"},"Cotizador",-1),j={class:"flex justify-center"},E=w({__name:"Login",setup(q){const{isValid:f,validate:_}=x("form"),{push:V}=g(),{init:b,notify:v}=C(),e=B({email:"",password:""}),u=async()=>{if(_()){const t=await F({password:e.password,username:e.email});t.status==!0?(localStorage.setItem("__token",t.token),localStorage.setItem("__user",JSON.stringify(t.user)),b({message:"Iniciaste sesión correctamente",color:"success"}),V({name:"dashboard"})):v({message:"Error al iniciar sesión",color:"danger"})}};return(t,n)=>{const m=o("VaInput"),y=o("VaIcon"),I=o("VaValue"),h=o("VaButton"),k=o("VaForm");return S(),A(k,{ref:"form",class:"m-auto",style:{width:"300px"},onSubmit:d(u,["prevent"])},{default:l(()=>[U,s(m,{modelValue:e.email,"onUpdate:modelValue":n[0]||(n[0]=a=>e.email=a),rules:[r(i).required,r(i).email],class:"mb-4",label:"Usuario",type:"email"},null,8,["modelValue","rules"]),s(I,{"default-value":!1},{default:l(a=>[s(m,{modelValue:e.password,"onUpdate:modelValue":n[1]||(n[1]=c=>e.password=c),rules:[r(i).required],type:a.value?"text":"password",class:"mb-4",label:"Contraseña",onClickAppendInner:d(c=>a.value=!a.value,["stop"])},{appendInner:l(()=>[s(y,{name:a.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","rules","type","onClickAppendInner"])]),_:1}),p("div",j,[s(h,{class:"w-full py-2",type:"submit",disabled:!r(f),onClick:u},{default:l(()=>[N(" Acceder ")]),_:1},8,["disabled"])])]),_:1},8,["onSubmit"])}}});export{E as default};
//# sourceMappingURL=Login-75b2d1d6.js.map
