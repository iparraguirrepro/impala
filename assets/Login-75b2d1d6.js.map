{"version":3,"file":"Login-75b2d1d6.js","sources":["../../src/pages/auth/Login.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"form\" class=\"m-auto\" style=\"width: 300px\" @submit.prevent=\"submit\">\n    <h1 class=\"font-semibold text-2xl mb-4 hidden sm:block\">Cotizador</h1>\n    <VaInput\n      v-model=\"formData.email\"\n      :rules=\"[validators.required, validators.email]\"\n      class=\"mb-4\"\n      label=\"Usuario\"\n      type=\"email\"\n    />\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n      <VaInput\n        v-model=\"formData.password\"\n        :rules=\"[validators.required]\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"Contraseña\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n    </VaValue>\n\n    <div class=\"flex justify-center\">\n      <VaButton class=\"w-full py-2\" type=\"submit\" :disabled=\"!isValid\" @click=\"submit\"> Acceder </VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useForm, useToast } from 'vuestic-ui'\nimport { validators } from '../../services/utils'\nimport { apiAuth } from '../../core/requests/Auth'\n\nconst { isValid, validate } = useForm('form')\nconst { push } = useRouter()\nconst { init, notify } = useToast()\n\nconst formData = reactive({\n  email: '',\n  password: '',\n})\n\nconst submit = async () => {\n  if (validate()) {\n    const authData: any = await apiAuth({\n      password: formData.password,\n      username: formData.email,\n    })\n\n    if (authData.status == true) {\n      localStorage.setItem('__token', authData.token)\n      localStorage.setItem('__user', JSON.stringify(authData.user))\n      init({ message: 'Iniciaste sesión correctamente', color: 'success' })\n      push({ name: 'dashboard' })\n    } else {\n      notify({ message: 'Error al iniciar sesión', color: 'danger' })\n    }\n  }\n}\n</script>\n"],"names":["isValid","validate","useForm","push","useRouter","init","notify","useToast","formData","reactive","submit","authData","apiAuth"],"mappings":"oWA0CA,KAAM,CAAE,QAAAA,EAAS,SAAAC,CAAS,EAAIC,EAAQ,MAAM,EACtC,CAAE,KAAAC,GAASC,IACX,CAAE,KAAAC,EAAM,OAAAC,CAAO,EAAIC,EAAS,EAE5BC,EAAWC,EAAS,CACxB,MAAO,GACP,SAAU,EAAA,CACX,EAEKC,EAAS,SAAY,CACzB,GAAIT,IAAY,CACR,MAAAU,EAAgB,MAAMC,EAAQ,CAClC,SAAUJ,EAAS,SACnB,SAAUA,EAAS,KAAA,CACpB,EAEGG,EAAS,QAAU,IACR,aAAA,QAAQ,UAAWA,EAAS,KAAK,EAC9C,aAAa,QAAQ,SAAU,KAAK,UAAUA,EAAS,IAAI,CAAC,EAC5DN,EAAK,CAAE,QAAS,iCAAkC,MAAO,SAAW,CAAA,EAC/DF,EAAA,CAAE,KAAM,WAAA,CAAa,GAE1BG,EAAO,CAAE,QAAS,0BAA2B,MAAO,QAAU,CAAA,CAElE,CAAA"}