{"version":3,"file":"Login-7601756b.js","sources":["../../src/pages/auth/Login.vue"],"sourcesContent":["<template>\r\n  <VaForm ref=\"form\" class=\"m-auto\" style=\"width: 300px\" @submit.prevent=\"submit\">\r\n    <h1 class=\"font-black uppercase text-3xl mb-2\">IMPALA</h1>\r\n    <h2 class=\"font-bold mb-4 uppercase sm:normal-case hidden sm:block flex gap-2\">\r\n      <VaIcon name=\"mso-lock\" size=\"19px\" class=\"cursor-pointer\" color=\"secondary\" />\r\n      <span class=\"pl-1 relative top-0.5\">Acceso al sistema</span>\r\n    </h2>\r\n    <p class=\"text-xs font-medium mb-6 mt-2 sm:-mt-3\">Recuerda mantener tus credenciales en privado</p>\r\n    <VaInput\r\n      v-model=\"formData.email\"\r\n      :rules=\"[validators.required, validators.email]\"\r\n      class=\"mb-4\"\r\n      label=\"Usuario\"\r\n      type=\"email\"\r\n      clearable\r\n      immediate-validation\r\n      placeholder=\"Escribe tu usuario o correo electrónico\"\r\n    />\r\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\r\n      <VaInput\r\n        v-model=\"formData.password\"\r\n        :rules=\"[validators.required]\"\r\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\r\n        class=\"mb-4\"\r\n        label=\"Contraseña\"\r\n        placeholder=\"Escribe tu contraseña\"\r\n        clearable\r\n        immediate-validation\r\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\r\n      >\r\n        <template #appendInner>\r\n          <VaIcon\r\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\r\n            class=\"cursor-pointer\"\r\n            color=\"secondary\"\r\n          />\r\n        </template>\r\n      </VaInput>\r\n    </VaValue>\r\n\r\n    <div class=\"auth-layout__options flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4\">\r\n      <VaCheckbox v-model=\"formData.keepLoggedIn\" class=\"mb-2 sm:mb-0\" label=\"Recordar credenciales\" />\r\n      <RouterLink :to=\"{ name: 'recover' }\" class=\"mt-2 sm:mt-0 sm:ml-1 text-xs font-semibold text-primary\">\r\n        Olvidé mi contraseña\r\n      </RouterLink>\r\n    </div>\r\n\r\n    <div class=\"flex justify-center\">\r\n      <VaButton class=\"w-full py-1\" type=\"submit\" :loading=\"isLoading\" :disabled=\"!isValid\" @click=\"submit\">\r\n        Acceder\r\n      </VaButton>\r\n    </div>\r\n  </VaForm>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { reactive, ref } from 'vue'\r\nimport { RouterLink, useRouter } from 'vue-router'\r\nimport { useForm, useToast, VaCheckbox } from 'vuestic-ui'\r\nimport { validators } from '../../services/utils'\r\nimport { apiAuth } from '../../core/requests/Auth'\r\n\r\nconst { isValid, validate } = useForm('form')\r\nconst { push } = useRouter()\r\nconst { init, notify } = useToast()\r\nconst isLoading = ref(false)\r\nconst formData = reactive({\r\n  email: '',\r\n  password: '',\r\n  keepLoggedIn: false,\r\n})\r\n\r\nconst submit = async () => {\r\n  if (validate()) {\r\n    isLoading.value = true\r\n    const authData: any = await apiAuth({\r\n      password: formData.password,\r\n      username: formData.email,\r\n    })\r\n\r\n    if (authData.status) {\r\n      localStorage.setItem('__token', authData.token)\r\n      localStorage.setItem('__user', JSON.stringify(authData.user))\r\n      //\r\n      init({ message: 'Iniciaste sesión correctamente', color: 'success' })\r\n      push({ name: 'dashboard' })\r\n    } else {\r\n      notify({ message: 'Error al iniciar sesión', color: 'danger' })\r\n    }\r\n    isLoading.value = false\r\n  }\r\n}\r\n</script>\r\n"],"names":["isValid","validate","useForm","push","useRouter","init","notify","useToast","isLoading","ref","formData","reactive","submit","authData","apiAuth"],"mappings":"0tBA8DA,KAAM,CAAE,QAAAA,EAAS,SAAAC,CAAS,EAAIC,EAAQ,MAAM,EACtC,CAAE,KAAAC,GAASC,IACX,CAAE,KAAAC,EAAM,OAAAC,CAAO,EAAIC,EAAS,EAC5BC,EAAYC,EAAI,EAAK,EACrBC,EAAWC,EAAS,CACxB,MAAO,GACP,SAAU,GACV,aAAc,EAAA,CACf,EAEKC,EAAS,SAAY,CACzB,GAAIX,IAAY,CACdO,EAAU,MAAQ,GACZ,MAAAK,EAAgB,MAAMC,EAAQ,CAClC,SAAUJ,EAAS,SACnB,SAAUA,EAAS,KAAA,CACpB,EAEGG,EAAS,QACE,aAAA,QAAQ,UAAWA,EAAS,KAAK,EAC9C,aAAa,QAAQ,SAAU,KAAK,UAAUA,EAAS,IAAI,CAAC,EAE5DR,EAAK,CAAE,QAAS,iCAAkC,MAAO,SAAW,CAAA,EAC/DF,EAAA,CAAE,KAAM,WAAA,CAAa,GAE1BG,EAAO,CAAE,QAAS,0BAA2B,MAAO,QAAU,CAAA,EAEhEE,EAAU,MAAQ,EACpB,CAAA"}