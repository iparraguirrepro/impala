import{d as w,i as C,C as A,u as L,h as B,l as S,r as n,o as N,g as R,w as r,Y as _,a as l,b as s,m as t,a6 as U,f as b,a7 as E}from"./index-f95e1e62.js";import{v as m}from"./utils-17deefef.js";import{b as F}from"./Auth-9f310a4c.js";const j=l("h1",{class:"font-black uppercase text-3xl mb-2"},"IMPALA",-1),q={class:"font-bold mb-4 uppercase sm:normal-case hidden sm:block flex gap-2"},D=l("span",{class:"pl-1 relative top-0.5"},"Acceso al sistema",-1),M=l("p",{class:"text-xs font-medium mb-6 mt-2 sm:-mt-3"},"Recuerda mantener tus credenciales en privado",-1),O={class:"auth-layout__options flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4"},T={class:"flex justify-center"},G=w({__name:"Login",setup(z){const{isValid:v,validate:V}=C("form"),{push:x}=A(),{init:g,notify:y}=L(),c=B(!1),e=S({email:"",password:"",keepLoggedIn:!1}),u=async()=>{if(V()){c.value=!0;const i=await F({password:e.password,username:e.email});i.status?(localStorage.setItem("__token",i.token),localStorage.setItem("__user",JSON.stringify(i.user)),g({message:"Iniciaste sesión correctamente",color:"success"}),x({name:"dashboard"})):y({message:"Error al iniciar sesión",color:"danger"}),c.value=!1}};return(i,o)=>{const d=n("VaIcon"),p=n("VaInput"),h=n("VaValue"),k=n("VaButton"),I=n("VaForm");return N(),R(I,{ref:"form",class:"m-auto",style:{width:"300px"},onSubmit:_(u,["prevent"])},{default:r(()=>[j,l("h2",q,[s(d,{name:"mso-lock",size:"19px",class:"cursor-pointer",color:"secondary"}),D]),M,s(p,{modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=a=>e.email=a),rules:[t(m).required,t(m).email],class:"mb-4",label:"Usuario",type:"email",clearable:"","immediate-validation":"",placeholder:"Escribe tu usuario o correo electrónico"},null,8,["modelValue","rules"]),s(h,{"default-value":!1},{default:r(a=>[s(p,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=f=>e.password=f),rules:[t(m).required],type:a.value?"text":"password",class:"mb-4",label:"Contraseña",placeholder:"Escribe tu contraseña",clearable:"","immediate-validation":"",onClickAppendInner:_(f=>a.value=!a.value,["stop"])},{appendInner:r(()=>[s(d,{name:a.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","rules","type","onClickAppendInner"])]),_:1}),l("div",O,[s(t(U),{modelValue:e.keepLoggedIn,"onUpdate:modelValue":o[2]||(o[2]=a=>e.keepLoggedIn=a),class:"mb-2 sm:mb-0",label:"Recordar credenciales"},null,8,["modelValue"]),s(t(E),{to:{name:"recover"},class:"mt-2 sm:mt-0 sm:ml-1 text-xs font-semibold text-primary"},{default:r(()=>[b(" Olvidé mi contraseña ")]),_:1})]),l("div",T,[s(k,{class:"w-full py-1",type:"submit",loading:c.value,disabled:!t(v),onClick:u},{default:r(()=>[b(" Acceder ")]),_:1},8,["loading","disabled"])])]),_:1},8,["onSubmit"])}}});export{G as default};
//# sourceMappingURL=Login-de68b8ac.js.map
