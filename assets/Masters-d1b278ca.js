import{d as Ce,p as xe,q as o,s as I,v as he,r as u,o as w,c as R,a as t,b as l,w as s,f as _,u as n,z as M,g as W,F as ke,_ as we,A as me,x as fe}from"./index-eb5b4f51.js";import{e as Me,f as ze,h as Ee,g as Oe,a as je,c as Be,b as Ie,d as Re,n as Fe}from"./Services-781d534c.js";import{v as p}from"./utils-17deefef.js";import{l as X}from"./lodash-14e13292.js";import{o as De,a as Ge}from"./helpers-a12fb3e4.js";import{g as He,n as Pe,d as Le}from"./Vehicles-f3e604e9.js";const Qe={class:"flex flex-col space-y-6 md:space-y-4"},Je={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},Ke={class:"flex gap-1"},We=t("h4",{class:"text-base mb-4"},"Nuevo Viatico",-1),Xe={class:"flex flex-col"},Ye=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),Ze={class:"flex"},el=t("span",{class:"ml-2"},"Registrar",-1),ll=t("p",{class:"text-sm"},"¿Deseas continuar?",-1),al=Ce({__name:"Expenses",setup($){const m=De,{notify:y}=xe(),C=[{key:"Tipo",sortable:!0},{key:"Valor",sortable:!0},{key:"Acciones",width:80}],F=o([]),G=o(null),z=o(!1),N=o(!1),H=o(!1),x=o(!1),h=o({}),{validate:U,reset:E}=I("formExpense");he(async()=>{await A()});async function A(){x.value=!0;const b=await Me();F.value=b.map(r=>({...r,Tipo:r.name,Valor:`S/ ${r.value||"0.00"}`})),x.value=!1}const O=async()=>{await ze(G.value),await A(),N.value=!1},j=async()=>{try{U(),x.value=!0,await Ee({...h.value}),await A(),x.value=!1,E(),y({message:"Registrado correctamente",color:"success"}),z.value=!1}catch(b){console.log(b)}},D=b=>{N.value=!!b,G.value=b};return(b,r)=>{const g=u("VaButton"),d=u("VaCardTitle"),k=u("VaDataTable"),q=u("VaCardContent"),c=u("VaCard"),P=u("VaInput"),Y=u("VaForm"),L=u("VaModal");return w(),R(ke,null,[t("div",Qe,[l(c,null,{default:s(()=>[l(d,{class:"flex justify-between"},{default:s(()=>[_(" Viaticos "),l(g,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:r[0]||(r[0]=v=>z.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(q,null,{default:s(()=>[t("div",Je,[l(k,{items:F.value,columns:C,class:"text-xs",loading:x.value},{"cell(Acciones)":s(({row:v})=>[t("div",Ke,[l(g,{icon:"delete",color:"danger",round:"",onClick:ge=>{var Q;return D((Q=v==null?void 0:v.rowData)==null?void 0:Q.id)}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(L,{modelValue:z.value,"onUpdate:modelValue":r[4]||(r[4]=v=>z.value=v),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:j},{default:s(()=>[t("div",null,[We,t("div",Xe,[l(Y,{ref:"formExpense",immediate:"",class:"gap-2"},{default:s(()=>[l(P,{modelValue:h.value.name,"onUpdate:modelValue":r[1]||(r[1]=v=>h.value.name=v),stateful:"",name:"name",clearable:"",label:"Tipo de viatico",class:"mb-4",rules:[n(p).required]},null,8,["modelValue","rules"]),M((w(),W(P,{modelValue:h.value.value,"onUpdate:modelValue":r[2]||(r[2]=v=>h.value.value=v),stateful:"",name:"value",clearable:"",label:"Valor promedio",class:"mb-5",rules:[n(p).required],onChange:r[3]||(r[3]=()=>{h.value.value=n(X.ceil)(h.value.value,2)})},{prependInner:s(()=>[Ye]),_:1},8,["modelValue","rules"])),[[n(m)]])]),_:1},512)]),t("div",Ze,[l(g,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:x.value,onClick:j},{default:s(()=>[el]),_:1},8,["loading"])])])]),_:1},8,["modelValue"])]),l(L,{modelValue:N.value,"onUpdate:modelValue":r[6]||(r[6]=v=>N.value=v),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:s(()=>[l(g,{size:"small",preset:"secondary",class:"mr-1",onClick:r[5]||(r[5]=v=>D(null))},{default:s(()=>[_(" Cancelar")]),_:1}),l(g,{size:"small",loading:H.value,onClick:O},{default:s(()=>[_(" Continuar")]),_:1},8,["loading"])]),default:s(()=>[ll]),_:1},8,["modelValue"])],64)}}}),sl=we(al,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/settings/pages/Expenses.vue"]]),pe={list:me+"/currencies",delete:me+"/currencies",register:me+"/currencies"},be=localStorage.getItem("__token");async function tl(){const $={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+be}};let m=null;return await fetch(pe.list,$).then(y=>{m=y.json()}),m}async function ol($){const m={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+be},body:JSON.stringify($)};let y=null;return await fetch(pe.register,m).then(C=>{y=C.json()}),y}async function nl($){const m={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+be}};let y=null;return await fetch(`${pe.delete}/${$}`,m).then(C=>{y=C.json()}),y}const il={class:"flex flex-col space-y-6 md:space-y-4"},rl={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},ul={class:"flex gap-1"},cl=t("h4",{class:"text-base mb-4"},"Nuevo vehiculo",-1),dl={class:"flex flex-col"},vl=t("span",{class:"font-bold text-sm"},"S/",-1),ml={class:"flex"},fl=t("span",{class:"ml-2"},"Registrar",-1),pl={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},bl={class:"flex gap-1"},gl=t("h4",{class:"text-base mb-4"},"Nuevo tipo de conductor",-1),Vl={class:"flex flex-col"},_l=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),yl={class:"flex"},Cl=t("span",{class:"ml-2"},"Registrar",-1),xl=t("h4",{class:"text-base mb-4"},"Nueva Moneda",-1),hl={class:"flex flex-col"},kl={class:"flex"},wl=t("span",{class:"ml-2"},"Registrar",-1),Dl={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},Sl={class:"flex gap-1"},Tl={key:0,class:"text-base mb-4"},$l={key:1,class:"text-base mb-4"},Nl={class:"flex flex-col"},Ul={class:"columns-2"},Al=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),ql={class:"mb-5"},Ml=t("p",{style:{"font-size":"11px","font-weight":"600",color:"var(--va-primary)"}},"Condiciones especificas:",-1),zl={key:2,class:"flex"},El=t("span",{class:"ml-2"},"Registrar",-1),Ol=t("p",{class:"text-sm"},"¿Deseas continuar?",-1),jl=Ce({__name:"Masters",setup($){const m=De,y=Ge,{notify:C}=xe(),F=[{key:"Vehiculo",sortable:!0},{key:"Fabricación",sortable:!0},{key:"Capacidad",sortable:!0},{key:"Gal/Hr",sortable:!0},{key:"Maquina Seca",sortable:!0},{key:"Acciones",width:80}],G=[{key:"Tipo Conductor",sortable:!0},{key:"Tarifa",sortable:!0},{key:"Acciones",width:80}],z=[{key:"Servicio",sortable:!0},{key:"Descripción",sortable:!0},{key:"Tarifa base",sortable:!0},{key:"Acciones",width:80}],N=o([]),H=o([]),x=o([]),h=o([]),U=o(null),E=o(!1),A=o(!1),O=o(!1),j=o(!1),D=o(!1),b=o(!1),r=o(!1),g=o(null),d=o({}),k=o({}),q=o({}),c=o({}),{validate:P,reset:Y}=I("fgVehicle"),{validate:L,reset:v}=I("fgDriver"),{validate:ge,reset:Q}=I("fgCurrency"),{validate:Se,reset:Te}=I("fgService");he(()=>{ae(),te(),oe(),ee()});const Z=o(!1);async function ee(){Z.value=!0;const i=await Oe();x.value=i.map(e=>({...e,Servicio:e.service,Descripción:e.description,"Tarifa base":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),Z.value=!1}const le=o(!1);async function ae(){le.value=!0;const i=await He();N.value=i.map(e=>({...e,Vehiculo:e.name,Fabricación:e.year,Capacidad:e.capacity,"Gal/Hr":`${e.cost||0}`,"Maquina Seca":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),le.value=!1}const se=o(!1);async function te(){se.value=!0;const i=await je();H.value=i.map(e=>({...e,"Tipo Conductor":e.type,Tarifa:e.fee?`S/ ${e.fee||"0.00"}`:"-"})),se.value=!1}async function oe(){const i=await tl();h.value=i.map(e=>({...e,Moneda:e.label,"Tipo de Cambio":e.value}))}const $e=async()=>{g.value==="vehicles"&&(await Le(U.value),await ae()),g.value==="currencies"&&(await nl(U.value),await oe()),g.value==="drivers"&&(await Ie(U.value),await te()),g.value==="service"&&(await Re(U.value),await ee()),g.value=null,b.value=!1},Ve=async()=>{A.value=!0;try{P(),await Pe({...d.value}),await ae(),C({message:"Vehiculo registrado correctamente",color:"success"}),A.value=!1,Y(),E.value=!1}catch(i){console.log(i)}},ne=o(!1),_e=async()=>{try{L(),ne.value=!0,await Be({...k.value}),await te(),C({message:"Conductor registrado correctamente",color:"success"}),ne.value=!1,v(),O.value=!1}catch(i){console.log(i)}},ie=o(!1),Ne=async()=>{try{Se(),ie.value=!0,await Fe({...c.value}),await ee(),C({message:"Servicio registrado correctamente",color:"success"}),ie.value=!1,Te(),c.value={},D.value=!1}catch(i){console.log(i)}},ye=async()=>{try{ge(),await ol({...q.value}),await oe(),C({message:"Moneda registrado correctamente",color:"success"}),Q(),j.value=!1}catch(i){console.log(i)}},J=(i,e)=>{b.value=!!i,U.value=i,g.value=e},S=o(!1),Ue=i=>{D.value=!0,S.value=!0,c.value=i},Ae=()=>{c.value={},S.value=!1};return(i,e)=>{const f=u("VaButton"),re=u("VaCardTitle"),ue=u("VaDataTable"),ce=u("VaCardContent"),de=u("VaCard"),V=u("VaInput"),K=u("VaForm"),B=u("VaModal"),qe=u("QuillEditor");return w(),R(ke,null,[t("div",il,[l(de,null,{default:s(()=>[l(re,{class:"flex justify-between"},{default:s(()=>[_(" Vehiculos "),l(f,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[0]||(e[0]=a=>E.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(ce,null,{default:s(()=>[t("div",rl,[l(ue,{items:N.value,columns:F,class:"text-xs",loading:le.value},{"cell(Acciones)":s(({row:a})=>[t("div",ul,[l(f,{icon:"delete",color:"danger",round:"",onClick:ve=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"vehicles")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(B,{modelValue:E.value,"onUpdate:modelValue":e[7]||(e[7]=a=>E.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:Ve},{default:s(()=>[t("div",null,[cl,t("div",dl,[l(K,{ref:"fgVehicle",immediate:"",class:"gap-2"},{default:s(()=>[l(V,{modelValue:d.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.name=a),stateful:"",name:"name",clearable:"",label:"Nombre de Vehiculo",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),M(l(V,{modelValue:d.value.capacity,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.capacity=a),stateful:"",name:"capacity",type:"number",clearable:"",label:"Capacidad",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),[[n(m)]]),M(l(V,{modelValue:d.value.year,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value.year=a),stateful:"",name:"year",type:"text",clearable:"",label:"Año",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),[[n(y)]]),M((w(),W(V,{modelValue:d.value.fee,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Maquina Seca",class:"mb-3",rules:[n(p).required],onChange:e[5]||(e[5]=()=>{d.value.fee=n(X.ceil)(d.value.fee,2)})},{prependInner:s(()=>[vl]),_:1},8,["modelValue","rules"])),[[n(m)]]),M(l(V,{modelValue:d.value.cost,"onUpdate:modelValue":e[6]||(e[6]=a=>d.value.cost=a),stateful:"",type:"number",name:"cost",clearable:"",label:"Consumo por kilometro (gal/hr)",class:"mb-5"},null,8,["modelValue"]),[[n(m)]])]),_:1},512)]),t("div",ml,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:A.value,onClick:Ve},{default:s(()=>[fl]),_:1},8,["loading"])])])]),_:1},8,["modelValue"]),l(de,null,{default:s(()=>[l(re,{class:"flex justify-between"},{default:s(()=>[_(" Conductores "),l(f,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[8]||(e[8]=a=>O.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(ce,null,{default:s(()=>[t("div",pl,[l(ue,{items:H.value,columns:G,class:"text-xs",loading:se.value},{"cell(Acciones)":s(({row:a})=>[t("div",bl,[l(f,{icon:"delete",color:"danger",round:"",onClick:ve=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"drivers")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(B,{modelValue:O.value,"onUpdate:modelValue":e[12]||(e[12]=a=>O.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:_e},{default:s(()=>[t("div",null,[gl,t("div",Vl,[l(K,{ref:"fgDriver",immediate:"",class:"gap-2"},{default:s(()=>[l(V,{modelValue:k.value.type,"onUpdate:modelValue":e[9]||(e[9]=a=>k.value.type=a),stateful:"",name:"type",clearable:"",label:"Tipo de chofer",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),M((w(),W(V,{modelValue:k.value.fee,"onUpdate:modelValue":e[10]||(e[10]=a=>k.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Tarifa por Hora",class:"mb-5",rules:[n(p).required],onChange:e[11]||(e[11]=()=>{k.value.fee=n(X.ceil)(k.value.fee,2)})},{prependInner:s(()=>[_l]),_:1},8,["modelValue","rules"])),[[n(m)]])]),_:1},512)]),t("div",yl,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:ne.value,onClick:_e},{default:s(()=>[Cl]),_:1},8,["loading"])])])]),_:1},8,["modelValue"]),l(B,{modelValue:j.value,"onUpdate:modelValue":e[15]||(e[15]=a=>j.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"",onOk:ye},{default:s(()=>[t("div",null,[xl,t("div",hl,[l(K,{ref:"fgCurrency",immediate:"",class:"gap-2"},{default:s(()=>[l(V,{modelValue:q.value.label,"onUpdate:modelValue":e[13]||(e[13]=a=>q.value.label=a),stateful:"",name:"label",clearable:"",label:"Moneda",class:"mb-4",rules:[n(p).required]},null,8,["modelValue","rules"]),l(V,{modelValue:q.value.value,"onUpdate:modelValue":e[14]||(e[14]=a=>q.value.value=a),stateful:"",name:"value",clearable:"",label:"Tipo de Cambio",class:"mb-5",rules:[n(p).required]},null,8,["modelValue","rules"])]),_:1},512)]),t("div",kl,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",onClick:ye},{default:s(()=>[wl]),_:1})])])]),_:1},8,["modelValue"]),l(de,null,{default:s(()=>[l(re,{class:"flex justify-between"},{default:s(()=>[_(" Servicios "),l(f,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[16]||(e[16]=a=>D.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(ce,null,{default:s(()=>[t("div",Dl,[l(ue,{items:x.value,columns:z,class:"text-xs",loading:Z.value},{"cell(Acciones)":s(({row:a})=>[t("div",Sl,[l(f,{icon:"visibility",color:"info",round:"",onClick:ve=>Ue(a==null?void 0:a.rowData)},null,8,["onClick"]),l(f,{icon:"delete",color:"danger",round:"",onClick:ve=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"service")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(B,{modelValue:D.value,"onUpdate:modelValue":e[22]||(e[22]=a=>D.value=a),"hide-default-actions":"",size:"400px","close-button":"","no-dismiss":"",blur:"",onBeforeClose:Ae},{default:s(()=>[t("div",null,[S.value?fe("",!0):(w(),R("h4",Tl,"Nuevo Servicio")),S.value?(w(),R("h4",$l,"Detalle de Servicio")):fe("",!0),t("div",Nl,[l(K,{ref:"fgService",immediate:"",class:"gap-2"},{default:s(()=>[l(V,{modelValue:c.value.service,"onUpdate:modelValue":e[17]||(e[17]=a=>c.value.service=a),stateful:"",name:"service",clearable:"",label:"Tipo de servicio",class:"mb-3",readonly:S.value,rules:[n(p).required]},null,8,["modelValue","readonly","rules"]),t("div",Ul,[t("div",null,[l(V,{modelValue:c.value.description,"onUpdate:modelValue":e[18]||(e[18]=a=>c.value.description=a),stateful:"",name:"description",clearable:"",label:"Detalle del servicio",class:"mb-3",readonly:S.value,rules:[n(p).required]},null,8,["modelValue","readonly","rules"])]),t("div",null,[M((w(),W(V,{modelValue:c.value.fee,"onUpdate:modelValue":e[19]||(e[19]=a=>c.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Tarifa base",class:"mb-3",readonly:S.value,rules:[n(p).required],onChange:e[20]||(e[20]=()=>{c.value.fee=n(X.ceil)(c.value.fee,2)})},{prependInner:s(()=>[Al]),_:1},8,["modelValue","readonly","rules"])),[[n(m)]])])]),t("div",ql,[Ml,l(qe,{content:c.value.specifications,"onUpdate:content":e[21]||(e[21]=a=>c.value.specifications=a),theme:"snow","content-type":"html",toolbar:["bold","italic"]},null,8,["content"])])]),_:1},512)]),S.value?fe("",!0):(w(),R("div",zl,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:ie.value,onClick:Ne},{default:s(()=>[El]),_:1},8,["loading"])]))])]),_:1},8,["modelValue"]),l(sl)]),l(B,{modelValue:b.value,"onUpdate:modelValue":e[24]||(e[24]=a=>b.value=a),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:s(()=>[l(f,{size:"small",preset:"secondary",class:"mr-1",onClick:e[23]||(e[23]=a=>J(null,""))},{default:s(()=>[_(" Cancelar")]),_:1}),l(f,{size:"small",loading:r.value,onClick:$e},{default:s(()=>[_(" Continuar")]),_:1},8,["loading"])]),default:s(()=>[Ol]),_:1},8,["modelValue"])],64)}}}),Bl=we(jl,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/settings/Masters.vue"]]),Ll=Object.freeze(Object.defineProperty({__proto__:null,default:Bl},Symbol.toStringTag,{value:"Module"}));export{sl as E,Bl as M,Ll as a};
//# sourceMappingURL=Masters-d1b278ca.js.map
