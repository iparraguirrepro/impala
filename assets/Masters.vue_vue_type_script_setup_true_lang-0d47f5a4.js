import{d as Ce,u as xe,h as t,i as I,j as he,r,o as w,c as R,a as o,b as l,w as s,F as ke,f as _,m as n,p as z,g as W,A as me,k as fe}from"./index-f95e1e62.js";import{g as qe,n as ze,d as Ee,a as Me,b as je,c as Be,e as Oe,f as Ie,h as Re,i as Fe,j as Ge,k as He}from"./Services-5cdf3c78.js";import{v as p}from"./utils-17deefef.js";import{l as X}from"./lodash-14854b8b.js";import{o as we,a as Le}from"./helpers-a12fb3e4.js";const Pe={class:"flex flex-col space-y-6 md:space-y-4"},Qe={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},Je={class:"flex gap-1"},Ke=o("h4",{class:"text-base mb-4"},"Nuevo Viatico",-1),We={class:"flex flex-col"},Xe=o("span",{class:"pr-2 font-bold text-sm"},"S/",-1),Ye={class:"flex"},Ze=o("span",{class:"ml-2"},"Registrar",-1),el=o("p",{class:"text-sm"},"¿Deseas continuar?",-1),ll=Ce({__name:"Expenses",setup(N){const m=we,{notify:y}=xe(),C=[{key:"Tipo",sortable:!0},{key:"Valor",sortable:!0},{key:"Acciones",width:80}],F=t([]),G=t(null),E=t(!1),$=t(!1),H=t(!1),x=t(!1),h=t({}),{validate:A,reset:M}=I("formExpense");he(async()=>{await U()});async function U(){x.value=!0;const V=await qe();F.value=V.map(u=>({...u,Tipo:u.name,Valor:`S/ ${u.value||"0.00"}`})),x.value=!1}const j=async()=>{await Ee(G.value),await U(),$.value=!1},B=async()=>{try{A(),x.value=!0,await ze({...h.value}),await U(),x.value=!1,M(),y({message:"Registrado correctamente",color:"success"}),E.value=!1}catch(V){console.log(V)}},D=V=>{$.value=!!V,G.value=V};return(V,u)=>{const b=r("VaButton"),d=r("VaCardTitle"),k=r("VaDataTable"),q=r("VaCardContent"),c=r("VaCard"),L=r("VaInput"),Y=r("VaForm"),P=r("VaModal");return w(),R(ke,null,[o("div",Pe,[l(c,null,{default:s(()=>[l(d,{class:"flex justify-between"},{default:s(()=>[_(" Viaticos "),l(b,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:u[0]||(u[0]=v=>E.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(q,null,{default:s(()=>[o("div",Qe,[l(k,{items:F.value,columns:C,class:"text-xs",loading:x.value},{"cell(Acciones)":s(({row:v})=>[o("div",Je,[l(b,{icon:"delete",color:"danger",round:"",onClick:be=>{var Q;return D((Q=v==null?void 0:v.rowData)==null?void 0:Q.id)}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(P,{modelValue:E.value,"onUpdate:modelValue":u[4]||(u[4]=v=>E.value=v),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:B},{default:s(()=>[o("div",null,[Ke,o("div",We,[l(Y,{ref:"formExpense",immediate:"",class:"gap-2"},{default:s(()=>[l(L,{modelValue:h.value.name,"onUpdate:modelValue":u[1]||(u[1]=v=>h.value.name=v),stateful:"",name:"name",clearable:"",label:"Tipo de viatico",class:"mb-4",rules:[n(p).required]},null,8,["modelValue","rules"]),z((w(),W(L,{modelValue:h.value.value,"onUpdate:modelValue":u[2]||(u[2]=v=>h.value.value=v),stateful:"",name:"value",clearable:"",label:"Valor promedio",class:"mb-5",rules:[n(p).required],onChange:u[3]||(u[3]=()=>{h.value.value=n(X.ceil)(h.value.value,2)})},{prependInner:s(()=>[Xe]),_:1},8,["modelValue","rules"])),[[n(m)]])]),_:1},512)]),o("div",Ye,[l(b,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:x.value,onClick:B},{default:s(()=>[Ze]),_:1},8,["loading"])])])]),_:1},8,["modelValue"])]),l(P,{modelValue:$.value,"onUpdate:modelValue":u[6]||(u[6]=v=>$.value=v),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:s(()=>[l(b,{size:"small",preset:"secondary",class:"mr-1",onClick:u[5]||(u[5]=v=>D(null))},{default:s(()=>[_(" Cancelar")]),_:1}),l(b,{size:"small",loading:H.value,onClick:j},{default:s(()=>[_(" Continuar")]),_:1},8,["loading"])]),default:s(()=>[el]),_:1},8,["modelValue"])],64)}}}),pe={list:me+"/currencies",delete:me+"/currencies",register:me+"/currencies"},Ve=localStorage.getItem("__token");async function al(){const N={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Ve}};let m=null;return await fetch(pe.list,N).then(y=>{m=y.json()}),m}async function sl(N){const m={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Ve},body:JSON.stringify(N)};let y=null;return await fetch(pe.register,m).then(C=>{y=C.json()}),y}async function ol(N){const m={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Ve}};let y=null;return await fetch(`${pe.delete}/${N}`,m).then(C=>{y=C.json()}),y}const tl={class:"flex flex-col space-y-6 md:space-y-4"},nl={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},il={class:"flex gap-1"},ul=o("h4",{class:"text-base mb-4"},"Nuevo vehiculo",-1),rl={class:"flex flex-col"},cl=o("span",{class:"font-bold text-sm"},"S/",-1),dl={class:"flex"},vl=o("span",{class:"ml-2"},"Registrar",-1),ml={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},fl={class:"flex gap-1"},pl=o("h4",{class:"text-base mb-4"},"Nuevo tipo de conductor",-1),Vl={class:"flex flex-col"},bl=o("span",{class:"pr-2 font-bold text-sm"},"S/",-1),gl={class:"flex"},_l=o("span",{class:"ml-2"},"Registrar",-1),yl=o("h4",{class:"text-base mb-4"},"Nueva Moneda",-1),Cl={class:"flex flex-col"},xl={class:"flex"},hl=o("span",{class:"ml-2"},"Registrar",-1),kl={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},wl={class:"flex gap-1"},Dl={key:0,class:"text-base mb-4"},Sl={key:1,class:"text-base mb-4"},Tl={class:"flex flex-col"},Nl={class:"columns-2"},$l=o("span",{class:"pr-2 font-bold text-sm"},"S/",-1),Al={class:"mb-5"},Ul=o("p",{style:{"font-size":"11px","font-weight":"600",color:"var(--va-primary)"}},"Condiciones especificas:",-1),ql={key:2,class:"flex"},zl=o("span",{class:"ml-2"},"Registrar",-1),El=o("p",{class:"text-sm"},"¿Deseas continuar?",-1),Rl=Ce({__name:"Masters",setup(N){const m=we,y=Le,{notify:C}=xe(),F=[{key:"Vehiculo",sortable:!0},{key:"Fabricación",sortable:!0},{key:"Capacidad",sortable:!0},{key:"Gal/Hr",sortable:!0},{key:"Maquina Seca",sortable:!0},{key:"Acciones",width:80}],G=[{key:"Tipo Conductor",sortable:!0},{key:"Tarifa",sortable:!0},{key:"Acciones",width:80}],E=[{key:"Servicio",sortable:!0},{key:"Descripción",sortable:!0},{key:"Tarifa base",sortable:!0},{key:"Acciones",width:80}],$=t([]),H=t([]),x=t([]),h=t([]),A=t(null),M=t(!1),U=t(!1),j=t(!1),B=t(!1),D=t(!1),V=t(!1),u=t(!1),b=t(null),d=t({}),k=t({}),q=t({}),c=t({}),{validate:L,reset:Y}=I("fgVehicle"),{validate:P,reset:v}=I("fgDriver"),{validate:be,reset:Q}=I("fgCurrency"),{validate:De,reset:Se}=I("fgService");he(()=>{ae(),oe(),te(),ee()});const Z=t(!1);async function ee(){Z.value=!0;const i=await Me();x.value=i.map(e=>({...e,Servicio:e.service,Descripción:e.description,"Tarifa base":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),Z.value=!1}const le=t(!1);async function ae(){le.value=!0;const i=await je();$.value=i.map(e=>({...e,Vehiculo:e.name,Fabricación:e.year,Capacidad:e.capacity,"Gal/Hr":`${e.cost||0}`,"Maquina Seca":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),le.value=!1}const se=t(!1);async function oe(){se.value=!0;const i=await Be();H.value=i.map(e=>({...e,"Tipo Conductor":e.type,Tarifa:e.fee?`S/ ${e.fee||"0.00"}`:"-"})),se.value=!1}async function te(){const i=await al();h.value=i.map(e=>({...e,Moneda:e.label,"Tipo de Cambio":e.value}))}const Te=async()=>{b.value==="vehicles"&&(await Re(A.value),await ae()),b.value==="currencies"&&(await ol(A.value),await te()),b.value==="drivers"&&(await Fe(A.value),await oe()),b.value==="service"&&(await Ge(A.value),await ee()),b.value=null,V.value=!1},ge=async()=>{U.value=!0;try{L(),await Oe({...d.value}),await ae(),C({message:"Vehiculo registrado correctamente",color:"success"}),U.value=!1,Y(),M.value=!1}catch(i){console.log(i)}},ne=t(!1),_e=async()=>{try{P(),ne.value=!0,await Ie({...k.value}),await oe(),C({message:"Conductor registrado correctamente",color:"success"}),ne.value=!1,v(),j.value=!1}catch(i){console.log(i)}},ie=t(!1),Ne=async()=>{try{De(),ie.value=!0,await He({...c.value}),await ee(),C({message:"Servicio registrado correctamente",color:"success"}),ie.value=!1,Se(),c.value={},D.value=!1}catch(i){console.log(i)}},ye=async()=>{try{be(),await sl({...q.value}),await te(),C({message:"Moneda registrado correctamente",color:"success"}),Q(),B.value=!1}catch(i){console.log(i)}},J=(i,e)=>{V.value=!!i,A.value=i,b.value=e},S=t(!1),$e=i=>{D.value=!0,S.value=!0,c.value=i},Ae=()=>{c.value={},S.value=!1};return(i,e)=>{const f=r("VaButton"),ue=r("VaCardTitle"),re=r("VaDataTable"),ce=r("VaCardContent"),de=r("VaCard"),g=r("VaInput"),K=r("VaForm"),O=r("VaModal"),Ue=r("QuillEditor");return w(),R(ke,null,[o("div",tl,[l(de,null,{default:s(()=>[l(ue,{class:"flex justify-between"},{default:s(()=>[_(" Vehiculos "),l(f,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[0]||(e[0]=a=>M.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(ce,null,{default:s(()=>[o("div",nl,[l(re,{items:$.value,columns:F,class:"text-xs",loading:le.value},{"cell(Acciones)":s(({row:a})=>[o("div",il,[l(f,{icon:"delete",color:"danger",round:"",onClick:ve=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"vehicles")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(O,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=a=>M.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:ge},{default:s(()=>[o("div",null,[ul,o("div",rl,[l(K,{ref:"fgVehicle",immediate:"",class:"gap-2"},{default:s(()=>[l(g,{modelValue:d.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.name=a),stateful:"",name:"name",clearable:"",label:"Nombre de Vehiculo",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),z(l(g,{modelValue:d.value.capacity,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.capacity=a),stateful:"",name:"capacity",type:"number",clearable:"",label:"Capacidad",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),[[n(m)]]),z(l(g,{modelValue:d.value.year,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value.year=a),stateful:"",name:"year",type:"text",clearable:"",label:"Año",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),[[n(y)]]),z((w(),W(g,{modelValue:d.value.fee,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Maquina Seca",class:"mb-3",rules:[n(p).required],onChange:e[5]||(e[5]=()=>{d.value.fee=n(X.ceil)(d.value.fee,2)})},{prependInner:s(()=>[cl]),_:1},8,["modelValue","rules"])),[[n(m)]]),z(l(g,{modelValue:d.value.cost,"onUpdate:modelValue":e[6]||(e[6]=a=>d.value.cost=a),stateful:"",type:"number",name:"cost",clearable:"",label:"Consumo por kilometro (gal/hr)",class:"mb-5"},null,8,["modelValue"]),[[n(m)]])]),_:1},512)]),o("div",dl,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:U.value,onClick:ge},{default:s(()=>[vl]),_:1},8,["loading"])])])]),_:1},8,["modelValue"]),l(de,null,{default:s(()=>[l(ue,{class:"flex justify-between"},{default:s(()=>[_(" Conductores "),l(f,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[8]||(e[8]=a=>j.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(ce,null,{default:s(()=>[o("div",ml,[l(re,{items:H.value,columns:G,class:"text-xs",loading:se.value},{"cell(Acciones)":s(({row:a})=>[o("div",fl,[l(f,{icon:"delete",color:"danger",round:"",onClick:ve=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"drivers")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(O,{modelValue:j.value,"onUpdate:modelValue":e[12]||(e[12]=a=>j.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:_e},{default:s(()=>[o("div",null,[pl,o("div",Vl,[l(K,{ref:"fgDriver",immediate:"",class:"gap-2"},{default:s(()=>[l(g,{modelValue:k.value.type,"onUpdate:modelValue":e[9]||(e[9]=a=>k.value.type=a),stateful:"",name:"type",clearable:"",label:"Tipo de chofer",class:"mb-3",rules:[n(p).required]},null,8,["modelValue","rules"]),z((w(),W(g,{modelValue:k.value.fee,"onUpdate:modelValue":e[10]||(e[10]=a=>k.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Tarifa por Hora",class:"mb-5",rules:[n(p).required],onChange:e[11]||(e[11]=()=>{k.value.fee=n(X.ceil)(k.value.fee,2)})},{prependInner:s(()=>[bl]),_:1},8,["modelValue","rules"])),[[n(m)]])]),_:1},512)]),o("div",gl,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:ne.value,onClick:_e},{default:s(()=>[_l]),_:1},8,["loading"])])])]),_:1},8,["modelValue"]),l(O,{modelValue:B.value,"onUpdate:modelValue":e[15]||(e[15]=a=>B.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"",onOk:ye},{default:s(()=>[o("div",null,[yl,o("div",Cl,[l(K,{ref:"fgCurrency",immediate:"",class:"gap-2"},{default:s(()=>[l(g,{modelValue:q.value.label,"onUpdate:modelValue":e[13]||(e[13]=a=>q.value.label=a),stateful:"",name:"label",clearable:"",label:"Moneda",class:"mb-4",rules:[n(p).required]},null,8,["modelValue","rules"]),l(g,{modelValue:q.value.value,"onUpdate:modelValue":e[14]||(e[14]=a=>q.value.value=a),stateful:"",name:"value",clearable:"",label:"Tipo de Cambio",class:"mb-5",rules:[n(p).required]},null,8,["modelValue","rules"])]),_:1},512)]),o("div",xl,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",onClick:ye},{default:s(()=>[hl]),_:1})])])]),_:1},8,["modelValue"]),l(de,null,{default:s(()=>[l(ue,{class:"flex justify-between"},{default:s(()=>[_(" Servicios "),l(f,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[16]||(e[16]=a=>D.value=!0)},{default:s(()=>[_("Agregar")]),_:1})]),_:1}),l(ce,null,{default:s(()=>[o("div",kl,[l(re,{items:x.value,columns:E,class:"text-xs",loading:Z.value},{"cell(Acciones)":s(({row:a})=>[o("div",wl,[l(f,{icon:"visibility",color:"info",round:"",onClick:ve=>$e(a==null?void 0:a.rowData)},null,8,["onClick"]),l(f,{icon:"delete",color:"danger",round:"",onClick:ve=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"service")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),l(O,{modelValue:D.value,"onUpdate:modelValue":e[22]||(e[22]=a=>D.value=a),"hide-default-actions":"",size:"400px","close-button":"","no-dismiss":"",blur:"",onBeforeClose:Ae},{default:s(()=>[o("div",null,[S.value?fe("",!0):(w(),R("h4",Dl,"Nuevo Servicio")),S.value?(w(),R("h4",Sl,"Detalle de Servicio")):fe("",!0),o("div",Tl,[l(K,{ref:"fgService",immediate:"",class:"gap-2"},{default:s(()=>[l(g,{modelValue:c.value.service,"onUpdate:modelValue":e[17]||(e[17]=a=>c.value.service=a),stateful:"",name:"service",clearable:"",label:"Tipo de servicio",class:"mb-3",readonly:S.value,rules:[n(p).required]},null,8,["modelValue","readonly","rules"]),o("div",Nl,[o("div",null,[l(g,{modelValue:c.value.description,"onUpdate:modelValue":e[18]||(e[18]=a=>c.value.description=a),stateful:"",name:"description",clearable:"",label:"Detalle del servicio",class:"mb-3",readonly:S.value,rules:[n(p).required]},null,8,["modelValue","readonly","rules"])]),o("div",null,[z((w(),W(g,{modelValue:c.value.fee,"onUpdate:modelValue":e[19]||(e[19]=a=>c.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Tarifa base",class:"mb-3",readonly:S.value,rules:[n(p).required],onChange:e[20]||(e[20]=()=>{c.value.fee=n(X.ceil)(c.value.fee,2)})},{prependInner:s(()=>[$l]),_:1},8,["modelValue","readonly","rules"])),[[n(m)]])])]),o("div",Al,[Ul,l(Ue,{content:c.value.specifications,"onUpdate:content":e[21]||(e[21]=a=>c.value.specifications=a),theme:"snow","content-type":"html",toolbar:["bold","italic"]},null,8,["content"])])]),_:1},512)]),S.value?fe("",!0):(w(),R("div",ql,[l(f,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:ie.value,onClick:Ne},{default:s(()=>[zl]),_:1},8,["loading"])]))])]),_:1},8,["modelValue"]),l(ll)]),l(O,{modelValue:V.value,"onUpdate:modelValue":e[24]||(e[24]=a=>V.value=a),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:s(()=>[l(f,{size:"small",preset:"secondary",class:"mr-1",onClick:e[23]||(e[23]=a=>J(null,""))},{default:s(()=>[_(" Cancelar")]),_:1}),l(f,{size:"small",loading:u.value,onClick:Te},{default:s(()=>[_(" Continuar")]),_:1},8,["loading"])]),default:s(()=>[El]),_:1},8,["modelValue"])],64)}}});export{Rl as _};
//# sourceMappingURL=Masters.vue_vue_type_script_setup_true_lang-0d47f5a4.js.map
