import{d as Ce,l as xe,p as u,q as Y,s as ke,r as v,o as _,c as G,a as t,b as s,w as o,F as De,f as y,u as i,y as D,g as q,A as fe,v as me}from"./index-4f9ea22f.js";import{e as qe,f as ze,h as Ie,g as Fe,a as Be,u as Me,c as Oe,b as Ge,d as Re,i as He,n as Le}from"./Services-f7e56ebf.js";import{v as b}from"./utils-17deefef.js";import{l as z}from"./lodash-04ea7520.js";import{o as Se,a as Qe}from"./helpers-a12fb3e4.js";import{g as Ke,n as Pe,d as Je}from"./Vehicles-3e565873.js";const We={class:"flex flex-col space-y-6 md:space-y-4"},Xe={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},Ye={class:"flex gap-1"},Ze=t("h4",{class:"text-base mb-4"},"Nuevo Viatico",-1),el={class:"flex flex-col"},ll=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),al={class:"flex"},sl=t("span",{class:"ml-2"},"Registrar",-1),ol=t("p",{class:"text-sm"},"¿Deseas continuar?",-1),tl=Ce({__name:"Expenses",setup(B){const m=Se,{notify:S}=xe(),$=[{key:"Tipo",sortable:!0},{key:"Valor",sortable:!0},{key:"Acciones",width:80}],R=u([]),H=u(null),I=u(!1),E=u(!1),L=u(!1),g=u(!1),C=u({}),{validate:N,reset:h}=Y("formExpense");ke(async()=>{await U()});async function U(){g.value=!0;const k=await qe();R.value=k.map(c=>({...c,Tipo:c.name,Valor:`S/ ${c.value||"0.00"}`})),g.value=!1}const w=async()=>{await Ie(H.value),await U(),E.value=!1},x=async()=>{try{N(),g.value=!0,await ze({...C.value}),await U(),g.value=!1,h(),S({message:"Registrado correctamente",color:"success"}),I.value=!1}catch(k){console.log(k)}},j=k=>{E.value=!!k,H.value=k};return(k,c)=>{const n=v("VaButton"),r=v("VaCardTitle"),d=v("VaDataTable"),Z=v("VaCardContent"),ee=v("VaCard"),Q=v("VaInput"),le=v("VaForm"),K=v("VaModal");return _(),G(De,null,[t("div",We,[s(ee,null,{default:o(()=>[s(r,{class:"flex justify-between"},{default:o(()=>[y(" Viaticos "),s(n,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:c[0]||(c[0]=f=>I.value=!0)},{default:o(()=>[y("Agregar")]),_:1})]),_:1}),s(Z,null,{default:o(()=>[t("div",Xe,[s(d,{items:R.value,columns:$,class:"text-xs",loading:g.value},{"cell(Acciones)":o(({row:f})=>[t("div",Ye,[s(n,{icon:"delete",color:"danger",round:"",onClick:P=>{var F;return j((F=f==null?void 0:f.rowData)==null?void 0:F.id)}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),s(K,{modelValue:I.value,"onUpdate:modelValue":c[4]||(c[4]=f=>I.value=f),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:x},{default:o(()=>[t("div",null,[Ze,t("div",el,[s(le,{ref:"formExpense",immediate:"",class:"gap-2"},{default:o(()=>[s(Q,{modelValue:C.value.name,"onUpdate:modelValue":c[1]||(c[1]=f=>C.value.name=f),stateful:"",name:"name",clearable:"",label:"Tipo de viatico",class:"mb-4",rules:[i(b).required]},null,8,["modelValue","rules"]),D((_(),q(Q,{modelValue:C.value.value,"onUpdate:modelValue":c[2]||(c[2]=f=>C.value.value=f),stateful:"",name:"value",clearable:"",label:"Valor promedio",class:"mb-5",rules:[i(b).required],onChange:c[3]||(c[3]=()=>{C.value.value=i(z.ceil)(C.value.value,2)})},{prependInner:o(()=>[ll]),_:1},8,["modelValue","rules"])),[[i(m)]])]),_:1},512)]),t("div",al,[s(n,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:g.value,onClick:x},{default:o(()=>[sl]),_:1},8,["loading"])])])]),_:1},8,["modelValue"])]),s(K,{modelValue:E.value,"onUpdate:modelValue":c[6]||(c[6]=f=>E.value=f),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:o(()=>[s(n,{size:"small",preset:"secondary",class:"mr-1",onClick:c[5]||(c[5]=f=>j(null))},{default:o(()=>[y(" Cancelar")]),_:1}),s(n,{size:"small",loading:L.value,onClick:w},{default:o(()=>[y(" Continuar")]),_:1},8,["loading"])]),default:o(()=>[ol]),_:1},8,["modelValue"])],64)}}}),he={list:fe+"/currencies",delete:fe+"/currencies",register:fe+"/currencies"},we=localStorage.getItem("__token");async function nl(){const B={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+we}};let m=null;return await fetch(he.list,B).then(S=>{m=S.json()}),m}async function ul(B){const m={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+we}};let S=null;return await fetch(`${he.delete}/${B}`,m).then($=>{S=$.json()}),S}const il={class:"flex flex-col space-y-6 md:space-y-4"},rl={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},cl={class:"flex gap-1"},dl=t("h4",{class:"text-base mb-4"},"Nuevo vehiculo",-1),vl={class:"flex flex-col"},fl=t("span",{class:"font-bold text-sm"},"S/",-1),ml=t("span",{class:"font-bold text-sm"},"S/",-1),pl={class:"flex"},Vl=t("span",{class:"ml-2"},"Guardar",-1),_l={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},bl={class:"flex gap-1"},yl=t("h4",{class:"text-base mb-4"},"Nuevo tipo de conductor",-1),gl={class:"flex flex-col"},Cl=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),xl=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),kl=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),Dl={class:"flex"},Sl=t("span",{class:"ml-2"},"Guardar",-1),hl={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},wl={class:"flex gap-1"},Tl={key:0,class:"text-base mb-4"},$l={key:1,class:"text-base mb-4"},El={class:"flex flex-col"},Nl={class:"columns-2"},Ul=t("span",{class:"pr-2 font-bold text-sm"},"S/",-1),jl={class:"mb-5"},Al=t("p",{style:{"font-size":"11px","font-weight":"600",color:"var(--va-primary)"}},"Condiciones especificas:",-1),ql={key:2,class:"flex"},zl=t("span",{class:"ml-2"},"Guardar",-1),Il=t("p",{class:"text-sm"},"¿Deseas continuar?",-1),Hl=Ce({__name:"Masters",setup(B){const m=Se,S=Qe,{notify:$}=xe(),R=[{key:"Vehiculo",sortable:!0},{key:"Tipo",sortable:!0},{key:"Fabricación",sortable:!0},{key:"Capacidad",sortable:!0},{key:"Gal/Hr",sortable:!0},{key:"Maquina Seca",sortable:!0},{key:"Acciones",width:80}],H=[{key:"Tipo Conductor",sortable:!0},{key:"Tarifa",sortable:!0},{key:"Tarifa Nocturna",sortable:!0},{key:"Tarifa Domingos y Feriados",sortable:!0},{key:"Acciones",width:80}],I=[{key:"Servicio",sortable:!0},{key:"Descripción",sortable:!0},{key:"Tarifa base",sortable:!0},{key:"Acciones",width:80}],E=u([]),L=u([]),g=u([]),C=u([]),N=u(null),h=u(!1),U=u(!1),w=u(!1),x=u(!1),j=u(!1),k=u(!1),c=u(null),n=u({}),r=u({}),d=u({}),{validate:Z,reset:ee}=Y("fgVehicle"),{validate:Q,reset:le}=Y("fgDriver"),{validate:K,reset:f}=Y("fgService");ke(()=>{se(),te(),pe(),F()});const P=u(!1);async function F(){P.value=!0;const l=await Fe();g.value=l.map(e=>({...e,Servicio:e.service,Descripción:e.description,"Tarifa base":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),P.value=!1}const ae=u(!1);async function se(){ae.value=!0;const l=await Ke();E.value=l.map(e=>({...e,Vehiculo:e.name,Tipo:e.type,Fabricación:e.year,Capacidad:e.capacity,"Gal/Hr":`${e.cost||0}`,"Maquina Seca":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),ae.value=!1}const oe=u(!1);async function te(){oe.value=!0;const l=await Be();L.value=l.map(e=>{if(e.fee>0)return{...e,"Tipo Conductor":e.type,Tarifa:e.fee?`S/ ${e.fee||"0.00"}`:"-","Tarifa Nocturna":e.fee_1?`S/ ${e.fee_1||"0.00"}`:"-","Tarifa Domingos y Feriados":e.fee_2?`S/ ${e.fee_2||"0.00"}`:"-"}}).filter(e=>e),oe.value=!1}async function pe(){const l=await nl();C.value=l.map(e=>({...e,Moneda:e.label,"Tipo de Cambio":e.value}))}const Te=async()=>{c.value==="vehicles"&&(await Je(N.value),await se()),c.value==="currencies"&&(await ul(N.value),await pe()),c.value==="drivers"&&(await Ge(N.value),await te()),c.value==="service"&&(await Re(N.value),await F()),c.value=null,j.value=!1},Ve=async()=>{U.value=!0;try{Z(),await Pe({...n.value}),await se(),$({message:"Vehiculo registrado correctamente",color:"success"}),U.value=!1,ee(),h.value=!1}catch(l){console.log(l)}},ne=u(!1),_e=async()=>{var l;try{Q(),ne.value=!0;const e=(l=W.value)==null?void 0:l.id;e?await Me(e,{...r.value}):await Oe({...r.value}),await te(),$({message:"Conductor registrado correctamente",color:"success"}),ne.value=!1,W.value=null,le(),w.value=!1}catch(e){console.log(e)}},ue=u(!1),$e=async()=>{var l;try{K(),ue.value=!0,(l=M.value)!=null&&l.id?await He(M.value.id,{...d.value}):await Le({...d.value}),await F(),$({message:"Servicio registrado correctamente",color:"success"}),ue.value=!1,f(),d.value={},x.value=!1}catch(e){console.log(e)}},J=(l,e)=>{j.value=!!l,N.value=l,c.value=e},A=u(!1),Ee=()=>{d.value={},A.value=!1,M.value=null},Ne=["Ligero","2 Ejes","3 Ejes","4 Ejes","5 Ejes","6 Ejes","7 Ejes","8 Ejes","9 Ejes","10 Ejes","11 Ejes","12 Ejes","13 Ejes","14 Ejes","15 Ejes"],be=u(null),ye=l=>{l?(be.value=l,h.value=!0,n.value.name=l==null?void 0:l.name,n.value.type=l==null?void 0:l.type,n.value.capacity=l==null?void 0:l.capacity,n.value.year=l==null?void 0:l.year,n.value.fee=l==null?void 0:l.fee,n.value.cost=l==null?void 0:l.cost):(be.value=null,h.value=!1,n.value.name="",n.value.type="",n.value.year="",n.value.capacity="",n.value.fee="",n.value.cost="")},W=u(null),ge=l=>{l?(W.value=l,w.value=!0,r.value.type=l==null?void 0:l.type,r.value.fee=(l==null?void 0:l.fee)||0,r.value.fee_1=(l==null?void 0:l.fee_1)||0,r.value.fee_2=(l==null?void 0:l.fee_2)||0):(W.value=null,w.value=!1,r.value.type="",r.value.fee="",r.value.fee_1="",r.value.fee_2="")},M=u(null),Ue=l=>{l?(M.value=l,x.value=!0,d.value.specifications=l==null?void 0:l.specifications,d.value.service=l==null?void 0:l.service,d.value.description=l==null?void 0:l.description,d.value.fee=l==null?void 0:l.fee):(M.value=l,x.value=!1,d.value.specifications="",d.value.service="",d.value.description="",d.value.fee="")};return(l,e)=>{const p=v("VaButton"),ie=v("VaCardTitle"),re=v("VaDataTable"),ce=v("VaCardContent"),de=v("VaCard"),V=v("VaInput"),je=v("VaSelect"),ve=v("VaForm"),X=v("VaModal"),Ae=v("QuillEditor");return _(),G(De,null,[t("div",il,[s(de,null,{default:o(()=>[s(ie,{class:"flex justify-between"},{default:o(()=>[y(" Vehiculos "),s(p,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[0]||(e[0]=a=>h.value=!0)},{default:o(()=>[y("Agregar")]),_:1})]),_:1}),s(ce,null,{default:o(()=>[t("div",rl,[s(re,{items:E.value,columns:R,class:"text-xs",loading:ae.value},{"cell(Acciones)":o(({row:a})=>[t("div",cl,[s(p,{icon:"edit",color:"primary",round:"",onClick:O=>ye(a==null?void 0:a.rowData)},null,8,["onClick"]),s(p,{icon:"delete",color:"danger",round:"",onClick:O=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"vehicles")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),s(X,{modelValue:h.value,"onUpdate:modelValue":e[9]||(e[9]=a=>h.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onClose:e[10]||(e[10]=a=>ye(null)),onOk:Ve},{default:o(()=>[t("div",null,[dl,t("div",vl,[s(ve,{ref:"fgVehicle",immediate:"",class:"gap-2"},{default:o(()=>[s(V,{modelValue:n.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.name=a),stateful:"",name:"name",clearable:"",label:"Nombre de Vehiculo",class:"mb-3",rules:[i(b).required]},null,8,["modelValue","rules"]),s(je,{modelValue:n.value.type,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value.type=a),class:"w-full text-xs mb-3",label:"Tipo de Vehiculo",options:Ne,placeholder:"Selecciona un tipo",rules:[i(b).required]},null,8,["modelValue","rules"]),D(s(V,{modelValue:n.value.capacity,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.capacity=a),stateful:"",name:"capacity",type:"number",clearable:"",label:"Capacidad",class:"mb-3",rules:[i(b).required]},null,8,["modelValue","rules"]),[[i(m)]]),D(s(V,{modelValue:n.value.year,"onUpdate:modelValue":e[4]||(e[4]=a=>n.value.year=a),stateful:"",name:"year",type:"text",clearable:"",label:"Año",class:"mb-3",rules:[i(b).required]},null,8,["modelValue","rules"]),[[i(S)]]),D((_(),q(V,{modelValue:n.value.fee,"onUpdate:modelValue":e[5]||(e[5]=a=>n.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Maquina Seca",class:"mb-3",rules:[i(b).required],onChange:e[6]||(e[6]=()=>{n.value.fee=i(z.ceil)(n.value.fee,2)})},{prependInner:o(()=>[fl]),_:1},8,["modelValue","rules"])),[[i(m)]]),D((_(),q(V,{modelValue:n.value.cost,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.cost=a),stateful:"",name:"cost",clearable:"",label:"Tarifa por Kilometro",class:"mb-3",rules:[i(b).required],onChange:e[8]||(e[8]=()=>{n.value.cost=i(z.ceil)(n.value.cost,2)})},{prependInner:o(()=>[ml]),_:1},8,["modelValue","rules"])),[[i(m)]])]),_:1},512)]),t("div",pl,[s(p,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:U.value,onClick:Ve},{default:o(()=>[Vl]),_:1},8,["loading"])])])]),_:1},8,["modelValue"]),s(de,null,{default:o(()=>[s(ie,{class:"flex justify-between"},{default:o(()=>[y(" Conductores "),s(p,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[11]||(e[11]=a=>w.value=!0)},{default:o(()=>[y("Agregar")]),_:1})]),_:1}),s(ce,null,{default:o(()=>[t("div",_l,[s(re,{items:L.value,columns:H,class:"text-xs",loading:oe.value},{"cell(Acciones)":o(({row:a})=>[t("div",bl,[s(p,{icon:"edit",color:"primary",round:"",onClick:O=>ge(a==null?void 0:a.rowData)},null,8,["onClick"]),s(p,{icon:"delete",color:"danger",round:"",onClick:O=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"drivers")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),s(X,{modelValue:w.value,"onUpdate:modelValue":e[19]||(e[19]=a=>w.value=a),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onClose:e[20]||(e[20]=a=>ge(null)),onOk:_e},{default:o(()=>[t("div",null,[yl,t("div",gl,[s(ve,{ref:"fgDriver",immediate:"",class:"gap-2"},{default:o(()=>[s(V,{modelValue:r.value.type,"onUpdate:modelValue":e[12]||(e[12]=a=>r.value.type=a),stateful:"",name:"type",clearable:"",label:"Tipo de chofer",class:"mb-3",rules:[i(b).required]},null,8,["modelValue","rules"]),D((_(),q(V,{modelValue:r.value.fee,"onUpdate:modelValue":e[13]||(e[13]=a=>r.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Tarifa por Hora",class:"mb-5",rules:[i(b).required],onChange:e[14]||(e[14]=()=>{r.value.fee=i(z.ceil)(r.value.fee,2)})},{prependInner:o(()=>[Cl]),_:1},8,["modelValue","rules"])),[[i(m)]]),D((_(),q(V,{modelValue:r.value.fee_1,"onUpdate:modelValue":e[15]||(e[15]=a=>r.value.fee_1=a),stateful:"",name:"fee_1",clearable:"",label:"Tarifa Nocturna",class:"mb-5",onChange:e[16]||(e[16]=()=>{r.value.fee=i(z.ceil)(r.value.fee_1,2)})},{prependInner:o(()=>[xl]),_:1},8,["modelValue"])),[[i(m)]]),D((_(),q(V,{modelValue:r.value.fee_2,"onUpdate:modelValue":e[17]||(e[17]=a=>r.value.fee_2=a),stateful:"",name:"fee_2",clearable:"",label:"Tarifa Domingos y Feriados",class:"mb-5",onChange:e[18]||(e[18]=()=>{r.value.fee=i(z.ceil)(r.value.fee_2,2)})},{prependInner:o(()=>[kl]),_:1},8,["modelValue"])),[[i(m)]])]),_:1},512)]),t("div",Dl,[s(p,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:ne.value,onClick:_e},{default:o(()=>[Sl]),_:1},8,["loading"])])])]),_:1},8,["modelValue"]),s(de,null,{default:o(()=>[s(ie,{class:"flex justify-between"},{default:o(()=>[y(" Servicios "),s(p,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[21]||(e[21]=a=>x.value=!0)},{default:o(()=>[y("Agregar")]),_:1})]),_:1}),s(ce,null,{default:o(()=>[t("div",hl,[s(re,{items:g.value,columns:I,class:"text-xs",loading:P.value},{"cell(Acciones)":o(({row:a})=>[t("div",wl,[s(p,{icon:"edit",color:"primary",round:"",onClick:O=>Ue(a==null?void 0:a.rowData)},null,8,["onClick"]),s(p,{icon:"delete",color:"danger",round:"",onClick:O=>{var T;return J((T=a==null?void 0:a.rowData)==null?void 0:T.id,"service")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),s(X,{modelValue:x.value,"onUpdate:modelValue":e[27]||(e[27]=a=>x.value=a),"hide-default-actions":"",size:"400px","close-button":"","no-dismiss":"",blur:"",onBeforeClose:Ee},{default:o(()=>[t("div",null,[A.value?me("",!0):(_(),G("h4",Tl,"Nuevo Servicio")),A.value?(_(),G("h4",$l,"Detalle de Servicio")):me("",!0),t("div",El,[s(ve,{ref:"fgService",immediate:"",class:"gap-2"},{default:o(()=>[s(V,{modelValue:d.value.service,"onUpdate:modelValue":e[22]||(e[22]=a=>d.value.service=a),stateful:"",name:"service",clearable:"",label:"Tipo de servicio",class:"mb-3",readonly:A.value,rules:[i(b).required]},null,8,["modelValue","readonly","rules"]),t("div",Nl,[t("div",null,[s(V,{modelValue:d.value.description,"onUpdate:modelValue":e[23]||(e[23]=a=>d.value.description=a),stateful:"",name:"description",clearable:"",label:"Detalle del servicio",class:"mb-3",readonly:A.value,rules:[i(b).required]},null,8,["modelValue","readonly","rules"])]),t("div",null,[D((_(),q(V,{modelValue:d.value.fee,"onUpdate:modelValue":e[24]||(e[24]=a=>d.value.fee=a),stateful:"",name:"fee",clearable:"",label:"Tarifa base",class:"mb-3",readonly:A.value,onChange:e[25]||(e[25]=()=>{d.value.fee=i(z.ceil)(d.value.fee,2)})},{prependInner:o(()=>[Ul]),_:1},8,["modelValue","readonly"])),[[i(m)]])])]),t("div",jl,[Al,s(Ae,{content:d.value.specifications,"onUpdate:content":e[26]||(e[26]=a=>d.value.specifications=a),theme:"snow","content-type":"html",toolbar:["bold","italic"]},null,8,["content"])])]),_:1},512)]),A.value?me("",!0):(_(),G("div",ql,[s(p,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:ue.value,onClick:$e},{default:o(()=>[zl]),_:1},8,["loading"])]))])]),_:1},8,["modelValue"]),s(tl)]),s(X,{modelValue:j.value,"onUpdate:modelValue":e[29]||(e[29]=a=>j.value=a),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:o(()=>[s(p,{size:"small",preset:"secondary",class:"mr-1",onClick:e[28]||(e[28]=a=>J(null,""))},{default:o(()=>[y(" Cancelar")]),_:1}),s(p,{size:"small",loading:k.value,onClick:Te},{default:o(()=>[y(" Continuar")]),_:1},8,["loading"])]),default:o(()=>[Il]),_:1},8,["modelValue"])],64)}}});export{tl as _,Hl as a};
//# sourceMappingURL=Masters.vue_vue_type_script_setup_true_lang-7d0eb9af.js.map
