import{d as P,r as x,x as W,a as $,j as O,o as G,C as L,G as H,u as J,b as i,c as m,e as g,h as e,t as _,k as t,f as s,w as d,F as K,n as y,m as w,i as S}from"./index-5c8bf84e.js";import{n as Q,_ as X,b as Y}from"./NewCompany.vue_vue_type_style_index_0_lang-cf015035.js";import{v as C}from"./utils-17deefef.js";import{a as Z}from"./helpers-a12fb3e4.js";const ee={class:"bg-blue-50"},le={class:"flex justify-between align-center justify-center"},ae={class:"h5 font-bold m-0"},oe={class:"flex gap-2"},se={class:"text-xs px-1"},te={class:"py-4 new-customer gap-8"},ne={class:"w-full bg-white p-2"},de=e("p",{class:"text-sm font-medium mb-3"},"Datos personales",-1),ce={class:"gap-2"},ie={class:"columns-4 gap-4"},me={class:"w-full mt-3"},ue={class:"w-full"},re={class:"w-full columns-4 gap-4 mt-3 pb-2"},pe={class:""},_e={class:""},ve={class:""},be={class:""},fe={class:"w-full mt-5"},ye={key:0,class:"columns-3 mt-5"},Ve={class:"pt-5"},he={class:"text-xs px-1"},xe={key:1,class:"bg-blue-50 px-3 py-2 mt-5"},ge={class:"font-bold text-sm mb-3"},we={class:"columns-4"},Ce={class:"pb-3"},ke={class:"flex justify-end"},Ue={class:"flex gap-2"},Ne={class:"text-xs px-1"},Te=P({__name:"NewCustomer",emits:["close"],setup(Ie,{emit:D}){const R=D,v=Z,b=x(!1),{t:f}=W(),u=x(!1),V=x([]),{isValid:k,validate:B,reset:T}=$("formRef"),a=O({});G(()=>{L(()=>a.havecompany,async c=>{c&&await N()})});const r=H(()=>V.value.find(c=>c.id===a.company)),{notify:F}=J(),U=async()=>{var c;if(B()){u.value=!0;try{const l=(c=a==null?void 0:a.document_type)==null?void 0:c.code;await Q({...a,document_type:l}),F({message:"Cliente registrado correctamente",color:"success"}),T(),R("close")}catch(l){console.log(l)}u.value=!1}},j=[{code:1,text:"DNI"},{code:2,text:"C.E"},{code:3,text:"PASAPORTE"}],A=()=>{window.open("https://e-consultaruc.sunat.gob.pe/cl-ti-itmrconsruc/FrameCriterioBusquedaWeb.jsp","_blank","menubar=1,resizable=0,width=600,height=500")},q=()=>{b.value=!1,N()},N=async()=>{const c=await Y();V.value=c};return(c,l)=>{const h=i("VaButton"),n=i("VaInput"),I=i("VaSelect"),p=i("VaIcon"),E=i("VaSwitch"),z=i("VaForm"),M=i("VaModal");return m(),g(K,null,[e("div",ee,[e("div",null,[e("div",le,[e("h1",ae,_(t(f)("contacts.newContact")),1),e("div",oe,[s(h,{icon:"save",color:"primary",disabled:!t(k),loading:u.value,onClick:U},{default:d(()=>[e("span",se,_(t(f)("contacts.createContact")),1)]),_:1},8,["disabled","loading"])])])]),e("div",te,[s(z,{ref:"formRef",immediate:"",class:"gap-2"},{default:d(()=>[e("div",ne,[de,e("div",ce,[e("div",ie,[e("div",null,[s(n,{modelValue:a.fullname,"onUpdate:modelValue":l[0]||(l[0]=o=>a.fullname=o),stateful:"",name:"fullname",clearable:"",maxlength:"50",label:"Nombres completos",rules:[t(C).required]},null,8,["modelValue","rules"])]),e("div",null,[s(I,{modelValue:a.document_type,"onUpdate:modelValue":l[1]||(l[1]=o=>a.document_type=o),name:"document_type",class:"text-xs",options:j,label:"Tipo de documento"},null,8,["modelValue"])]),e("div",null,[y(s(n,{modelValue:a.document,"onUpdate:modelValue":l[2]||(l[2]=o=>a.document=o),name:"document",stateful:"",clearable:"",maxlength:"22",label:"N° Documento"},null,8,["modelValue"]),[[t(v)]])]),e("div",null,[y((m(),w(n,{modelValue:a.ruc,"onUpdate:modelValue":l[4]||(l[4]=o=>a.ruc=o),maxlength:"22",name:"ruc",stateful:"",clearable:"",label:"RUC"},{appendInner:d(()=>[s(p,{name:"open_in_new",class:"cursor-pointer",onClick:l[3]||(l[3]=o=>A())})]),_:1},8,["modelValue"])),[[t(v)]])])]),e("div",me,[e("div",ue,[s(n,{modelValue:a.address,"onUpdate:modelValue":l[5]||(l[5]=o=>a.address=o),name:"address",stateful:"",clearable:"",label:"Dirección de contacto"},null,8,["modelValue"])])]),e("div",re,[e("div",pe,[s(n,{modelValue:a.email,"onUpdate:modelValue":l[6]||(l[6]=o=>a.email=o),name:"email",stateful:"",clearable:"",label:"Correo electrónico",maxlength:"25"},{prependInner:d(()=>[s(p,{name:"alternate_email",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue"])]),e("div",_e,[s(n,{modelValue:a.email_corporative,"onUpdate:modelValue":l[7]||(l[7]=o=>a.email_corporative=o),name:"email_corporative",stateful:"",clearable:"",maxlength:"25",label:"Correo corporativo"},{prependInner:d(()=>[s(p,{name:"alternate_email",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue"])]),e("div",ve,[y((m(),w(n,{modelValue:a.cellphone,"onUpdate:modelValue":l[8]||(l[8]=o=>a.cellphone=o),name:"cellphone",stateful:"",clearable:"",label:"Teléfono",maxlength:"12",rules:[t(C).required]},{prependInner:d(()=>[s(p,{name:"call",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue","rules"])),[[t(v)]])]),e("div",be,[y((m(),w(n,{modelValue:a.whatsapp,"onUpdate:modelValue":l[9]||(l[9]=o=>a.whatsapp=o),name:"whatsapp",maxlength:"12",stateful:"",clearable:"",label:"WhatsApp"},{prependInner:d(()=>[s(p,{name:"call",class:"material-symbols-outlined -mx-1.5",color:"secondary"})]),_:1},8,["modelValue"])),[[t(v)]])])]),e("div",fe,[s(E,{modelValue:a.havecompany,"onUpdate:modelValue":l[10]||(l[10]=o=>a.havecompany=o),class:"text-xs",name:"havecompany",label:"Representa una empresa",size:"small"},null,8,["modelValue"])]),a.havecompany?(m(),g("div",ye,[e("div",null,[s(I,{modelValue:a.company,"onUpdate:modelValue":l[11]||(l[11]=o=>a.company=o),name:"company_id",class:"text-xs",options:V.value,"track-by":"id","value-by":"id","text-by":"socialreason",searchable:"",clearable:"","search-placeholder-text":"Escribe el RUC",rules:[t(C).required],label:"Selecciona la empresa"},null,8,["modelValue","options","rules"])]),e("div",Ve,[s(h,{icon:"add",color:"primary",loading:u.value,onClick:l[12]||(l[12]=o=>b.value=!0)},{default:d(()=>[e("span",he,_(t(f)("contacts.createCompany")),1)]),_:1},8,["loading"])])])):S("",!0),r.value?(m(),g("div",xe,[e("p",ge,_(r.value.socialreason),1),e("div",we,[e("div",null,[s(n,{"model-value":r.value.ruc,background:"#eee",placeholder:"Sin información",name:"whatsapp",readonly:"",class:"opacity-85 cursor-not-allowed",label:"RUC"},null,8,["model-value"])]),e("div",null,[s(n,{"model-value":r.value.phone,background:"#eee",placeholder:"Sin información",name:"whatsapp",readonly:"",class:"opacity-85 cursor-not-allowed",label:"Teléfono"},null,8,["model-value"])]),e("div",null,[s(n,{"model-value":r.value.whatsapp,placeholder:"Sin información",background:"#eee",name:"whatsapp",readonly:"",class:"opacity-85 cursor-not-allowed",label:"WhatsApp"},null,8,["model-value"])])])])):S("",!0)])])]),_:1},512)]),e("div",Ce,[e("div",ke,[e("div",Ue,[s(h,{icon:"save",color:"primary",disabled:!t(k),loading:u.value,onClick:U},{default:d(()=>[e("span",Ne,_(t(f)("contacts.createContact")),1)]),_:1},8,["disabled","loading"])])])])]),s(M,{modelValue:b.value,"onUpdate:modelValue":l[13]||(l[13]=o=>b.value=o),"hide-default-actions":"",size:"340px","close-button":"",blur:"","no-dismiss":""},{default:d(()=>[e("div",null,[s(X,{onClose:q})])]),_:1},8,["modelValue"])],64)}}});export{Te as _};
//# sourceMappingURL=NewCustomer.vue_vue_type_style_index_0_lang-3514b682.js.map
