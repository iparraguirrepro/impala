{"version":3,"file":"OportunitiesPage-292f37f4.js","sources":["../../src/pages/oportunities/OportunitiesPage.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport { useOportunitiesStore } from '../../stores/oportunities-store'\nimport { validators } from '../../services/utils'\nimport { onlyNumbers } from '../../core/helpers'\nimport { ceil } from 'lodash'\n\nconst vOnlyNumbers = onlyNumbers\n\nconst oportunityStore = useOportunitiesStore()\nconst {\n  showConfirm: $showConfirm,\n  isOnChangeStatus: $isOnChangeStatus,\n  activeOportunity,\n} = storeToRefs(oportunityStore)\n</script>\n\n<template>\n  <div class=\"py-4\">\n    <RouterView />\n\n    <VaModal v-if=\"activeOportunity?.status != 4\" v-model=\"$showConfirm\" size=\"250px\" hide-default-actions no-dismiss>\n      <p class=\"text-sm\">\n        ¿Deseas cambiar el estado de la cotización <b>#{{ activeOportunity.id }}</b\n        >?\n      </p>\n      <template #footer>\n        <VaButton size=\"small\" preset=\"secondary\" class=\"mr-1\" @click=\"oportunityStore.hideConfirm\"> Cancelar</VaButton>\n        <VaButton size=\"small\" :loading=\"$isOnChangeStatus\" @click=\"oportunityStore.doChangeStatus\">\n          Continuar\n        </VaButton>\n      </template>\n    </VaModal>\n\n    <VaModal v-if=\"activeOportunity?.status === 4\" v-model=\"$showConfirm\" size=\"350px\" hide-default-actions no-dismiss>\n      <p class=\"text-sm\">\n        Aprobación de cotización <b>#{{ activeOportunity.id }}</b>\n      </p>\n\n      <div class=\"bg-blue-100 p-2 pb-4 rounded mt-3\">\n        <VaTextarea\n          v-model=\"activeOportunity.comments\"\n          class=\"mt-2 w-full text-xs\"\n          background=\"#fff\"\n          clearable\n          label=\"Ingresa un comentario\"\n          :rules=\"[validators.required]\"\n        />\n\n        <VaInput\n          v-model=\"activeOportunity.total\"\n          v-only-numbers\n          class=\"mt-2 font-bold\"\n          background=\"primary\"\n          label=\"Precio final\"\n          :rules=\"[validators.required]\"\n          @change=\"\n            () => {\n              activeOportunity.total = ceil(activeOportunity.total, 2)\n            }\n          \"\n        >\n          <template #prependInner>\n            <span class=\"px-0 font-bold text-sm\">S/</span>\n          </template>\n        </VaInput>\n      </div>\n\n      <template #footer>\n        <VaButton size=\"small\" preset=\"secondary\" class=\"mr-1\" @click=\"oportunityStore.hideConfirm\"> Cancelar</VaButton>\n        <VaButton size=\"small\" :loading=\"$isOnChangeStatus\" @click=\"oportunityStore.doChangeStatus\">\n          Continuar\n        </VaButton>\n      </template>\n    </VaModal>\n  </div>\n</template>\n"],"names":["vOnlyNumbers","onlyNumbers","oportunityStore","useOportunitiesStore","$showConfirm","$isOnChangeStatus","activeOportunity","storeToRefs"],"mappings":"ogBAOA,MAAMA,EAAeC,EAEfC,EAAkBC,IAClB,CACJ,YAAaC,EACb,iBAAkBC,EAClB,iBAAAC,CAAA,EACEC,EAAYL,CAAe"}