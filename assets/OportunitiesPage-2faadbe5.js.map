{"version":3,"file":"OportunitiesPage-2faadbe5.js","sources":["../../src/pages/oportunities/OportunitiesPage.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { storeToRefs } from 'pinia'\r\nimport { useOportunitiesStore } from '../../stores/oportunities-store'\r\nimport { validators } from '../../services/utils'\r\nimport { onlyNumbers } from '../../core/helpers'\r\nimport { ceil } from 'lodash'\r\n\r\nconst vOnlyNumbers = onlyNumbers\r\n\r\nconst oportunityStore = useOportunitiesStore()\r\nconst {\r\n  showConfirm: $showConfirm,\r\n  isOnChangeStatus: $isOnChangeStatus,\r\n  activeOportunity,\r\n} = storeToRefs(oportunityStore)\r\n</script>\r\n\r\n<template>\r\n  <div class=\"py-4\">\r\n    <RouterView />\r\n\r\n    <VaModal v-if=\"activeOportunity?.status != 4\" v-model=\"$showConfirm\" size=\"250px\" hide-default-actions no-dismiss>\r\n      <p class=\"text-sm\">\r\n        ¿Deseas cambiar el estado de la cotización <b>#{{ activeOportunity.id }}</b\r\n        >?\r\n      </p>\r\n      <template #footer>\r\n        <VaButton size=\"small\" preset=\"secondary\" class=\"mr-1\" @click=\"oportunityStore.hideConfirm\"> Cancelar</VaButton>\r\n        <VaButton size=\"small\" :loading=\"$isOnChangeStatus\" @click=\"oportunityStore.doChangeStatus\">\r\n          Continuar\r\n        </VaButton>\r\n      </template>\r\n    </VaModal>\r\n\r\n    <VaModal v-if=\"activeOportunity?.status === 4\" v-model=\"$showConfirm\" size=\"350px\" hide-default-actions no-dismiss>\r\n      <p class=\"text-sm\">\r\n        Aprobación de cotización <b>#{{ activeOportunity.id }}</b>\r\n      </p>\r\n\r\n      <div class=\"bg-blue-100 p-2 pb-4 rounded mt-3\">\r\n        <VaTextarea\r\n          v-model=\"activeOportunity.comments\"\r\n          class=\"mt-2 w-full text-xs\"\r\n          background=\"#fff\"\r\n          clearable\r\n          label=\"Ingresa un comentario\"\r\n          :rules=\"[validators.required]\"\r\n        />\r\n\r\n        <VaInput\r\n          v-model=\"activeOportunity.total\"\r\n          v-only-numbers\r\n          class=\"mt-2 font-bold\"\r\n          background=\"primary\"\r\n          label=\"Precio final\"\r\n          :rules=\"[validators.required]\"\r\n          @change=\"\r\n            () => {\r\n              activeOportunity.total = ceil(activeOportunity.total, 2)\r\n            }\r\n          \"\r\n        >\r\n          <template #prependInner>\r\n            <span class=\"px-0 font-bold text-sm\">S/</span>\r\n          </template>\r\n        </VaInput>\r\n      </div>\r\n\r\n      <template #footer>\r\n        <VaButton size=\"small\" preset=\"secondary\" class=\"mr-1\" @click=\"oportunityStore.hideConfirm\"> Cancelar</VaButton>\r\n        <VaButton size=\"small\" :loading=\"$isOnChangeStatus\" @click=\"oportunityStore.doChangeStatus\">\r\n          Continuar\r\n        </VaButton>\r\n      </template>\r\n    </VaModal>\r\n  </div>\r\n</template>\r\n"],"names":["vOnlyNumbers","onlyNumbers","oportunityStore","useOportunitiesStore","$showConfirm","$isOnChangeStatus","activeOportunity","storeToRefs"],"mappings":"ogBAOA,MAAMA,EAAeC,EAEfC,EAAkBC,IAClB,CACJ,YAAaC,EACb,iBAAkBC,EAClB,iBAAAC,CAAA,EACEC,EAAYL,CAAe"}