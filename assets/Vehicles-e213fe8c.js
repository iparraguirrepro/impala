import{d as G,p as H,q as n,s as R,v as j,r as c,o as q,c as J,a as t,b as a,w as o,F as K,f as p,u,z as v,g as L,_ as P}from"./index-eb5b4f51.js";import{g as Q,n as W,d as X}from"./Vehicles-f3e604e9.js";import{v as V}from"./utils-17deefef.js";import{o as Y,a as Z}from"./helpers-a12fb3e4.js";import{l as ee}from"./lodash-14e13292.js";const le={class:"flex flex-col space-y-6 md:space-y-4"},ae={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},se={class:"flex gap-1"},oe=t("h4",{class:"text-base mb-4"},"Nuevo vehiculo",-1),te={class:"flex flex-col"},ne=t("span",{class:"font-bold text-sm"},"S/",-1),ue={class:"flex"},ce=t("span",{class:"ml-2"},"Registrar",-1),ie=t("p",{class:"text-sm"},"¿Deseas continuar?",-1),re=G({__name:"Vehicles",setup(de){const b=Y,U=Z,{notify:F}=H(),M=[{key:"Vehiculo",sortable:!0},{key:"Fabricación",sortable:!0},{key:"Capacidad",sortable:!0},{key:"Gal/Hr",sortable:!0},{key:"Maquina Seca",sortable:!0},{key:"Acciones",width:80}],C=n([]),x=n(null),m=n(!1),_=n(!1),f=n(!1),S=n(!1),g=n(null),s=n({}),{validate:T,reset:B}=R("fgVehicle");j(()=>{h()});const y=n(!1);async function h(){y.value=!0;const i=await Q();C.value=i.map(e=>({...e,Vehiculo:e.name,Fabricación:e.year,Capacidad:e.capacity,"Gal/Hr":`${e.cost||0}`,"Maquina Seca":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),y.value=!1}const z=async()=>{g.value==="vehicles"&&(await X(x.value),await h()),g.value=null,f.value=!1},k=async()=>{_.value=!0;try{T(),await W({...s.value}),await h(),F({message:"Vehiculo registrado correctamente",color:"success"}),_.value=!1,B(),m.value=!1}catch(i){console.log(i)}},w=(i,e)=>{f.value=!!i,x.value=i,g.value=e};return(i,e)=>{const r=c("VaButton"),A=c("VaCardTitle"),$=c("VaDataTable"),I=c("VaCardContent"),O=c("VaCard"),d=c("VaInput"),E=c("VaForm"),D=c("VaModal");return q(),J(K,null,[t("div",le,[a(O,null,{default:o(()=>[a(A,{class:"flex justify-between"},{default:o(()=>[p(" Vehiculos "),a(r,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[0]||(e[0]=l=>m.value=!0)},{default:o(()=>[p("Agregar")]),_:1})]),_:1}),a(I,null,{default:o(()=>[t("div",ae,[a($,{items:C.value,columns:M,class:"text-xs",loading:y.value},{"cell(Acciones)":o(({row:l})=>[t("div",se,[a(r,{icon:"delete",color:"danger",round:"",onClick:me=>{var N;return w((N=l==null?void 0:l.rowData)==null?void 0:N.id,"vehicles")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),a(D,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=l=>m.value=l),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:k},{default:o(()=>[t("div",null,[oe,t("div",te,[a(E,{ref:"fgVehicle",immediate:"",class:"gap-2"},{default:o(()=>[a(d,{modelValue:s.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.name=l),stateful:"",name:"name",clearable:"",label:"Nombre de Vehiculo",class:"mb-3",rules:[u(V).required]},null,8,["modelValue","rules"]),v(a(d,{modelValue:s.value.capacity,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.capacity=l),stateful:"",name:"capacity",type:"number",clearable:"",label:"Capacidad",class:"mb-3",rules:[u(V).required]},null,8,["modelValue","rules"]),[[u(b)]]),v(a(d,{modelValue:s.value.year,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.year=l),stateful:"",name:"year",type:"text",clearable:"",label:"Año",class:"mb-3",rules:[u(V).required]},null,8,["modelValue","rules"]),[[u(U)]]),v((q(),L(d,{modelValue:s.value.fee,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.fee=l),stateful:"",name:"fee",clearable:"",label:"Maquina Seca",class:"mb-3",rules:[u(V).required],onChange:e[5]||(e[5]=()=>{s.value.fee=u(ee.ceil)(s.value.fee,2)})},{prependInner:o(()=>[ne]),_:1},8,["modelValue","rules"])),[[u(b)]]),v(a(d,{modelValue:s.value.cost,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.cost=l),stateful:"",type:"number",name:"cost",clearable:"",label:"Consumo por kilometro (gal/hr)",class:"mb-5"},null,8,["modelValue"]),[[u(b)]])]),_:1},512)]),t("div",ue,[a(r,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:_.value,onClick:k},{default:o(()=>[ce]),_:1},8,["loading"])])])]),_:1},8,["modelValue"])]),a(D,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=l=>f.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:o(()=>[a(r,{size:"small",preset:"secondary",class:"mr-1",onClick:e[8]||(e[8]=l=>w(null,""))},{default:o(()=>[p(" Cancelar")]),_:1}),a(r,{size:"small",loading:S.value,onClick:z},{default:o(()=>[p(" Continuar")]),_:1},8,["loading"])]),default:o(()=>[ie]),_:1},8,["modelValue"])],64)}}}),_e=P(re,[["__file","C:/Users/ID-04/Documents/Main/vuestic-impala/src/pages/settings/Vehicles.vue"]]);export{_e as default};
//# sourceMappingURL=Vehicles-e213fe8c.js.map
