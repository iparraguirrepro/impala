import{d as G,l as H,p as n,q as R,s as j,r as c,o as q,c as J,a as t,b as a,w as o,F as K,f as p,u,y as v,g as L}from"./index-4f9ea22f.js";import{g as P,n as Q,d as W}from"./Vehicles-3e565873.js";import{v as V}from"./utils-17deefef.js";import{o as X,a as Y}from"./helpers-a12fb3e4.js";import{l as Z}from"./lodash-04ea7520.js";const ee={class:"flex flex-col space-y-6 md:space-y-4"},le={class:"flex flex-col p-4 bg-backgroundSecondary rounded-lg"},ae={class:"flex gap-1"},se=t("h4",{class:"text-base mb-4"},"Nuevo vehiculo",-1),oe={class:"flex flex-col"},te=t("span",{class:"font-bold text-sm"},"S/",-1),ne={class:"flex"},ue=t("span",{class:"ml-2"},"Registrar",-1),ce=t("p",{class:"text-sm"},"¿Deseas continuar?",-1),Ve=G({__name:"Vehicles",setup(ie){const b=X,F=Y,{notify:S}=H(),T=[{key:"Vehiculo",sortable:!0},{key:"Fabricación",sortable:!0},{key:"Capacidad",sortable:!0},{key:"Gal/Hr",sortable:!0},{key:"Maquina Seca",sortable:!0},{key:"Acciones",width:80}],h=n([]),x=n(null),m=n(!1),y=n(!1),f=n(!1),U=n(!1),_=n(null),s=n({}),{validate:B,reset:M}=R("fgVehicle");j(()=>{C()});const g=n(!1);async function C(){g.value=!0;const i=await P();h.value=i.map(e=>({...e,Vehiculo:e.name,Fabricación:e.year,Capacidad:e.capacity,"Gal/Hr":`${e.cost||0}`,"Maquina Seca":e.fee?`S/ ${e.fee||"0.00"}`:"-"})),g.value=!1}const A=async()=>{_.value==="vehicles"&&(await W(x.value),await C()),_.value=null,f.value=!1},k=async()=>{y.value=!0;try{B(),await Q({...s.value}),await C(),S({message:"Vehiculo registrado correctamente",color:"success"}),y.value=!1,M(),m.value=!1}catch(i){console.log(i)}},w=(i,e)=>{f.value=!!i,x.value=i,_.value=e};return(i,e)=>{const r=c("VaButton"),$=c("VaCardTitle"),z=c("VaDataTable"),I=c("VaCardContent"),O=c("VaCard"),d=c("VaInput"),E=c("VaForm"),N=c("VaModal");return q(),J(K,null,[t("div",ee,[a(O,null,{default:o(()=>[a($,{class:"flex justify-between"},{default:o(()=>[p(" Vehiculos "),a(r,{class:"ml-3 pr-2 pl-1",icon:"add",color:"primary",onClick:e[0]||(e[0]=l=>m.value=!0)},{default:o(()=>[p("Agregar")]),_:1})]),_:1}),a(I,null,{default:o(()=>[t("div",le,[a(z,{items:h.value,columns:T,class:"text-xs",loading:g.value},{"cell(Acciones)":o(({row:l})=>[t("div",ae,[a(r,{icon:"delete",color:"danger",round:"",onClick:re=>{var D;return w((D=l==null?void 0:l.rowData)==null?void 0:D.id,"vehicles")}},null,8,["onClick"])])]),_:1},8,["items","loading"])])]),_:1})]),_:1}),a(N,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=l=>m.value=l),"hide-default-actions":"",size:"300px","close-button":"",blur:"","no-dismiss":"",onOk:k},{default:o(()=>[t("div",null,[se,t("div",oe,[a(E,{ref:"fgVehicle",immediate:"",class:"gap-2"},{default:o(()=>[a(d,{modelValue:s.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.name=l),stateful:"",name:"name",clearable:"",label:"Nombre de Vehiculo",class:"mb-3",rules:[u(V).required]},null,8,["modelValue","rules"]),v(a(d,{modelValue:s.value.capacity,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.capacity=l),stateful:"",name:"capacity",type:"number",clearable:"",label:"Capacidad",class:"mb-3",rules:[u(V).required]},null,8,["modelValue","rules"]),[[u(b)]]),v(a(d,{modelValue:s.value.year,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.year=l),stateful:"",name:"year",type:"text",clearable:"",label:"Año",class:"mb-3",rules:[u(V).required]},null,8,["modelValue","rules"]),[[u(F)]]),v((q(),L(d,{modelValue:s.value.fee,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.fee=l),stateful:"",name:"fee",clearable:"",label:"Maquina Seca",class:"mb-3",rules:[u(V).required],onChange:e[5]||(e[5]=()=>{s.value.fee=u(Z.ceil)(s.value.fee,2)})},{prependInner:o(()=>[te]),_:1},8,["modelValue","rules"])),[[u(b)]]),v(a(d,{modelValue:s.value.cost,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.cost=l),stateful:"",type:"number",name:"cost",clearable:"",label:"Consumo por kilometro (gal/hr)",class:"mb-5"},null,8,["modelValue"]),[[u(b)]])]),_:1},512)]),t("div",ne,[a(r,{class:"pr-2 pl-1",icon:"save",color:"primary",loading:y.value,onClick:k},{default:o(()=>[ue]),_:1},8,["loading"])])])]),_:1},8,["modelValue"])]),a(N,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=l=>f.value=l),size:"250px","hide-default-actions":"","no-dismiss":"",blur:""},{footer:o(()=>[a(r,{size:"small",preset:"secondary",class:"mr-1",onClick:e[8]||(e[8]=l=>w(null,""))},{default:o(()=>[p(" Cancelar")]),_:1}),a(r,{size:"small",loading:U.value,onClick:A},{default:o(()=>[p(" Continuar")]),_:1},8,["loading"])]),default:o(()=>[ce]),_:1},8,["modelValue"])],64)}}});export{Ve as _};
//# sourceMappingURL=Vehicles.vue_vue_type_script_setup_true_lang-1a7aba87.js.map
